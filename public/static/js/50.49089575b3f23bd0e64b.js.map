{"version":3,"sources":["webpack:///static/js/50.49089575b3f23bd0e64b.js","webpack:///./src/services/base/mineService.js?0843****","webpack:///./src/vendor/wechatSdk.js","webpack:///SafeSet.vue","webpack:///./src/views/base/mine/SafeSet.vue?ed60","webpack:///./src/views/base/mine/SafeSet.vue?3fcc","webpack:///./src/views/base/mine/SafeSet.vue?2787","webpack:///./src/views/base/mine/SafeSet.vue"],"names":["webpackJsonp","198","module","__webpack_exports__","__webpack_require__","Promise","_classCallCheck","instance","Constructor","TypeError","__WEBPACK_IMPORTED_MODULE_0__api__","__WEBPACK_IMPORTED_MODULE_1__utils_config__","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","urlPre","apiHost","MineService","this","value","_ref","id","name","sex","avatar","address","email","url","_ref2","alias","then","ret","code","reject","data","_ref3","concact","mobile","tel","fax","province","city","area","zip","description","finalUrl","_ref4","passwd","wechatConfig","_ref5","type","receiver","userTwoStepAuthToken","_ref6","_ref7","call","380","currMsgListener","wechatSdk","initLogin","resolve","window","WxLogin","script","document","createElement","src","head","appendChild","onload","assign","style","href","redirect_uri","encodeURIComponent","catch","err","buildUrl","appid","scope","state","openWechatLogin","callback","verify","removeEventListener","replace","tab","open","e","close","addEventListener","707","getFetchParam","processEmail","str","first","split","processMobile","slice","__WEBPACK_IMPORTED_MODULE_0__services_base_mineService__","__WEBPACK_IMPORTED_MODULE_1__vendor_wechatSdk__","__WEBPACK_IMPORTED_MODULE_2__utils_authUtils__","sms","wechat","fetchParam","dialogBind","isShow","validWait","dialogChange","created","initData","clearAuthRefreshToken","destroyed","authRefreshtoken","methods","changeEmail","changeSms","bindEmail","bindSms","bindWechat","_this","JSON","parse","setTwiceToken","adminTwoStepAuthToken","$store","dispatch","menu","getNavMenu","xmview","showTip","message","changeWechat","_this2","getSafeSetInfo","getWechatLoginConfig","sendBindValidCode","_this3","indexOf","sendTwoValidCode","intervalId","setInterval","clearInterval","bindFn","_this4","bindOrChangeTwo","validCode","_this5","validTwoVliadCode","setTimeout","_this6","stepTypes","forEach","item","setContentBack","setContentLoading","components","789","exports","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","850","content","locals","928","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","slot","_v","_s","on","click","title","size","model","$$v","expression","label-width","label","auto-complete","placeholder","staticStyle","display","width","vertical-align","disabled","staticRenderFns","99","Component"],"mappings":"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","file":"static/js/50.49089575b3f23bd0e64b.js","sourcesContent":["webpackJsonp([50],{\n\n/***/ 198:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(Promise) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__api__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_config__ = __webpack_require__(1);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar urlPre = __WEBPACK_IMPORTED_MODULE_1__utils_config__[\"a\" /* default */].apiHost + '/mine';\n\nvar MineService = function () {\n    function MineService() {\n        _classCallCheck(this, MineService);\n    }\n\n    _createClass(MineService, [{\n        key: 'updateProfile',\n\n        // 修改个人信息\n        // updateProfile({ name, address, sex }) {\n        //     let url = `${urlPre}/profile`\n        //     return api.post(url, { name, address, sex })\n        // }\n        value: function updateProfile(_ref) {\n            var id = _ref.id,\n                name = _ref.name,\n                sex = _ref.sex,\n                avatar = _ref.avatar,\n                address = _ref.address,\n                email = _ref.email;\n\n            var url = __WEBPACK_IMPORTED_MODULE_1__utils_config__[\"a\" /* default */].apiHost + '/admin/update/' + id;\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"a\" /* post */](url, { name: name, sex: sex, avatar: avatar, address: address, email: email });\n        }\n\n        // 上传头像\n\n    }, {\n        key: 'uploadAvatar',\n        value: function uploadAvatar(_ref2) {\n            var avatar = _ref2.avatar,\n                alias = _ref2.alias;\n\n            var url = urlPre + '/profile/avatar';\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"a\" /* post */](url, { avatar: avatar, alias: alias }).then(function (ret) {\n                if (ret.code) {\n                    return Promise.reject(ret);\n                } else {\n                    return ret;\n                }\n            });\n        }\n\n        // 获取公司信息接口\n\n    }, {\n        key: 'getCompanyInfo',\n        value: function getCompanyInfo() {\n            var url = urlPre + '/company';\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"b\" /* get */](url).then(function (ret) {\n                return ret.data.data;\n            });\n        }\n\n        // 修改公司信息\n\n    }, {\n        key: 'modifyCompany',\n        value: function modifyCompany(_ref3) {\n            var name = _ref3.name,\n                concact = _ref3.concact,\n                mobile = _ref3.mobile,\n                email = _ref3.email,\n                tel = _ref3.tel,\n                fax = _ref3.fax,\n                province = _ref3.province,\n                city = _ref3.city,\n                area = _ref3.area,\n                address = _ref3.address,\n                zip = _ref3.zip,\n                url = _ref3.url,\n                description = _ref3.description;\n\n            var finalUrl = urlPre + '/company';\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"a\" /* post */](finalUrl, {\n                name: name,\n                concact: concact,\n                mobile: mobile,\n                email: email,\n                tel: tel,\n                fax: fax,\n                province: province,\n                city: city,\n                area: area,\n                address: address,\n                zip: zip,\n                url: url,\n                description: description\n            }).then(function (ret) {\n                if (ret.code) {\n                    return Promise.reject(ret);\n                }\n            });\n        }\n\n        // // 修改密码\n        // modifyPassword({ origin_password, new_password, re_password }) {\n        //     let url = `${urlPre}/password`\n        //     return api.post(url, { origin_password, new_password, re_password }).then((ret) => {\n        //         if (ret.code) {\n        //             return Promise.reject(ret)\n        //         }\n        //     })\n        // }\n        // 更新 id, role_id, avatar, password, area_id, gov_id, name, nickname, mobile, email, sex, address\n\n    }, {\n        key: 'modifyPassword',\n        value: function modifyPassword(_ref4) {\n            var id = _ref4.id,\n                passwd = _ref4.passwd;\n\n            var url = __WEBPACK_IMPORTED_MODULE_1__utils_config__[\"a\" /* default */].apiHost + '/admin/update/' + id;\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"a\" /* post */](url, { passwd: passwd }).then(function (ret) {\n                if (ret.code) {\n                    return Promise.reject(ret);\n                }\n            });\n        }\n\n        // =========================二次登陆部分============\n\n    }, {\n        key: 'getSafeSetInfo',\n        value: function getSafeSetInfo() {\n            var url = urlPre + '/two-step/';\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"b\" /* get */](url).then(function (ret) {\n                return ret.data;\n            });\n        }\n\n        // 二次登陆绑定的微信登录参数\n\n    }, {\n        key: 'getWechatLoginConfig',\n        value: function getWechatLoginConfig() {\n            var url = urlPre + '/two-step/wechat';\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"b\" /* get */](url).then(function (ret) {\n                return ret.data.wechatConfig;\n            });\n        }\n\n        // 绑定邮箱或者手机\n\n    }, {\n        key: 'bindOrChangeTwo',\n        value: function bindOrChangeTwo(_ref5) {\n            var type = _ref5.type,\n                code = _ref5.code,\n                receiver = _ref5.receiver;\n\n            var url = urlPre + '/two-step/code/bind';\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"a\" /* post */](url, { type: type, code: code, receiver: receiver }).then(function (ret) {\n                return ret.data.userTwoStepAuthToken;\n            });\n        }\n\n        // 短信和邮箱验证码\n\n    }, {\n        key: 'sendTwoValidCode',\n        value: function sendTwoValidCode(_ref6) {\n            var type = _ref6.type,\n                receiver = _ref6.receiver;\n\n            var url = urlPre + '/two-step/code/send';\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"a\" /* post */](url, { type: type, receiver: receiver });\n        }\n\n        // 校验验证码\n\n    }, {\n        key: 'validTwoVliadCode',\n        value: function validTwoVliadCode(_ref7) {\n            var code = _ref7.code,\n                type = _ref7.type;\n\n            var url = urlPre + '/two-step/code/verify';\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"a\" /* post */](url, { code: code, type: type }).then(function (ret) {\n                return ret.data.userTwoStepAuthToken;\n            });\n        }\n    }]);\n\n    return MineService;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new MineService());\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(3)))\n\n/***/ }),\n\n/***/ 380:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(Promise) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_config__ = __webpack_require__(1);\n/**\n * Created by huanghuixin on 2017/4/13.\n */\n\n\nvar _currMsgListener = void 0;\nvar wechatSdk = {\n    // 初始化二维码\n    initLogin: function initLogin(wechatConfig) {\n        return new Promise(function (resolve, reject) {\n            if (window.WxLogin) {\n                resolve(true);\n                return;\n            }\n\n            var script = document.createElement('script');\n            script.src = '//res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js';\n            document.head.appendChild(script);\n            script.onload = function () {\n                resolve(true);\n            };\n        }).then(function () {\n            // mine/two-step/wechat/callback?verify=\n            wechatConfig = Object.assign({}, wechatConfig, {\n                style: 'white',\n                href: ''\n            });\n\n            wechatConfig.redirect_uri = encodeURIComponent(wechatConfig.redirect_uri);\n            return new window.WxLogin(wechatConfig);\n        }).catch(function (err) {\n            console.info('微信二维码初始化失败', err);\n        });\n    },\n    buildUrl: function buildUrl(_ref) {\n        var appid = _ref.appid,\n            scope = _ref.scope,\n            redirect_uri = _ref.redirect_uri,\n            state = _ref.state;\n\n        // config.debug && (redirect_uri = 'http://sys.yst.vodjk.com/mine/two-step/wechat/callback?verify=1')\n        return 'https://open.weixin.qq.com/connect/qrconnect?state=' + state + '&appid=' + appid + '&scope=' + scope + '&redirect_uri=' + encodeURIComponent(redirect_uri) + '&login_type=jssdk&style=white';\n    },\n    openWechatLogin: function openWechatLogin(_ref2, callback) {\n        var appid = _ref2.appid,\n            scope = _ref2.scope,\n            redirect_uri = _ref2.redirect_uri,\n            state = _ref2.state,\n            verify = _ref2.verify;\n\n        // 先移除事件\n        _currMsgListener && window.removeEventListener('message', _currMsgListener);\n\n        if (verify) redirect_uri = redirect_uri.replace('verify=', 'verify=' + verify);\n\n        // 打开登录tab\n        var tab = window.open(wechatSdk.buildUrl({ appid: appid, scope: scope, redirect_uri: redirect_uri, state: state }));\n        // 回调事件\n        _currMsgListener = function currMsgListener(e) {\n            callback(e.data);\n            tab.close();\n            window.removeEventListener('message', _currMsgListener);\n            tab = null;\n            _currMsgListener = null;\n        };\n        window.addEventListener('message', _currMsgListener, false);\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (wechatSdk);\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(3)))\n\n/***/ }),\n\n/***/ 707:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__services_base_mineService__ = __webpack_require__(198);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__vendor_wechatSdk__ = __webpack_require__(380);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_authUtils__ = __webpack_require__(2);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n//    import twoStepService from '../../services/twoStepService'\n\n\n\n\nfunction getFetchParam() {\n    return {\n        type: 'email',\n        code: '',\n        receiver: ''\n    };\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    data: function data() {\n        return {\n            email: {},\n            sms: {},\n            wechat: {},\n            wechatConfig: void 0,\n            fetchParam: getFetchParam(),\n            // 绑定的dialog\n            dialogBind: {\n                isShow: false,\n                validWait: 0 // 验证码等待\n            },\n            // 更换的dialog\n            dialogChange: {\n                isShow: false\n            }\n        };\n    },\n    created: function created() {\n        this.initData();\n        // 进入页面去掉自动刷新token 避免在初次设置的时候 跳转到登录\n        __WEBPACK_IMPORTED_MODULE_2__utils_authUtils__[\"a\" /* default */].clearAuthRefreshToken();\n    },\n    destroyed: function destroyed() {\n        // 离开页面时打\n        __WEBPACK_IMPORTED_MODULE_2__utils_authUtils__[\"a\" /* default */].authRefreshtoken();\n    },\n\n    methods: {\n        // 更换邮箱\n        changeEmail: function changeEmail() {\n            this.fetchParam.type = 'email';\n            this.fetchParam.code = '';\n            this.fetchParam.receiver = this.email.data;\n            this.dialogChange.isShow = true;\n        },\n\n        // 更换手机号\n        changeSms: function changeSms() {\n            this.fetchParam.type = 'sms';\n            this.fetchParam.code = '';\n            this.fetchParam.receiver = this.sms.data;\n            this.dialogChange.isShow = true;\n        },\n\n        // 绑定邮箱\n        bindEmail: function bindEmail() {\n            this.fetchParam = getFetchParam();\n            this.fetchParam.type = 'email';\n            this.dialogBind.isShow = true;\n        },\n\n        // 绑定手机号\n        bindSms: function bindSms() {\n            this.fetchParam = getFetchParam();\n            this.fetchParam.type = 'sms';\n            this.dialogBind.isShow = true;\n        },\n\n        // 绑定微信\n        bindWechat: function bindWechat() {\n            var _this = this;\n\n            __WEBPACK_IMPORTED_MODULE_1__vendor_wechatSdk__[\"a\" /* default */].openWechatLogin(this.wechatConfig, function (data) {\n                data = JSON.parse(data);\n                if (data.code == 0) {\n                    // 保存二次验证的token\n                    __WEBPACK_IMPORTED_MODULE_2__utils_authUtils__[\"a\" /* default */].setTwiceToken(data.data.adminTwoStepAuthToken);\n                    _this.initData();\n                    _this.$store.dispatch('setIndexNavMenu', { menu: __WEBPACK_IMPORTED_MODULE_2__utils_authUtils__[\"a\" /* default */].getNavMenu() }); // 获取菜单\n                    xmview.showTip('success', '操作成功', 5000);\n                } else {\n                    xmview.showTip('error', data.message);\n                }\n            });\n        },\n\n        // 更换微信绑定\n        changeWechat: function changeWechat() {\n            var _this2 = this;\n\n            var wechatConfig = Object.assign({}, this.wechatConfig, { verify: 'xm' });\n            __WEBPACK_IMPORTED_MODULE_1__vendor_wechatSdk__[\"a\" /* default */].openWechatLogin(wechatConfig, function (data) {\n                data = JSON.parse(data);\n                if (data.code == 0) {\n                    // 重新刷新绑定数据 如果message为空 则验证成功\n                    __WEBPACK_IMPORTED_MODULE_0__services_base_mineService__[\"a\" /* default */].getSafeSetInfo().then(function (ret) {\n                        if (!ret.message) {\n                            _this2.wechat = {};\n                            xmview.showTip('success', '操作成功!请重新绑定新的微信', 5000);\n                        } else {\n                            xmview.showTip('error', ret.message, 5000);\n                        }\n                    }).then(function () {\n                        __WEBPACK_IMPORTED_MODULE_0__services_base_mineService__[\"a\" /* default */].getWechatLoginConfig().then(function (ret) {\n                            _this2.wechatConfig = ret;\n                        });\n                    });\n                } else {\n                    xmview.showTip('error', data.message, 5000);\n                }\n            });\n        },\n\n        // 发送绑定的验证码\n        sendBindValidCode: function sendBindValidCode() {\n            var _this3 = this;\n\n            var fetchParam = {\n                type: this.fetchParam.type,\n                receiver: this.fetchParam.receiver.indexOf('***') > -1 ? '' : this.fetchParam.receiver\n            };\n            __WEBPACK_IMPORTED_MODULE_0__services_base_mineService__[\"a\" /* default */].sendTwoValidCode(fetchParam).then(function () {\n                xmview.showTip('success', '验证码发送成功,请注意查收');\n                _this3.dialogBind.validWait = 60;\n                var intervalId = setInterval(function () {\n                    --_this3.dialogBind.validWait <= 0 && clearInterval(intervalId);\n                }, 1000);\n            });\n        },\n\n        // 设置绑定 或者更换绑定\n        bindFn: function bindFn() {\n            var _this4 = this;\n\n            __WEBPACK_IMPORTED_MODULE_0__services_base_mineService__[\"a\" /* default */].bindOrChangeTwo(this.fetchParam).then(function (ret) {\n                __WEBPACK_IMPORTED_MODULE_2__utils_authUtils__[\"a\" /* default */].setTwiceToken(ret);\n                _this4[_this4.fetchParam.type] = { data: _this4.fetchParam.receiver };\n                _this4.dialogBind.isShow = false;\n                _this4.dialogChange.isShow = false;\n                _this4.$store.dispatch('setIndexNavMenu', { menu: __WEBPACK_IMPORTED_MODULE_2__utils_authUtils__[\"a\" /* default */].getNavMenu() }); // 获取菜单\n                xmview.showTip('success', '操作成功');\n            }).catch(function (err) {\n                console.info(err);\n            });\n        },\n\n        // 确认验证码\n        validCode: function validCode() {\n            var _this5 = this;\n\n            __WEBPACK_IMPORTED_MODULE_0__services_base_mineService__[\"a\" /* default */].validTwoVliadCode(this.fetchParam).then(function (ret) {\n                _this5.dialogBind.validWait = 0;\n                // 关掉解绑框  打开绑定框\n                _this5.dialogChange.isShow = false;\n                setTimeout(function () {\n                    _this5.dialogBind.isShow = true;\n                }, 500);\n                // 刷新绑定\n                _this5.fetchParam.code = '';\n                _this5.fetchParam.receiver = '';\n\n                __WEBPACK_IMPORTED_MODULE_2__utils_authUtils__[\"a\" /* default */].setTwiceToken(ret);\n            });\n        },\n        initData: function initData() {\n            var _this6 = this;\n\n            __WEBPACK_IMPORTED_MODULE_0__services_base_mineService__[\"a\" /* default */].getSafeSetInfo().then(function (ret) {\n                // 如果已经绑定\n                if (ret && ret.stepTypes) {\n                    ret.stepTypes.forEach(function (item) {\n                        if (item.type === 'sms') {\n                            _this6.sms = item;\n                            _this6.sms && (_this6.sms.data = processMobile(_this6.sms.data));\n                        } else if (item.type === 'email') {\n                            _this6.email = item;\n                            _this6.email && (_this6.email.data = processEmail(_this6.email.data));\n                        } else {\n                            _this6.wechat = item;\n                        }\n                    });\n                } else {\n                    // 如果没有任何绑定\n                    // 把菜单置空\n                    _this6.$store.dispatch('setIndexNavMenu', { menu: [] });\n                    // 干掉返回按钮\n                    xmview.setContentBack(false);\n                }\n                xmview.setContentLoading(false);\n            }).catch(function (err) {\n                console.info(err);\n            }).then(function () {\n                // 微信配置\n                __WEBPACK_IMPORTED_MODULE_0__services_base_mineService__[\"a\" /* default */].getWechatLoginConfig().then(function (ret) {\n                    _this6.wechatConfig = ret;\n                });\n            });\n        }\n    },\n    components: {}\n});\n\nfunction processEmail(str) {\n    if (!str) return str;\n    var first = str.split('@')[0];\n    return first[0] + '***' + first[first.length - 1] + '@' + str.split('@')[1];\n}\n\nfunction processMobile(mobile) {\n    if (!mobile) return;\n\n    return mobile.slice(0, 3) + '****' + mobile.slice(-4, mobile.length);\n}\n\n/***/ }),\n\n/***/ 789:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(88)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"#user-sefeset-container .el-card__header{background:#f8f8f8;padding:10px}#user-sefeset-container .content-container>section{font-size:13px;color:#333;margin-bottom:25px}#user-sefeset-container .content-container>section:last-of-type{margin-bottom:0}#user-sefeset-container .content-container>section>*{display:inline-block;vertical-align:top}#user-sefeset-container .content-container>section>i{padding-top:5px;width:7em;text-align:right}#user-sefeset-container .content-container>section>div{margin-left:20px}#user-sefeset-container .content-container>section>div>div{margin-top:5px;color:#666}\", \"\", {\"version\":3,\"sources\":[\"/Users/zhaoyicheng/Documents/Code/yxt/PC/sys_ui/assets/src/views/base/mine/SafeSet.vue\"],\"names\":[],\"mappings\":\"AACA,yCAAyC,mBAAmB,YAAY,CACvE,AACD,mDAAmD,eAAe,WAAW,kBAAkB,CAC9F,AACD,gEAAgE,eAAe,CAC9E,AACD,qDAAqD,qBAAqB,kBAAkB,CAC3F,AACD,qDAAqD,gBAAgB,UAAU,gBAAgB,CAC9F,AACD,uDAAuD,gBAAgB,CACtE,AACD,2DAA2D,eAAe,UAAU,CACnF\",\"file\":\"SafeSet.vue\",\"sourcesContent\":[\"\\n#user-sefeset-container .el-card__header{background:#f8f8f8;padding:10px\\n}\\n#user-sefeset-container .content-container>section{font-size:13px;color:#333;margin-bottom:25px\\n}\\n#user-sefeset-container .content-container>section:last-of-type{margin-bottom:0\\n}\\n#user-sefeset-container .content-container>section>*{display:inline-block;vertical-align:top\\n}\\n#user-sefeset-container .content-container>section>i{padding-top:5px;width:7em;text-align:right\\n}\\n#user-sefeset-container .content-container>section>div{margin-left:20px\\n}\\n#user-sefeset-container .content-container>section>div>div{margin-top:5px;color:#666\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 850:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(789);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(89)(\"587e8b29\", content, true);\n\n/***/ }),\n\n/***/ 928:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('article', {\n    attrs: {\n      \"id\": \"user-sefeset-container\"\n    }\n  }, [_c('el-card', {\n    staticClass: \"box-card\"\n  }, [_c('div', {\n    staticClass: \"clearfix\",\n    slot: \"header\"\n  }, [_c('span', [_vm._v(\"二次验证\")])]), _vm._v(\" \"), _c('article', {\n    staticClass: \"content-container\"\n  }, [_c('section', [_c('i', [_c('el-tag', {\n    attrs: {\n      \"type\": \"danger\"\n    }\n  }, [_vm._v(\"推荐\")]), _vm._v(\"\\n                    微信:\")], 1), _vm._v(\" \"), _c('div', [(!_vm.wechat || !_vm.wechat.data) ? _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"gray\"\n    }\n  }, [_vm._v(\"未绑定\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.bindWechat\n    }\n  }, [_vm._v(\"绑定\")])], 1) : _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(\"已绑定微信号: \" + _vm._s(_vm.wechat.data))]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.changeWechat\n    }\n  }, [_vm._v(\"更换\")])], 1), _vm._v(\" \"), _c('div', [_vm._v(\"绑定后，登录医线通平台可用绑定微信账号扫码进行安全验证。\")])])]), _vm._v(\" \"), _c('section', [_c('i', [_vm._v(\"手机号码:\")]), _vm._v(\" \"), _c('div', [(!_vm.sms || !_vm.sms.data) ? _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"gray\"\n    }\n  }, [_vm._v(\"未绑定\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.bindSms\n    }\n  }, [_vm._v(\"绑定\")])], 1) : _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(\"已绑定手机号码: \" + _vm._s(_vm.sms.data))]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.changeSms\n    }\n  }, [_vm._v(\"更换\")])], 1), _vm._v(\" \"), _c('div', [_vm._v(\"绑定后，登录医线通平台用该手机号码接收登录验证码。\")])])]), _vm._v(\" \"), _c('section', [_c('i', [_vm._v(\"电子邮件:\")]), _vm._v(\" \"), _c('div', [(!_vm.email || !_vm.email.data) ? _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"gray\"\n    }\n  }, [_vm._v(\"未绑定\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.bindEmail\n    }\n  }, [_vm._v(\"绑定\")])], 1) : _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(\"已绑定电子邮箱: \" + _vm._s(_vm.email.data))]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.changeEmail\n    }\n  }, [_vm._v(\"更换\")])], 1), _vm._v(\" \"), _c('div', [_vm._v(\"绑定后，登录医线通平台可用该邮箱接收登录验证码。\")])])])])]), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"绑定\",\n      \"size\": \"tiny\"\n    },\n    model: {\n      value: (_vm.dialogBind.isShow),\n      callback: function($$v) {\n        _vm.dialogBind.isShow = $$v\n      },\n      expression: \"dialogBind.isShow\"\n    }\n  }, [_c('el-form', {\n    attrs: {\n      \"label-width\": \"80px\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": _vm.fetchParam.type == 'email' ? '电子邮箱' : '手机号码'\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"auto-complete\": \"off\",\n      \"placeholder\": _vm.fetchParam.type == 'email' ? '请输入邮箱地址' : '请输入手机号码'\n    },\n    model: {\n      value: (_vm.fetchParam.receiver),\n      callback: function($$v) {\n        _vm.fetchParam.receiver = $$v\n      },\n      expression: \"fetchParam.receiver\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"验证码\"\n    }\n  }, [_c('div', {\n    staticStyle: {\n      \"display\": \"inline-block\",\n      \"width\": \"56%\",\n      \"vertical-align\": \"top\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"输入验证码\"\n    },\n    model: {\n      value: (_vm.fetchParam.code),\n      callback: function($$v) {\n        _vm.fetchParam.code = $$v\n      },\n      expression: \"fetchParam.code\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\",\n      \"disabled\": _vm.dialogBind.validWait > 0\n    },\n    on: {\n      \"click\": _vm.sendBindValidCode\n    }\n  }, [(_vm.dialogBind.validWait <= 0) ? _c('i', [_vm._v(\"发送验证码\")]) : _c('i', [_vm._v(_vm._s(_vm.dialogBind.validWait) + \" 秒后重发\")])])], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"\"\n    }\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.bindFn\n    }\n  }, [_c('i', [_vm._v(\"确定\")])])], 1)], 1)], 1), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"更换绑定\",\n      \"size\": \"tiny\"\n    },\n    model: {\n      value: (_vm.dialogChange.isShow),\n      callback: function($$v) {\n        _vm.dialogChange.isShow = $$v\n      },\n      expression: \"dialogChange.isShow\"\n    }\n  }, [_c('el-form', {\n    attrs: {\n      \"label-width\": \"80px\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"验证方式\"\n    }\n  }, [_c('i', [_vm._v(_vm._s((_vm.fetchParam.type == 'email' ? '电子邮箱' : '手机号码') + ' (' + _vm.fetchParam.receiver + ')'))])]), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"验证码\"\n    }\n  }, [_c('div', {\n    staticStyle: {\n      \"display\": \"inline-block\",\n      \"width\": \"60%\",\n      \"vertical-align\": \"top\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"输入验证码\"\n    },\n    model: {\n      value: (_vm.fetchParam.code),\n      callback: function($$v) {\n        _vm.fetchParam.code = $$v\n      },\n      expression: \"fetchParam.code\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\",\n      \"disabled\": _vm.dialogBind.validWait > 0\n    },\n    on: {\n      \"click\": _vm.sendBindValidCode\n    }\n  }, [(_vm.dialogBind.validWait <= 0) ? _c('i', [_vm._v(\"发送验证码\")]) : _c('i', [_vm._v(_vm._s(_vm.dialogBind.validWait) + \" 秒后重发\")])])], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"\"\n    }\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.validCode\n    }\n  }, [_c('i', [_vm._v(\"确定\")])])], 1)], 1), _vm._v(\" \"), _c('span', {\n    slot: \"footer\"\n  }, [_vm._v(\"\\n            如果您已绑定\" + _vm._s(_vm.fetchParam.type == 'email' ? '电子邮箱' : '手机号码') + \"无法接收验证码，请联系我们：400-686-5262\\n        \")])], 1)], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 99:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(850)\n\nvar Component = __webpack_require__(5)(\n  /* script */\n  __webpack_require__(707),\n  /* template */\n  __webpack_require__(928),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/50.49089575b3f23bd0e64b.js","import * as api from '../api'\nimport config from '../../utils/config'\n\nconst urlPre = config.apiHost + '/mine'\nclass MineService {\n    // 修改个人信息\n    // updateProfile({ name, address, sex }) {\n    //     let url = `${urlPre}/profile`\n    //     return api.post(url, { name, address, sex })\n    // }\n    updateProfile({ id, name,sex, avatar, address, email}) {\n        let url = `${config.apiHost}/admin/update/${id}`\n        return api.post(url, { name, sex, avatar, address, email})\n    }\n\n    // 上传头像\n    uploadAvatar({ avatar, alias }) {\n        let url = `${urlPre}/profile/avatar`\n        return api.post(url, { avatar, alias }).then((ret) => {\n            if (ret.code) {\n                return Promise.reject(ret)\n            } else {\n                return ret\n            }\n        })\n    }\n\n    // 获取公司信息接口\n    getCompanyInfo() {\n        let url = `${urlPre}/company`\n        return api.get(url).then((ret) => {\n            return ret.data.data\n        })\n    }\n\n    // 修改公司信息\n    modifyCompany({ name, concact, mobile, email, tel, fax, province, city, area, address, zip, url, description }) {\n        let finalUrl = `${urlPre}/company`\n        return api.post(finalUrl, {\n            name,\n            concact,\n            mobile,\n            email,\n            tel,\n            fax,\n            province,\n            city,\n            area,\n            address,\n            zip,\n            url,\n            description\n        }).then((ret) => {\n            if (ret.code) {\n                return Promise.reject(ret)\n            }\n        })\n    }\n\n    // // 修改密码\n    // modifyPassword({ origin_password, new_password, re_password }) {\n    //     let url = `${urlPre}/password`\n    //     return api.post(url, { origin_password, new_password, re_password }).then((ret) => {\n    //         if (ret.code) {\n    //             return Promise.reject(ret)\n    //         }\n    //     })\n    // }\n    // 更新 id, role_id, avatar, password, area_id, gov_id, name, nickname, mobile, email, sex, address\n    modifyPassword({ id, passwd }) {\n        let url = `${config.apiHost}/admin/update/${id}`\n        return api.post(url, { passwd }).then(ret => {\n            if (ret.code) {\n                return Promise.reject(ret)\n            }\n        })\n    }\n\n\n    // =========================二次登陆部分============\n    getSafeSetInfo() {\n        let url = `${urlPre}/two-step/`\n        return api.get(url).then(ret => {\n            return ret.data\n        })\n    }\n\n    // 二次登陆绑定的微信登录参数\n    getWechatLoginConfig() {\n        let url = `${urlPre}/two-step/wechat`\n        return api.get(url).then(ret => {\n            return ret.data.wechatConfig\n        })\n    }\n\n    // 绑定邮箱或者手机\n    bindOrChangeTwo({ type, code, receiver }) {\n        let url = `${urlPre}/two-step/code/bind`\n        return api.post(url, { type, code, receiver }).then((ret) => {\n            return ret.data.userTwoStepAuthToken\n        })\n    }\n\n    // 短信和邮箱验证码\n    sendTwoValidCode({ type, receiver }) {\n        let url = `${urlPre}/two-step/code/send`\n        return api.post(url, { type, receiver })\n    }\n\n    // 校验验证码\n    validTwoVliadCode({ code, type }) {\n        let url = `${urlPre}/two-step/code/verify`\n        return api.post(url, { code, type }).then((ret) => {\n            return ret.data.userTwoStepAuthToken\n        })\n    }\n}\n\nexport default new MineService()\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/base/mineService.js","/**\n * Created by huanghuixin on 2017/4/13.\n */\n\nimport config from '../utils/config'\nlet currMsgListener = void 0\nlet wechatSdk = {\n    // 初始化二维码\n    initLogin (wechatConfig) {\n        return new Promise((resolve, reject) => {\n            if (window.WxLogin) {\n                resolve(true)\n                return\n            }\n\n            let script = document.createElement('script')\n            script.src = '//res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js'\n            document.head.appendChild(script)\n            script.onload = function () {\n                resolve(true)\n            }\n        }).then(() => {\n            // mine/two-step/wechat/callback?verify=\n            wechatConfig = Object.assign({}, wechatConfig, {\n                style: 'white',\n                href: ''\n            })\n\n            wechatConfig.redirect_uri = encodeURIComponent(wechatConfig.redirect_uri)\n            return new window.WxLogin(wechatConfig)\n        }).catch(err => {\n            console.info('微信二维码初始化失败', err)\n        })\n    },\n\n    buildUrl ({appid, scope, redirect_uri, state}) {\n        // config.debug && (redirect_uri = 'http://sys.yst.vodjk.com/mine/two-step/wechat/callback?verify=1')\n        return `https://open.weixin.qq.com/connect/qrconnect?state=${state}&appid=${appid}&scope=${scope}&redirect_uri=${encodeURIComponent(redirect_uri)}&login_type=jssdk&style=white`\n    },\n\n    openWechatLogin ({appid, scope, redirect_uri, state, verify}, callback) {\n        // 先移除事件\n        currMsgListener && window.removeEventListener('message', currMsgListener)\n\n        if (verify)\n            redirect_uri = redirect_uri.replace('verify=', 'verify=' + verify)\n\n        // 打开登录tab\n        let tab = window.open(wechatSdk.buildUrl({appid, scope, redirect_uri, state}))\n        // 回调事件\n        currMsgListener = (e) => {\n            callback(e.data)\n            tab.close()\n            window.removeEventListener('message', currMsgListener)\n            tab = null\n            currMsgListener = null\n        }\n        window.addEventListener('message', currMsgListener, false)\n    }\n}\n\nexport default wechatSdk\n\n\n// WEBPACK FOOTER //\n// ./src/vendor/wechatSdk.js","<!--安全设置-->\n<style lang='scss' rel='stylesheet/scss'>\n    #user-sefeset-container {\n        .el-card__header {\n            background: #f8f8f8;\n            padding: 10px;\n        }\n\n        .content-container {\n            > section {\n                font-size: 13px;\n                color: #333;\n                margin-bottom: 25px;\n                &:last-of-type {\n                    margin-bottom: 0;\n                }\n\n                > * {\n                    display: inline-block;\n                    vertical-align: top;\n                }\n\n                > i {\n                    padding-top: 5px;\n                    width: 7em;\n                    text-align: right;\n                }\n                > div {\n                    margin-left: 20px;\n                    > div {\n                        margin-top: 5px;\n                        color: #666;\n                    }\n                }\n            }\n        }\n    }\n</style>\n\n<template>\n    <article id=\"user-sefeset-container\">\n        <el-card class=\"box-card\">\n            <div slot=\"header\" class=\"clearfix\">\n                <span>二次验证</span>\n            </div>\n            <article class=\"content-container\">\n                <section>\n                    <i>\n                        <el-tag type=\"danger\">推荐</el-tag>\n                        微信:</i>\n                    <div>\n                        <span v-if=\"!wechat || !wechat.data\">\n                            <el-tag type=\"gray\">未绑定</el-tag>\n                            <el-button type=\"text\" @click=\"bindWechat\">绑定</el-button>\n                        </span>\n                        <span v-else>\n                            <el-tag type=\"primary\">已绑定微信号: {{wechat.data}}</el-tag>\n                            <el-button type=\"text\" @click=\"changeWechat\">更换</el-button>\n                        </span>\n                        <div>绑定后，登录医线通平台可用绑定微信账号扫码进行安全验证。</div>\n                    </div>\n                </section>\n                <section>\n                    <i>手机号码:</i>\n                    <div>\n                        <span v-if=\"!sms || !sms.data\">\n                            <el-tag type=\"gray\">未绑定</el-tag>\n                            <el-button type=\"text\" @click=\"bindSms\">绑定</el-button>\n                        </span>\n                        <span v-else>\n                            <el-tag type=\"primary\">已绑定手机号码: {{sms.data}}</el-tag>\n                            <el-button type=\"text\" @click=\"changeSms\">更换</el-button>\n                        </span>\n                        <div>绑定后，登录医线通平台用该手机号码接收登录验证码。</div>\n                    </div>\n                </section>\n                <section>\n                    <i>电子邮件:</i>\n                    <div>\n                        <span v-if=\"!email || !email.data\">\n                            <el-tag type=\"gray\">未绑定</el-tag>\n                            <el-button type=\"text\" @click=\"bindEmail\">绑定</el-button>\n                        </span>\n                        <span v-else>\n                            <el-tag type=\"primary\">已绑定电子邮箱: {{email.data}}</el-tag>\n                            <el-button type=\"text\" @click=\"changeEmail\">更换</el-button>\n                        </span>\n                        <div>绑定后，登录医线通平台可用该邮箱接收登录验证码。</div>\n                    </div>\n                </section>\n            </article>\n        </el-card>\n\n        <el-dialog title=\"绑定\" v-model=\"dialogBind.isShow\" size=\"tiny\">\n            <el-form label-width=\"80px\">\n                <el-form-item :label=\"fetchParam.type == 'email' ? '电子邮箱' : '手机号码'\">\n                    <el-input v-model=\"fetchParam.receiver\" auto-complete=\"off\"\n                              :placeholder=\"fetchParam.type == 'email' ? '请输入邮箱地址' : '请输入手机号码'\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"验证码\">\n                    <div style=\"display: inline-block;width: 56%;vertical-align: top\">\n                        <el-input v-model=\"fetchParam.code\" placeholder=\"输入验证码\"></el-input>\n                    </div>\n                    <el-button type=\"primary\" @click=\"sendBindValidCode\" :disabled=\"dialogBind.validWait > 0\">\n                        <i v-if=\"dialogBind.validWait <= 0\">发送验证码</i>\n                        <i v-else>{{dialogBind.validWait}} 秒后重发</i>\n                    </el-button>\n                </el-form-item>\n                <el-form-item label=\"\">\n                    <el-button @click=\"bindFn\" type=\"primary\">\n                        <i>确定</i>\n                    </el-button>\n                </el-form-item>\n            </el-form>\n        </el-dialog>\n\n        <el-dialog title=\"更换绑定\" v-model=\"dialogChange.isShow\" size=\"tiny\">\n            <el-form label-width=\"80px\">\n                <el-form-item label=\"验证方式\">\n                    <i>{{(fetchParam.type == 'email' ? '电子邮箱' : '手机号码') + ' (' + fetchParam.receiver + ')'}}</i>\n                </el-form-item>\n                <el-form-item label=\"验证码\">\n                    <div style=\"display: inline-block;width: 60%;vertical-align: top\">\n                        <el-input v-model=\"fetchParam.code\" placeholder=\"输入验证码\"></el-input>\n                    </div>\n                    <el-button type=\"primary\" @click=\"sendBindValidCode\" :disabled=\"dialogBind.validWait > 0\">\n                        <i v-if=\"dialogBind.validWait <= 0\">发送验证码</i>\n                        <i v-else>{{dialogBind.validWait}} 秒后重发</i>\n                    </el-button>\n                </el-form-item>\n                <el-form-item label=\"\">\n                    <el-button @click=\"validCode\" type=\"primary\">\n                        <i>确定</i>\n                    </el-button>\n                </el-form-item>\n            </el-form>\n            <span slot=\"footer\">\n                如果您已绑定{{fetchParam.type == 'email' ? '电子邮箱' : '手机号码'}}无法接收验证码，请联系我们：400-686-5262\n            </span>\n        </el-dialog>\n    </article>\n</template>\n\n<script>\n    //    import twoStepService from '../../services/twoStepService'\n    import mineService from '../../../services/base/mineService'\n    import wechatSdk from '../../../vendor/wechatSdk'\n    import authUtils from '../../../utils/authUtils'\n\n    function getFetchParam () {\n        return {\n            type: 'email',\n            code: '',\n            receiver: ''\n        }\n    }\n    export default {\n        data () {\n            return {\n                email: {},\n                sms: {},\n                wechat: {},\n                wechatConfig: void 0,\n                fetchParam: getFetchParam(),\n                // 绑定的dialog\n                dialogBind: {\n                    isShow: false,\n                    validWait: 0, // 验证码等待\n                },\n                // 更换的dialog\n                dialogChange: {\n                    isShow: false,\n                }\n            }\n        },\n        created () {\n            this.initData()\n            // 进入页面去掉自动刷新token 避免在初次设置的时候 跳转到登录\n            authUtils.clearAuthRefreshToken()\n        },\n        destroyed () {\n            // 离开页面时打\n            authUtils.authRefreshtoken()\n        },\n        methods: {\n            // 更换邮箱\n            changeEmail () {\n                this.fetchParam.type = 'email'\n                this.fetchParam.code = ''\n                this.fetchParam.receiver = this.email.data\n                this.dialogChange.isShow = true\n            },\n            // 更换手机号\n            changeSms () {\n                this.fetchParam.type = 'sms'\n                this.fetchParam.code = ''\n                this.fetchParam.receiver = this.sms.data\n                this.dialogChange.isShow = true\n            },\n            // 绑定邮箱\n            bindEmail () {\n                this.fetchParam = getFetchParam()\n                this.fetchParam.type = 'email'\n                this.dialogBind.isShow = true\n            },\n            // 绑定手机号\n            bindSms () {\n                this.fetchParam = getFetchParam()\n                this.fetchParam.type = 'sms'\n                this.dialogBind.isShow = true\n            },\n            // 绑定微信\n            bindWechat () {\n                wechatSdk.openWechatLogin(this.wechatConfig, (data) => {\n                    data = JSON.parse(data)\n                    if (data.code == 0) {\n                        // 保存二次验证的token\n                        authUtils.setTwiceToken(data.data.adminTwoStepAuthToken)\n                        this.initData()\n                        this.$store.dispatch('setIndexNavMenu', {menu: authUtils.getNavMenu()}) // 获取菜单\n                        xmview.showTip('success', '操作成功', 5000)\n                    } else {\n                        xmview.showTip('error', data.message)\n                    }\n                })\n            },\n            // 更换微信绑定\n            changeWechat () {\n                let wechatConfig = Object.assign({}, this.wechatConfig, {verify: 'xm'})\n                wechatSdk.openWechatLogin(wechatConfig, (data) => {\n                    data = JSON.parse(data)\n                    if (data.code == 0) {\n                        // 重新刷新绑定数据 如果message为空 则验证成功\n                        mineService.getSafeSetInfo().then((ret) => {\n                            if (!ret.message) {\n                                this.wechat = {}\n                                xmview.showTip('success', '操作成功!请重新绑定新的微信', 5000)\n                            } else {\n                                xmview.showTip('error', ret.message, 5000)\n                            }\n                        }).then(() => {\n                            mineService.getWechatLoginConfig().then((ret) => {\n                                this.wechatConfig = ret\n                            })\n                        })\n                    } else {\n                        xmview.showTip('error', data.message, 5000)\n                    }\n                })\n            },\n            // 发送绑定的验证码\n            sendBindValidCode () {\n                let fetchParam = {\n                    type: this.fetchParam.type,\n                    receiver: this.fetchParam.receiver.indexOf('***') > -1 ? '' : this.fetchParam.receiver\n                }\n                mineService.sendTwoValidCode(fetchParam).then(() => {\n                    xmview.showTip('success', '验证码发送成功,请注意查收')\n                    this.dialogBind.validWait = 60\n                    let intervalId = setInterval(() => {\n                        --this.dialogBind.validWait <= 0 && clearInterval(intervalId)\n                    }, 1000)\n                })\n            },\n            // 设置绑定 或者更换绑定\n            bindFn () {\n                mineService.bindOrChangeTwo(this.fetchParam).then((ret) => {\n                    authUtils.setTwiceToken(ret)\n                    this[this.fetchParam.type] = {data: this.fetchParam.receiver}\n                    this.dialogBind.isShow = false\n                    this.dialogChange.isShow = false\n                    this.$store.dispatch('setIndexNavMenu', {menu: authUtils.getNavMenu()}) // 获取菜单\n                    xmview.showTip('success', '操作成功')\n                }).catch((err) => {\n                    console.info(err)\n                })\n            },\n            // 确认验证码\n            validCode () {\n                mineService.validTwoVliadCode(this.fetchParam).then((ret) => {\n                    this.dialogBind.validWait = 0\n                    // 关掉解绑框  打开绑定框\n                    this.dialogChange.isShow = false\n                    setTimeout(() => {\n                        this.dialogBind.isShow = true\n                    }, 500)\n                    // 刷新绑定\n                    this.fetchParam.code = ''\n                    this.fetchParam.receiver = ''\n\n                    authUtils.setTwiceToken(ret)\n                })\n            },\n            initData () {\n                mineService.getSafeSetInfo().then((ret) => {\n                    // 如果已经绑定\n                    if (ret && ret.stepTypes) {\n                        ret.stepTypes.forEach((item) => {\n                            if (item.type === 'sms') {\n                                this.sms = item\n                                this.sms && (this.sms.data = processMobile(this.sms.data))\n                            } else if (item.type === 'email') {\n                                this.email = item\n                                this.email && (this.email.data = processEmail(this.email.data))\n                            } else {\n                                this.wechat = item\n                            }\n                        })\n                    } else { // 如果没有任何绑定\n                        // 把菜单置空\n                        this.$store.dispatch('setIndexNavMenu', {menu: []})\n                        // 干掉返回按钮\n                        xmview.setContentBack(false)\n                    }\n                    xmview.setContentLoading(false)\n                }).catch((err) => {\n                    console.info(err)\n                }).then(() => {\n                    // 微信配置\n                    mineService.getWechatLoginConfig().then((ret) => {\n                        this.wechatConfig = ret\n                    })\n                })\n            }\n        },\n        components: {}\n    }\n\n    function processEmail (str) {\n        if (!str) return str\n        let first = str.split('@')[0]\n        return `${first[0]}***${first[first.length - 1]}@${str.split('@')[1]}`\n    }\n\n    function processMobile (mobile) {\n        if (!mobile) return\n\n        return `${mobile.slice(0, 3)}****${mobile.slice(-4, mobile.length)}`\n    }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// SafeSet.vue?7eab6368","exports = module.exports = require(\"../../../../node_modules/_css-loader@0.27.3@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"#user-sefeset-container .el-card__header{background:#f8f8f8;padding:10px}#user-sefeset-container .content-container>section{font-size:13px;color:#333;margin-bottom:25px}#user-sefeset-container .content-container>section:last-of-type{margin-bottom:0}#user-sefeset-container .content-container>section>*{display:inline-block;vertical-align:top}#user-sefeset-container .content-container>section>i{padding-top:5px;width:7em;text-align:right}#user-sefeset-container .content-container>section>div{margin-left:20px}#user-sefeset-container .content-container>section>div>div{margin-top:5px;color:#666}\", \"\", {\"version\":3,\"sources\":[\"/Users/zhaoyicheng/Documents/Code/yxt/PC/sys_ui/assets/src/views/base/mine/SafeSet.vue\"],\"names\":[],\"mappings\":\"AACA,yCAAyC,mBAAmB,YAAY,CACvE,AACD,mDAAmD,eAAe,WAAW,kBAAkB,CAC9F,AACD,gEAAgE,eAAe,CAC9E,AACD,qDAAqD,qBAAqB,kBAAkB,CAC3F,AACD,qDAAqD,gBAAgB,UAAU,gBAAgB,CAC9F,AACD,uDAAuD,gBAAgB,CACtE,AACD,2DAA2D,eAAe,UAAU,CACnF\",\"file\":\"SafeSet.vue\",\"sourcesContent\":[\"\\n#user-sefeset-container .el-card__header{background:#f8f8f8;padding:10px\\n}\\n#user-sefeset-container .content-container>section{font-size:13px;color:#333;margin-bottom:25px\\n}\\n#user-sefeset-container .content-container>section:last-of-type{margin-bottom:0\\n}\\n#user-sefeset-container .content-container>section>*{display:inline-block;vertical-align:top\\n}\\n#user-sefeset-container .content-container>section>i{padding-top:5px;width:7em;text-align:right\\n}\\n#user-sefeset-container .content-container>section>div{margin-left:20px\\n}\\n#user-sefeset-container .content-container>section>div>div{margin-top:5px;color:#666\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.27.3@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/_vue-loader@11.1.4@vue-loader/lib/style-rewriter.js?{\"id\":\"data-v-265d8fad\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_sass-loader@4.1.1@sass-loader?{\"sourceMap\":true}!./~/_vue-loader@11.1.4@vue-loader/lib/selector.js?type=styles&index=0!./src/views/base/mine/SafeSet.vue\n// module id = 789\n// module chunks = 50","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/_css-loader@0.27.3@css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@11.1.4@vue-loader/lib/style-rewriter.js?{\\\"id\\\":\\\"data-v-265d8fad\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/_sass-loader@4.1.1@sass-loader/index.js?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@11.1.4@vue-loader/lib/selector.js?type=styles&index=0!./SafeSet.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/_vue-style-loader@2.0.5@vue-style-loader/lib/addStylesClient.js\")(\"587e8b29\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/_vue-style-loader@2.0.5@vue-style-loader!./~/_css-loader@0.27.3@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/_vue-loader@11.1.4@vue-loader/lib/style-rewriter.js?{\"id\":\"data-v-265d8fad\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_sass-loader@4.1.1@sass-loader?{\"sourceMap\":true}!./~/_vue-loader@11.1.4@vue-loader/lib/selector.js?type=styles&index=0!./src/views/base/mine/SafeSet.vue\n// module id = 850\n// module chunks = 50","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('article', {\n    attrs: {\n      \"id\": \"user-sefeset-container\"\n    }\n  }, [_c('el-card', {\n    staticClass: \"box-card\"\n  }, [_c('div', {\n    staticClass: \"clearfix\",\n    slot: \"header\"\n  }, [_c('span', [_vm._v(\"二次验证\")])]), _vm._v(\" \"), _c('article', {\n    staticClass: \"content-container\"\n  }, [_c('section', [_c('i', [_c('el-tag', {\n    attrs: {\n      \"type\": \"danger\"\n    }\n  }, [_vm._v(\"推荐\")]), _vm._v(\"\\n                    微信:\")], 1), _vm._v(\" \"), _c('div', [(!_vm.wechat || !_vm.wechat.data) ? _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"gray\"\n    }\n  }, [_vm._v(\"未绑定\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.bindWechat\n    }\n  }, [_vm._v(\"绑定\")])], 1) : _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(\"已绑定微信号: \" + _vm._s(_vm.wechat.data))]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.changeWechat\n    }\n  }, [_vm._v(\"更换\")])], 1), _vm._v(\" \"), _c('div', [_vm._v(\"绑定后，登录医线通平台可用绑定微信账号扫码进行安全验证。\")])])]), _vm._v(\" \"), _c('section', [_c('i', [_vm._v(\"手机号码:\")]), _vm._v(\" \"), _c('div', [(!_vm.sms || !_vm.sms.data) ? _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"gray\"\n    }\n  }, [_vm._v(\"未绑定\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.bindSms\n    }\n  }, [_vm._v(\"绑定\")])], 1) : _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(\"已绑定手机号码: \" + _vm._s(_vm.sms.data))]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.changeSms\n    }\n  }, [_vm._v(\"更换\")])], 1), _vm._v(\" \"), _c('div', [_vm._v(\"绑定后，登录医线通平台用该手机号码接收登录验证码。\")])])]), _vm._v(\" \"), _c('section', [_c('i', [_vm._v(\"电子邮件:\")]), _vm._v(\" \"), _c('div', [(!_vm.email || !_vm.email.data) ? _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"gray\"\n    }\n  }, [_vm._v(\"未绑定\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.bindEmail\n    }\n  }, [_vm._v(\"绑定\")])], 1) : _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(\"已绑定电子邮箱: \" + _vm._s(_vm.email.data))]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.changeEmail\n    }\n  }, [_vm._v(\"更换\")])], 1), _vm._v(\" \"), _c('div', [_vm._v(\"绑定后，登录医线通平台可用该邮箱接收登录验证码。\")])])])])]), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"绑定\",\n      \"size\": \"tiny\"\n    },\n    model: {\n      value: (_vm.dialogBind.isShow),\n      callback: function($$v) {\n        _vm.dialogBind.isShow = $$v\n      },\n      expression: \"dialogBind.isShow\"\n    }\n  }, [_c('el-form', {\n    attrs: {\n      \"label-width\": \"80px\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": _vm.fetchParam.type == 'email' ? '电子邮箱' : '手机号码'\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"auto-complete\": \"off\",\n      \"placeholder\": _vm.fetchParam.type == 'email' ? '请输入邮箱地址' : '请输入手机号码'\n    },\n    model: {\n      value: (_vm.fetchParam.receiver),\n      callback: function($$v) {\n        _vm.fetchParam.receiver = $$v\n      },\n      expression: \"fetchParam.receiver\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"验证码\"\n    }\n  }, [_c('div', {\n    staticStyle: {\n      \"display\": \"inline-block\",\n      \"width\": \"56%\",\n      \"vertical-align\": \"top\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"输入验证码\"\n    },\n    model: {\n      value: (_vm.fetchParam.code),\n      callback: function($$v) {\n        _vm.fetchParam.code = $$v\n      },\n      expression: \"fetchParam.code\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\",\n      \"disabled\": _vm.dialogBind.validWait > 0\n    },\n    on: {\n      \"click\": _vm.sendBindValidCode\n    }\n  }, [(_vm.dialogBind.validWait <= 0) ? _c('i', [_vm._v(\"发送验证码\")]) : _c('i', [_vm._v(_vm._s(_vm.dialogBind.validWait) + \" 秒后重发\")])])], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"\"\n    }\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.bindFn\n    }\n  }, [_c('i', [_vm._v(\"确定\")])])], 1)], 1)], 1), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"更换绑定\",\n      \"size\": \"tiny\"\n    },\n    model: {\n      value: (_vm.dialogChange.isShow),\n      callback: function($$v) {\n        _vm.dialogChange.isShow = $$v\n      },\n      expression: \"dialogChange.isShow\"\n    }\n  }, [_c('el-form', {\n    attrs: {\n      \"label-width\": \"80px\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"验证方式\"\n    }\n  }, [_c('i', [_vm._v(_vm._s((_vm.fetchParam.type == 'email' ? '电子邮箱' : '手机号码') + ' (' + _vm.fetchParam.receiver + ')'))])]), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"验证码\"\n    }\n  }, [_c('div', {\n    staticStyle: {\n      \"display\": \"inline-block\",\n      \"width\": \"60%\",\n      \"vertical-align\": \"top\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"输入验证码\"\n    },\n    model: {\n      value: (_vm.fetchParam.code),\n      callback: function($$v) {\n        _vm.fetchParam.code = $$v\n      },\n      expression: \"fetchParam.code\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\",\n      \"disabled\": _vm.dialogBind.validWait > 0\n    },\n    on: {\n      \"click\": _vm.sendBindValidCode\n    }\n  }, [(_vm.dialogBind.validWait <= 0) ? _c('i', [_vm._v(\"发送验证码\")]) : _c('i', [_vm._v(_vm._s(_vm.dialogBind.validWait) + \" 秒后重发\")])])], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"\"\n    }\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.validCode\n    }\n  }, [_c('i', [_vm._v(\"确定\")])])], 1)], 1), _vm._v(\" \"), _c('span', {\n    slot: \"footer\"\n  }, [_vm._v(\"\\n            如果您已绑定\" + _vm._s(_vm.fetchParam.type == 'email' ? '电子邮箱' : '手机号码') + \"无法接收验证码，请联系我们：400-686-5262\\n        \")])], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.1.4@vue-loader/lib/template-compiler.js?{\"id\":\"data-v-265d8fad\"}!./~/_vue-loader@11.1.4@vue-loader/lib/selector.js?type=template&index=0!./src/views/base/mine/SafeSet.vue\n// module id = 928\n// module chunks = 50","\n/* styles */\nrequire(\"!!../../../../node_modules/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@11.1.4@vue-loader/lib/style-rewriter?{\\\"id\\\":\\\"data-v-265d8fad\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@11.1.4@vue-loader/lib/selector?type=styles&index=0!./SafeSet.vue\")\n\nvar Component = require(\"!../../../../node_modules/_vue-loader@11.1.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../node_modules/_vue-loader@11.1.4@vue-loader/lib/selector?type=script&index=0!./SafeSet.vue\"),\n  /* template */\n  require(\"!!../../../../node_modules/_vue-loader@11.1.4@vue-loader/lib/template-compiler?{\\\"id\\\":\\\"data-v-265d8fad\\\"}!../../../../node_modules/_vue-loader@11.1.4@vue-loader/lib/selector?type=template&index=0!./SafeSet.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/base/mine/SafeSet.vue\n// module id = 99\n// module chunks = 50"],"sourceRoot":""}