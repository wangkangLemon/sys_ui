webpackJsonp([14],{1046:function(e,t,n){t=e.exports=n(112)(!0),t.push([e.i,'#sys-form{padding:15px;position:relative;border:1px solid #ededed;border-radius:5px;background:#fff}#sys-form:after{content:"";clear:both;display:block}#sys-form .pagin{float:right;margin-top:15px}#sys-form .bottom-manage{margin-top:15px}.text-blue{color:#20a0ff}.text-light-blue{color:#58b7ff}.text-dark-blue{color:#1d8ce0}.text-success{color:#13ce66}.text-warning{color:#f7ba2a}.text-danger{color:#ff4949}#sys-form .el-form{max-width:700px}#sys-form .submit-form{width:40%;padding:20px}#sys-form .submit-form .subButton{text-align:center}',"",{version:3,sources:["/Users/zhaoyicheng/Documents/Code/yxt/PC-old/sys_ui/assets/src/views/gov/menuManage/MenuForm.vue"],names:[],mappings:"AACA,UAAU,aAAa,kBAAkB,yBAAyB,kBAAkB,eAAe,CAClG,AACD,gBAAgB,WAAW,WAAW,aAAa,CAClD,AACD,iBAAiB,YAAY,eAAe,CAC3C,AACD,yBAAyB,eAAe,CACvC,AACD,WAAW,aAAa,CACvB,AACD,iBAAiB,aAAa,CAC7B,AACD,gBAAgB,aAAa,CAC5B,AACD,cAAc,aAAa,CAC1B,AACD,cAAc,aAAa,CAC1B,AACD,aAAa,aAAa,CACzB,AACD,mBAAmB,eAAe,CACjC,AACD,uBAAuB,UAAU,YAAY,CAC5C,AACD,kCAAkC,iBAAiB,CAClD",file:"MenuForm.vue",sourcesContent:["\n#sys-form{padding:15px;position:relative;border:1px solid #ededed;border-radius:5px;background:#fff\n}\n#sys-form:after{content:'';clear:both;display:block\n}\n#sys-form .pagin{float:right;margin-top:15px\n}\n#sys-form .bottom-manage{margin-top:15px\n}\n.text-blue{color:#20A0FF\n}\n.text-light-blue{color:#58B7FF\n}\n.text-dark-blue{color:#1D8CE0\n}\n.text-success{color:#13CE66\n}\n.text-warning{color:#F7BA2A\n}\n.text-danger{color:#FF4949\n}\n#sys-form .el-form{max-width:700px\n}\n#sys-form .submit-form{width:40%;padding:20px\n}\n#sys-form .submit-form .subButton{text-align:center\n}\n"],sourceRoot:""}])},1155:function(e,t,n){var a=n(1046);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(113)("6013c987",a,!0)},1295:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{attrs:{id:"sys-form"}},[n("section",{staticClass:"upload-avatar"},[n("div",{staticClass:"img-container"},[n("img",{attrs:{src:e.imgUrl}})])]),e._v(" "),n("section",{staticClass:"submit-form"},[n("el-form",{ref:"form",attrs:{"label-width":"120px",model:e.fetchParam,rules:e.rules}},[n("el-form-item",{attrs:{label:"菜单名称",prop:"menu_name"}},[n("el-input",{model:{value:e.fetchParam.menu_name,callback:function(t){e.fetchParam.menu_name=t},expression:"fetchParam.menu_name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"菜单标识",prop:"menu_node"}},[n("el-input",{model:{value:e.fetchParam.menu_node,callback:function(t){e.fetchParam.menu_node=t},expression:"fetchParam.menu_node"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"父级栏目",prop:"pid"}},[n("MultCategory",{attrs:{placeholder:e.fetchParam.parent_name,autoClear:!0,mark:this.mark,showNotCat:!1,req:e.req},model:{value:e.fetchParam.pid,callback:function(t){e.fetchParam.pid=t},expression:"fetchParam.pid"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"排序字段",prop:"sort"}},[n("el-input",{attrs:{type:"number"},model:{value:e.fetchParam.sort,callback:function(t){e.fetchParam.sort=e._n(t)},expression:"fetchParam.sort"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"备注",prop:"remark"}},[n("el-input",{model:{value:e.fetchParam.remark,callback:function(t){e.fetchParam.remark=t},expression:"fetchParam.remark"}})],1),e._v(" "),this.$route.params.sys_type?n("el-form-item",{attrs:{label:""}},[n("el-button",{on:{click:function(t){e.$router.push({name:"gov-menu-manage"})}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.btnNextClick}},[e._v("确认")])],1):e._e()],1)],1)])},staticRenderFns:[]}},297:function(e,t,n){"use strict";(function(e){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(6),o=n(1),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=o.a.apiHost+"/menu",s=function(){function t(){a(this,t)}return i(t,[{key:"fetchData",value:function(t,n,a,o,i){var s=u+"/lists";return r.b(s,t,n,a,o,i).then(function(t){return 0==t.code?t:e.reject(t)})}},{key:"getAdminInfo",value:function(t){var n=u+"/view/"+t;return r.b(n,{},!1).then(function(t){return 0==t.code?t:e.reject(t)})}},{key:"create",value:function(t){var n=t.menu_name,a=t.menu_node,o=t.remark,i=t.sort,s=t.pid,l=t.level,c=u+"/create";return r.a(c,{menu_name:n,menu_node:a,remark:o,sort:i,pid:s,level:l}).then(function(t){if(0!=t.code)return xmview.showTip("error",t.message),e.reject(t);xmview.showTip("success",t.message)})}},{key:"update",value:function(t){var n=t.id,a=t.menu_name,o=t.menu_node,i=t.remark,s=t.sort,l=t.pid,c=t.level,m=t.disabled,d=u+"/update/"+n;return r.a(d,{menu_name:a,menu_node:o,remark:i,sort:s,pid:l,level:c,disabled:m}).then(function(t){return 0==t.code?t.data:(xmview.showTip("error",t.message),e.reject(t))})}},{key:"delete",value:function(t){var n=u+"/delete/"+t;return r.a(n,{}).then(function(t){if(t.code)return e.reject(t)})}},{key:"deleteMulty",value:function(e){var t=u+"/batchdel";return r.c(t,{ids:e})}},{key:"moveToCategoryMulty",value:function(e){var t=e.ids,n=e.category_id,a=u+"/batchmove";return r.c(a,{ids:t,category_id:n})}},{key:"setLesson",value:function(t){var n=t.id,a=t.data,o=u+"/"+n+"/setlesson";return r.c(o,a).then(function(t){if(t.code)return e.reject(t)})}},{key:"offline",value:function(e,t,n,a,o,i,s,l){var c=u+"/update/"+e;return r.a(c,{menu_name:t,menu_node:n,remark:a,sort:o,pid:i,level:s,disabled:l})}},{key:"online",value:function(e,t,n,a,o,i,s,l){var c=u+"/update/"+e;return r.a(c,{menu_name:t,menu_node:n,remark:a,sort:o,pid:i,level:s,disabled:l})}},{key:"getUploadUrl",value:function(e){var t=e.image,n=e.alias,a=u+"/upload";return r.a(a,{image:t,alias:n}).then(function(e){return e.data})}}]),t}();t.a=new s}).call(t,n(2))},350:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(15),n(297);t.default={props:{value:[String,Number,Array],autoClear:{type:Boolean,default:!1},onchange:Function,placeholder:{type:String,default:"请选择"},showNotCat:{type:Boolean,default:!0},type:{type:String,default:""},req:Function,mark:Object},data:function(){return{loading:!1,options:[],currVal:this.value,govid:void 0,lastData:void 0,changeOnSelect:!!this.mark.changeOnSelect&&this.mark.changeOnSelect}},watch:{value:function(e){this.setCurrVal(e)},currVal:function(e,t){this.$emit("input",e.length>0?parseInt(e[e.length-1]):e),this.onchange&&this.onchange(e)}},mounted:function(){function e(e){return e.forEach(function(n){if(0!=n.pid){var a=t(e,"id",n.pid);a&&(a.children?a.children.push(n):a.children=[n])}}),e.filter(function(e){return 0==e.pid})}function t(e,t,n){for(var a=0;a<e.length;a++)if(e[a][t]==n)return e[a];return!1}function n(e,t){return e.forEach(function(e){e.label=e[t],e.value=e.id}),e}var a=this;this.$refs.container.$el.addEventListener("click",function(){a.loading||a.options.length>0||(a.lastData?a.options=a.lastData:(a.loading=!0,a.req({pid:0,level:-1,pagesize:-1}).then(function(t){var r=n(t.data,a.mark.name);a.options=e(r),a.loading=!1,xmview.setContentLoading(!1)})))})},deactivated:function(){this.autoClear&&this.options.length>0&&(this.lastData=this.options,this.options=[])},activated:function(){},methods:{setCurrVal:function(e){e||this.$refs.container.clearValue(new window.Event("click")),this.currVal!=e&&e&&(this.currVal=e)},handleItemChange:function(e){var t=this;if(!(e.length<1)){this.req({pid:e[e.length-1],level:-1,pagesize:-1}).then(function(e){var n=e.data.map(function(e){return e.label=e.menu_name,e.value=e.id,e.children=e.ended?null:[],e});currItem.children=n,t.loading=!1,xmview.setContentLoading(!1)})}},clearData:function(){this.lastData=this.options,this.options=[]}},components:{}}},356:function(e,t,n){t=e.exports=n(112)(!0),t.push([e.i,".course-select-container .el-icon-caret-bottom{text-align:center;text-align-last:center}","",{version:3,sources:["/Users/zhaoyicheng/Documents/Code/yxt/PC-old/sys_ui/assets/src/views/component/select/MultCategory.vue"],names:[],mappings:"AACA,+CAA+C,kBAAkB,sBAAsB,CACtF",file:"MultCategory.vue",sourcesContent:["\n.course-select-container .el-icon-caret-bottom{text-align:center;text-align-last:center\n}\n"],sourceRoot:""}])},375:function(e,t,n){var a=n(356);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(113)("414f67b0",a,!0)},377:function(e,t,n){n(375);var a=n(5)(n(350),n(382),null,null);e.exports=a.exports},382:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-cascader",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"container",staticClass:"course-select-container",attrs:{options:e.options,"show-all-levels":!1,"change-on-select":e.changeOnSelect,placeholder:e.placeholder,clearable:!0},on:{"active-item-change":e.handleItemChange,change:e.setCurrVal}})},staticRenderFns:[]}},398:function(e,t,n){"use strict";(function(e){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(6),o=n(1),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=o.a.apiHost+"/gov",s=function(){function t(){a(this,t)}return i(t,[{key:"fetchData",value:function(t,n,a,o,i){var s=u+"/menu/lists";return r.b(s,t,n,a,o,i).then(function(t){return 0==t.code?t:e.reject(t)})}},{key:"getAdminInfo",value:function(t){var n=u+"/menu/view/"+t;return r.b(n,{},!1).then(function(t){return 0==t.code?t:e.reject(t)})}},{key:"create",value:function(t){var n=t.menu_name,a=t.menu_node,o=t.remark,i=t.sort,s=t.pid,l=t.level,c=u+"/menu/create";return r.a(c,{menu_name:n,menu_node:a,remark:o,sort:i,pid:s,level:l}).then(function(t){if(0!=t.code)return xmview.showTip("error",t.message),e.reject(t);xmview.showTip("success",t.message)})}},{key:"update",value:function(t){var n=t.id,a=t.menu_name,o=t.menu_node,i=t.remark,s=t.sort,l=t.pid,c=t.level,m=t.disabled,d=u+"/menu/update/"+n;return r.a(d,{menu_name:a,menu_node:o,remark:i,sort:s,pid:l,level:c,disabled:m}).then(function(t){return 0==t.code?t.data:(xmview.showTip("error",t.message),e.reject(t))})}},{key:"delete",value:function(t){var n=u+"/menu/delete/"+t;return r.a(n,{}).then(function(t){if(t.code)return e.reject(t)})}},{key:"deleteMulty",value:function(e){var t=u+"/menu/batchdel";return r.c(t,{ids:e})}},{key:"moveToCategoryMulty",value:function(e){var t=e.ids,n=e.category_id,a=u+"/menu/batchmove";return r.c(a,{ids:t,category_id:n})}},{key:"setLesson",value:function(t){var n=t.id,a=t.data,o=u+"/"+n+"/setlesson";return r.c(o,a).then(function(t){if(t.code)return e.reject(t)})}},{key:"offline",value:function(e,t,n,a,o,i,s,l){var c=u+"/menu/update/"+e;return r.a(c,{menu_name:t,menu_node:n,remark:a,sort:o,pid:i,level:s,disabled:l})}},{key:"online",value:function(e,t,n,a,o,i,s,l){var c=u+"/menu/update/"+e;return r.a(c,{menu_name:t,menu_node:n,remark:a,sort:o,pid:i,level:s,disabled:l})}},{key:"getUploadUrl",value:function(e){var t=e.image,n=e.alias,a=u+"/menu/upload";return r.a(a,{image:t,alias:n}).then(function(e){return e.data})}}]),t}();t.a=new s}).call(t,n(2))},43:function(e,t,n){n(1155);var a=n(5)(n(916),n(1295),null,null);e.exports=a.exports},916:function(e,t,n){"use strict";function a(){return{id:0,menu_name:"",menu_node:"",remark:"",sort:0,pid:void 0,level:0,parent_name:""}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(398),o=(n(1),n(377)),i=n.n(o);"function"==typeof Symbol&&Symbol.iterator;t.default={name:"gov-menu-form",components:{MultCategory:i.a},data:function(){return{imgUrl:"",loadingData:!1,currentData:{data:{},pindex:-1,index:-1},fetchParam:a(),resultData:[],drop_list:[],rules:{menu_name:[{required:!0,message:"必须输入",trigger:"blur"},,{pattern:/\S$/,message:"请输入非空格或非特殊字符的内容"}],menu_node:[{required:!0,message:"必须输入",trigger:"blur"},,{pattern:/\S$/,message:"请输入非空格或非特殊字符的内容"}],sort:[{required:!0,type:"number",message:"必须输入",trigger:"blur"}],level:[{required:!0,message:"必须输入",trigger:"blur"}]},mark:{type:"menu",name:"menu_name",changeOnSelect:!0}}},created:function(){var e=this;xmview.setContentLoading(!1),void 0!=this.$route.params.sys_id&&r.a.getAdminInfo(this.$route.params.sys_id).then(function(t){Number(t.data.sort),e.fetchParam=t.data}),this.loadingData=!1,this.getDropval()},watch:{"fetchParam.sort":function(){}},methods:{req:function(e){return r.a.fetchData({pagesize:-1,pid:-1,level:-1})},getDropval:function(){var e=this;r.a.fetchData({pagesize:-1}).then(function(t){e.drop_list=t.data})},btnNextClick:function(){var e=this;this.$refs.form.validate(function(t){if(t){var n=r.a.create;e.$route.params.sys_id&&(n=r.a.update),n(e.fetchParam).then(function(t){xmview.showTip("success","数据提交成功"),e.$router.push({name:"gov-menu-manage"}),e.$refs.form.resetFields(),e.currentData={data:[],pindex:-1,index:-1},e.fetchParam.id||(e.fetchParam.id=t.id)})}})},querySearch:function(e,t){var n=this.restaurants;t(e?n.filter(this.createFilter(e)):n)}}}}});
//# sourceMappingURL=14.ee7779bda770ca304c07.js.map