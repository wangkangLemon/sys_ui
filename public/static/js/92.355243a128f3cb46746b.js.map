{"version":3,"sources":["webpack:///static/js/92.355243a128f3cb46746b.js","webpack:///./src/views/base/mine/SafeSet.vue?3fcc","webpack:///./src/views/base/mine/SafeSet.vue?2787","webpack:///./src/views/base/mine/SafeSet.vue","webpack:///./src/services/base/mineService.js?0843****","webpack:///./src/vendor/wechatSdk.js","webpack:///SafeSet.vue","webpack:///./src/views/base/mine/SafeSet.vue?ed60"],"names":["webpackJsonp","1093","module","exports","__webpack_require__","content","i","locals","1221","render","_vm","this","_h","$createElement","_c","_self","attrs","id","staticClass","slot","_v","type","wechat","data","_s","on","click","changeWechat","bindWechat","sms","changeSms","bindSms","email","changeEmail","bindEmail","title","size","model","value","dialogBind","callback","$$v","isShow","expression","label-width","label","fetchParam","auto-complete","placeholder","receiver","staticStyle","display","width","vertical-align","code","disabled","validWait","sendBindValidCode","bindFn","dialogChange","validCode","staticRenderFns","123","Component","300","__webpack_exports__","Promise","_classCallCheck","instance","Constructor","TypeError","__WEBPACK_IMPORTED_MODULE_0__api__","__WEBPACK_IMPORTED_MODULE_1__utils_config__","_createClass","defineProperties","target","props","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","urlPre","apiHost","MineService","_ref","name","sex","avatar","address","url","_ref2","alias","then","ret","reject","_ref3","concact","mobile","tel","fax","province","city","area","zip","description","finalUrl","_ref4","password","wechatConfig","_ref5","userTwoStepAuthToken","_ref6","_ref7","call","507","currMsgListener","wechatSdk","initLogin","resolve","window","WxLogin","script","document","createElement","src","head","appendChild","onload","assign","style","href","redirect_uri","encodeURIComponent","catch","err","buildUrl","appid","scope","state","openWechatLogin","verify","removeEventListener","replace","tab","open","e","close","addEventListener","840","getFetchParam","processEmail","str","first","split","processMobile","slice","__WEBPACK_IMPORTED_MODULE_0__services_base_mineService__","__WEBPACK_IMPORTED_MODULE_1__vendor_wechatSdk__","__WEBPACK_IMPORTED_MODULE_2__utils_authUtils__","created","initData","clearAuthRefreshToken","destroyed","authRefreshtoken","methods","_this","JSON","parse","setTwiceToken","adminTwoStepAuthToken","$store","dispatch","menu","getNavMenu","xmview","showTip","message","_this2","getSafeSetInfo","getWechatLoginConfig","_this3","indexOf","sendTwoValidCode","intervalId","setInterval","clearInterval","_this4","bindOrChangeTwo","_this5","validTwoVliadCode","setTimeout","_this6","stepTypes","forEach","item","setContentBack","setContentLoading","components","984","push","version","sources","names","mappings","file","sourcesContent","sourceRoot"],"mappings":"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","file":"static/js/92.355243a128f3cb46746b.js","sourcesContent":["webpackJsonp([92],{\n\n/***/ 1093:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(984);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(113)(\"587e8b29\", content, true);\n\n/***/ }),\n\n/***/ 1221:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('article', {\n    attrs: {\n      \"id\": \"user-sefeset-container\"\n    }\n  }, [_c('el-card', {\n    staticClass: \"box-card\"\n  }, [_c('div', {\n    staticClass: \"clearfix\",\n    slot: \"header\"\n  }, [_c('span', [_vm._v(\"二次验证\")])]), _vm._v(\" \"), _c('article', {\n    staticClass: \"content-container\"\n  }, [_c('section', [_c('i', [_c('el-tag', {\n    attrs: {\n      \"type\": \"danger\"\n    }\n  }, [_vm._v(\"推荐\")]), _vm._v(\"\\n                    微信:\")], 1), _vm._v(\" \"), _c('div', [(!_vm.wechat || !_vm.wechat.data) ? _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"gray\"\n    }\n  }, [_vm._v(\"未绑定\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.bindWechat\n    }\n  }, [_vm._v(\"绑定\")])], 1) : _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(\"已绑定微信号: \" + _vm._s(_vm.wechat.data))]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.changeWechat\n    }\n  }, [_vm._v(\"更换\")])], 1), _vm._v(\" \"), _c('div', [_vm._v(\"绑定后，登录医线通平台可用绑定微信账号扫码进行安全验证。\")])])]), _vm._v(\" \"), _c('section', [_c('i', [_vm._v(\"手机号码:\")]), _vm._v(\" \"), _c('div', [(!_vm.sms || !_vm.sms.data) ? _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"gray\"\n    }\n  }, [_vm._v(\"未绑定\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.bindSms\n    }\n  }, [_vm._v(\"绑定\")])], 1) : _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(\"已绑定手机号码: \" + _vm._s(_vm.sms.data))]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.changeSms\n    }\n  }, [_vm._v(\"更换\")])], 1), _vm._v(\" \"), _c('div', [_vm._v(\"绑定后，登录医线通平台用该手机号码接收登录验证码。\")])])]), _vm._v(\" \"), _c('section', [_c('i', [_vm._v(\"电子邮件:\")]), _vm._v(\" \"), _c('div', [(!_vm.email || !_vm.email.data) ? _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"gray\"\n    }\n  }, [_vm._v(\"未绑定\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.bindEmail\n    }\n  }, [_vm._v(\"绑定\")])], 1) : _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(\"已绑定电子邮箱: \" + _vm._s(_vm.email.data))]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.changeEmail\n    }\n  }, [_vm._v(\"更换\")])], 1), _vm._v(\" \"), _c('div', [_vm._v(\"绑定后，登录医线通平台可用该邮箱接收登录验证码。\")])])])])]), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"绑定\",\n      \"size\": \"tiny\"\n    },\n    model: {\n      value: (_vm.dialogBind.isShow),\n      callback: function($$v) {\n        _vm.dialogBind.isShow = $$v\n      },\n      expression: \"dialogBind.isShow\"\n    }\n  }, [_c('el-form', {\n    attrs: {\n      \"label-width\": \"80px\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": _vm.fetchParam.type == 'email' ? '电子邮箱' : '手机号码'\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"auto-complete\": \"off\",\n      \"placeholder\": _vm.fetchParam.type == 'email' ? '请输入邮箱地址' : '请输入手机号码'\n    },\n    model: {\n      value: (_vm.fetchParam.receiver),\n      callback: function($$v) {\n        _vm.fetchParam.receiver = $$v\n      },\n      expression: \"fetchParam.receiver\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"验证码\"\n    }\n  }, [_c('div', {\n    staticStyle: {\n      \"display\": \"inline-block\",\n      \"width\": \"56%\",\n      \"vertical-align\": \"top\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"输入验证码\"\n    },\n    model: {\n      value: (_vm.fetchParam.code),\n      callback: function($$v) {\n        _vm.fetchParam.code = $$v\n      },\n      expression: \"fetchParam.code\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\",\n      \"disabled\": _vm.dialogBind.validWait > 0\n    },\n    on: {\n      \"click\": _vm.sendBindValidCode\n    }\n  }, [(_vm.dialogBind.validWait <= 0) ? _c('i', [_vm._v(\"发送验证码\")]) : _c('i', [_vm._v(_vm._s(_vm.dialogBind.validWait) + \" 秒后重发\")])])], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"\"\n    }\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.bindFn\n    }\n  }, [_c('i', [_vm._v(\"确定\")])])], 1)], 1)], 1), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"更换绑定\",\n      \"size\": \"tiny\"\n    },\n    model: {\n      value: (_vm.dialogChange.isShow),\n      callback: function($$v) {\n        _vm.dialogChange.isShow = $$v\n      },\n      expression: \"dialogChange.isShow\"\n    }\n  }, [_c('el-form', {\n    attrs: {\n      \"label-width\": \"80px\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"验证方式\"\n    }\n  }, [_c('i', [_vm._v(_vm._s((_vm.fetchParam.type == 'email' ? '电子邮箱' : '手机号码') + ' (' + _vm.fetchParam.receiver + ')'))])]), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"验证码\"\n    }\n  }, [_c('div', {\n    staticStyle: {\n      \"display\": \"inline-block\",\n      \"width\": \"60%\",\n      \"vertical-align\": \"top\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"输入验证码\"\n    },\n    model: {\n      value: (_vm.fetchParam.code),\n      callback: function($$v) {\n        _vm.fetchParam.code = $$v\n      },\n      expression: \"fetchParam.code\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\",\n      \"disabled\": _vm.dialogBind.validWait > 0\n    },\n    on: {\n      \"click\": _vm.sendBindValidCode\n    }\n  }, [(_vm.dialogBind.validWait <= 0) ? _c('i', [_vm._v(\"发送验证码\")]) : _c('i', [_vm._v(_vm._s(_vm.dialogBind.validWait) + \" 秒后重发\")])])], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"\"\n    }\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.validCode\n    }\n  }, [_c('i', [_vm._v(\"确定\")])])], 1)], 1), _vm._v(\" \"), _c('span', {\n    slot: \"footer\"\n  }, [_vm._v(\"\\n            如果您已绑定\" + _vm._s(_vm.fetchParam.type == 'email' ? '电子邮箱' : '手机号码') + \"无法接收验证码，请联系我们：400-686-5262\\n        \")])], 1)], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 123:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(1093)\n\nvar Component = __webpack_require__(5)(\n  /* script */\n  __webpack_require__(840),\n  /* template */\n  __webpack_require__(1221),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 300:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(Promise) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__api__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_config__ = __webpack_require__(1);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar urlPre = __WEBPACK_IMPORTED_MODULE_1__utils_config__[\"a\" /* default */].apiHost + '/mine';\n\nvar MineService = function () {\n    function MineService() {\n        _classCallCheck(this, MineService);\n    }\n\n    _createClass(MineService, [{\n        key: 'updateProfile',\n\n        // 修改个人信息\n        // updateProfile({ name, address, sex }) {\n        //     let url = `${urlPre}/profile`\n        //     return api.post(url, { name, address, sex })\n        // }\n        value: function updateProfile(_ref) {\n            var id = _ref.id,\n                name = _ref.name,\n                sex = _ref.sex,\n                avatar = _ref.avatar,\n                address = _ref.address,\n                email = _ref.email;\n\n            var url = __WEBPACK_IMPORTED_MODULE_1__utils_config__[\"a\" /* default */].apiHost + '/admin/update/' + id;\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"a\" /* post */](url, { name: name, sex: sex, avatar: avatar, address: address, email: email });\n        }\n\n        // 上传头像\n\n    }, {\n        key: 'uploadAvatar',\n        value: function uploadAvatar(_ref2) {\n            var avatar = _ref2.avatar,\n                alias = _ref2.alias;\n\n            var url = urlPre + '/profile/avatar';\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"a\" /* post */](url, { avatar: avatar, alias: alias }).then(function (ret) {\n                if (ret.code) {\n                    return Promise.reject(ret);\n                } else {\n                    return ret;\n                }\n            });\n        }\n\n        // 获取公司信息接口\n\n    }, {\n        key: 'getCompanyInfo',\n        value: function getCompanyInfo() {\n            var url = urlPre + '/company';\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"b\" /* get */](url).then(function (ret) {\n                return ret.data.data;\n            });\n        }\n\n        // 修改公司信息\n\n    }, {\n        key: 'modifyCompany',\n        value: function modifyCompany(_ref3) {\n            var name = _ref3.name,\n                concact = _ref3.concact,\n                mobile = _ref3.mobile,\n                email = _ref3.email,\n                tel = _ref3.tel,\n                fax = _ref3.fax,\n                province = _ref3.province,\n                city = _ref3.city,\n                area = _ref3.area,\n                address = _ref3.address,\n                zip = _ref3.zip,\n                url = _ref3.url,\n                description = _ref3.description;\n\n            var finalUrl = urlPre + '/company';\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"a\" /* post */](finalUrl, {\n                name: name,\n                concact: concact,\n                mobile: mobile,\n                email: email,\n                tel: tel,\n                fax: fax,\n                province: province,\n                city: city,\n                area: area,\n                address: address,\n                zip: zip,\n                url: url,\n                description: description\n            }).then(function (ret) {\n                if (ret.code) {\n                    return Promise.reject(ret);\n                }\n            });\n        }\n\n        // // 修改密码\n        // modifyPassword({ origin_password, new_password, re_password }) {\n        //     let url = `${urlPre}/password`\n        //     return api.post(url, { origin_password, new_password, re_password }).then((ret) => {\n        //         if (ret.code) {\n        //             return Promise.reject(ret)\n        //         }\n        //     })\n        // }\n        // 更新 id, role_id, avatar, password, area_id, gov_id, name, nickname, mobile, email, sex, address\n\n    }, {\n        key: 'modifyPassword',\n        value: function modifyPassword(_ref4) {\n            var id = _ref4.id,\n                password = _ref4.password;\n\n            var url = __WEBPACK_IMPORTED_MODULE_1__utils_config__[\"a\" /* default */].apiHost + '/admin/update/' + id;\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"a\" /* post */](url, { password: password }).then(function (ret) {\n                if (ret.code) {\n                    return Promise.reject(ret);\n                }\n            });\n        }\n\n        // =========================二次登陆部分============\n\n    }, {\n        key: 'getSafeSetInfo',\n        value: function getSafeSetInfo() {\n            var url = urlPre + '/two-step/';\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"b\" /* get */](url).then(function (ret) {\n                return ret.data;\n            });\n        }\n\n        // 二次登陆绑定的微信登录参数\n\n    }, {\n        key: 'getWechatLoginConfig',\n        value: function getWechatLoginConfig() {\n            var url = urlPre + '/two-step/wechat';\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"b\" /* get */](url).then(function (ret) {\n                return ret.data.wechatConfig;\n            });\n        }\n\n        // 绑定邮箱或者手机\n\n    }, {\n        key: 'bindOrChangeTwo',\n        value: function bindOrChangeTwo(_ref5) {\n            var type = _ref5.type,\n                code = _ref5.code,\n                receiver = _ref5.receiver;\n\n            var url = urlPre + '/two-step/code/bind';\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"a\" /* post */](url, { type: type, code: code, receiver: receiver }).then(function (ret) {\n                return ret.data.userTwoStepAuthToken;\n            });\n        }\n\n        // 短信和邮箱验证码\n\n    }, {\n        key: 'sendTwoValidCode',\n        value: function sendTwoValidCode(_ref6) {\n            var type = _ref6.type,\n                receiver = _ref6.receiver;\n\n            var url = urlPre + '/two-step/code/send';\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"a\" /* post */](url, { type: type, receiver: receiver });\n        }\n\n        // 校验验证码\n\n    }, {\n        key: 'validTwoVliadCode',\n        value: function validTwoVliadCode(_ref7) {\n            var code = _ref7.code,\n                type = _ref7.type;\n\n            var url = urlPre + '/two-step/code/verify';\n            return __WEBPACK_IMPORTED_MODULE_0__api__[\"a\" /* post */](url, { code: code, type: type }).then(function (ret) {\n                return ret.data.userTwoStepAuthToken;\n            });\n        }\n    }]);\n\n    return MineService;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new MineService());\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(2)))\n\n/***/ }),\n\n/***/ 507:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(Promise) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_config__ = __webpack_require__(1);\n/**\n * Created by huanghuixin on 2017/4/13.\n */\n\n\nvar _currMsgListener = void 0;\nvar wechatSdk = {\n    // 初始化二维码\n    initLogin: function initLogin(wechatConfig) {\n        return new Promise(function (resolve, reject) {\n            if (window.WxLogin) {\n                resolve(true);\n                return;\n            }\n\n            var script = document.createElement('script');\n            script.src = '//res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js';\n            document.head.appendChild(script);\n            script.onload = function () {\n                resolve(true);\n            };\n        }).then(function () {\n            // mine/two-step/wechat/callback?verify=\n            wechatConfig = Object.assign({}, wechatConfig, {\n                style: 'white',\n                href: ''\n            });\n\n            wechatConfig.redirect_uri = encodeURIComponent(wechatConfig.redirect_uri);\n            return new window.WxLogin(wechatConfig);\n        }).catch(function (err) {\n            console.info('微信二维码初始化失败', err);\n        });\n    },\n    buildUrl: function buildUrl(_ref) {\n        var appid = _ref.appid,\n            scope = _ref.scope,\n            redirect_uri = _ref.redirect_uri,\n            state = _ref.state;\n\n        // config.debug && (redirect_uri = 'http://sys.yst.vodjk.com/mine/two-step/wechat/callback?verify=1')\n        return 'https://open.weixin.qq.com/connect/qrconnect?state=' + state + '&appid=' + appid + '&scope=' + scope + '&redirect_uri=' + encodeURIComponent(redirect_uri) + '&login_type=jssdk&style=white';\n    },\n    openWechatLogin: function openWechatLogin(_ref2, callback) {\n        var appid = _ref2.appid,\n            scope = _ref2.scope,\n            redirect_uri = _ref2.redirect_uri,\n            state = _ref2.state,\n            verify = _ref2.verify;\n\n        // 先移除事件\n        _currMsgListener && window.removeEventListener('message', _currMsgListener);\n\n        if (verify) redirect_uri = redirect_uri.replace('verify=', 'verify=' + verify);\n\n        // 打开登录tab\n        var tab = window.open(wechatSdk.buildUrl({ appid: appid, scope: scope, redirect_uri: redirect_uri, state: state }));\n        // 回调事件\n        _currMsgListener = function currMsgListener(e) {\n            callback(e.data);\n            tab.close();\n            window.removeEventListener('message', _currMsgListener);\n            tab = null;\n            _currMsgListener = null;\n        };\n        window.addEventListener('message', _currMsgListener, false);\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (wechatSdk);\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(2)))\n\n/***/ }),\n\n/***/ 840:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__services_base_mineService__ = __webpack_require__(300);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__vendor_wechatSdk__ = __webpack_require__(507);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_authUtils__ = __webpack_require__(3);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n//    import twoStepService from '../../services/twoStepService'\n\n\n\n\nfunction getFetchParam() {\n    return {\n        type: 'email',\n        code: '',\n        receiver: ''\n    };\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    data: function data() {\n        return {\n            email: {},\n            sms: {},\n            wechat: {},\n            wechatConfig: void 0,\n            fetchParam: getFetchParam(),\n            // 绑定的dialog\n            dialogBind: {\n                isShow: false,\n                validWait: 0 // 验证码等待\n            },\n            // 更换的dialog\n            dialogChange: {\n                isShow: false\n            }\n        };\n    },\n    created: function created() {\n        this.initData();\n        // 进入页面去掉自动刷新token 避免在初次设置的时候 跳转到登录\n        __WEBPACK_IMPORTED_MODULE_2__utils_authUtils__[\"a\" /* default */].clearAuthRefreshToken();\n    },\n    destroyed: function destroyed() {\n        // 离开页面时打\n        __WEBPACK_IMPORTED_MODULE_2__utils_authUtils__[\"a\" /* default */].authRefreshtoken();\n    },\n\n    methods: {\n        // 更换邮箱\n        changeEmail: function changeEmail() {\n            this.fetchParam.type = 'email';\n            this.fetchParam.code = '';\n            this.fetchParam.receiver = this.email.data;\n            this.dialogChange.isShow = true;\n        },\n\n        // 更换手机号\n        changeSms: function changeSms() {\n            this.fetchParam.type = 'sms';\n            this.fetchParam.code = '';\n            this.fetchParam.receiver = this.sms.data;\n            this.dialogChange.isShow = true;\n        },\n\n        // 绑定邮箱\n        bindEmail: function bindEmail() {\n            this.fetchParam = getFetchParam();\n            this.fetchParam.type = 'email';\n            this.dialogBind.isShow = true;\n        },\n\n        // 绑定手机号\n        bindSms: function bindSms() {\n            this.fetchParam = getFetchParam();\n            this.fetchParam.type = 'sms';\n            this.dialogBind.isShow = true;\n        },\n\n        // 绑定微信\n        bindWechat: function bindWechat() {\n            var _this = this;\n\n            __WEBPACK_IMPORTED_MODULE_1__vendor_wechatSdk__[\"a\" /* default */].openWechatLogin(this.wechatConfig, function (data) {\n                data = JSON.parse(data);\n                if (data.code == 0) {\n                    // 保存二次验证的token\n                    __WEBPACK_IMPORTED_MODULE_2__utils_authUtils__[\"a\" /* default */].setTwiceToken(data.data.adminTwoStepAuthToken);\n                    _this.initData();\n                    _this.$store.dispatch('setIndexNavMenu', { menu: __WEBPACK_IMPORTED_MODULE_2__utils_authUtils__[\"a\" /* default */].getNavMenu() }); // 获取菜单\n                    xmview.showTip('success', '操作成功', 5000);\n                } else {\n                    xmview.showTip('error', data.message);\n                }\n            });\n        },\n\n        // 更换微信绑定\n        changeWechat: function changeWechat() {\n            var _this2 = this;\n\n            var wechatConfig = Object.assign({}, this.wechatConfig, { verify: 'xm' });\n            __WEBPACK_IMPORTED_MODULE_1__vendor_wechatSdk__[\"a\" /* default */].openWechatLogin(wechatConfig, function (data) {\n                data = JSON.parse(data);\n                if (data.code == 0) {\n                    // 重新刷新绑定数据 如果message为空 则验证成功\n                    __WEBPACK_IMPORTED_MODULE_0__services_base_mineService__[\"a\" /* default */].getSafeSetInfo().then(function (ret) {\n                        if (!ret.message) {\n                            _this2.wechat = {};\n                            xmview.showTip('success', '操作成功!请重新绑定新的微信', 5000);\n                        } else {\n                            xmview.showTip('error', ret.message, 5000);\n                        }\n                    }).then(function () {\n                        __WEBPACK_IMPORTED_MODULE_0__services_base_mineService__[\"a\" /* default */].getWechatLoginConfig().then(function (ret) {\n                            _this2.wechatConfig = ret;\n                        });\n                    });\n                } else {\n                    xmview.showTip('error', data.message, 5000);\n                }\n            });\n        },\n\n        // 发送绑定的验证码\n        sendBindValidCode: function sendBindValidCode() {\n            var _this3 = this;\n\n            var fetchParam = {\n                type: this.fetchParam.type,\n                receiver: this.fetchParam.receiver.indexOf('***') > -1 ? '' : this.fetchParam.receiver\n            };\n            __WEBPACK_IMPORTED_MODULE_0__services_base_mineService__[\"a\" /* default */].sendTwoValidCode(fetchParam).then(function () {\n                xmview.showTip('success', '验证码发送成功,请注意查收');\n                _this3.dialogBind.validWait = 60;\n                var intervalId = setInterval(function () {\n                    --_this3.dialogBind.validWait <= 0 && clearInterval(intervalId);\n                }, 1000);\n            });\n        },\n\n        // 设置绑定 或者更换绑定\n        bindFn: function bindFn() {\n            var _this4 = this;\n\n            __WEBPACK_IMPORTED_MODULE_0__services_base_mineService__[\"a\" /* default */].bindOrChangeTwo(this.fetchParam).then(function (ret) {\n                __WEBPACK_IMPORTED_MODULE_2__utils_authUtils__[\"a\" /* default */].setTwiceToken(ret);\n                _this4[_this4.fetchParam.type] = { data: _this4.fetchParam.receiver };\n                _this4.dialogBind.isShow = false;\n                _this4.dialogChange.isShow = false;\n                _this4.$store.dispatch('setIndexNavMenu', { menu: __WEBPACK_IMPORTED_MODULE_2__utils_authUtils__[\"a\" /* default */].getNavMenu() }); // 获取菜单\n                xmview.showTip('success', '操作成功');\n            }).catch(function (err) {\n                console.info(err);\n            });\n        },\n\n        // 确认验证码\n        validCode: function validCode() {\n            var _this5 = this;\n\n            __WEBPACK_IMPORTED_MODULE_0__services_base_mineService__[\"a\" /* default */].validTwoVliadCode(this.fetchParam).then(function (ret) {\n                _this5.dialogBind.validWait = 0;\n                // 关掉解绑框  打开绑定框\n                _this5.dialogChange.isShow = false;\n                setTimeout(function () {\n                    _this5.dialogBind.isShow = true;\n                }, 500);\n                // 刷新绑定\n                _this5.fetchParam.code = '';\n                _this5.fetchParam.receiver = '';\n\n                __WEBPACK_IMPORTED_MODULE_2__utils_authUtils__[\"a\" /* default */].setTwiceToken(ret);\n            });\n        },\n        initData: function initData() {\n            var _this6 = this;\n\n            __WEBPACK_IMPORTED_MODULE_0__services_base_mineService__[\"a\" /* default */].getSafeSetInfo().then(function (ret) {\n                // 如果已经绑定\n                if (ret && ret.stepTypes) {\n                    ret.stepTypes.forEach(function (item) {\n                        if (item.type === 'sms') {\n                            _this6.sms = item;\n                            _this6.sms && (_this6.sms.data = processMobile(_this6.sms.data));\n                        } else if (item.type === 'email') {\n                            _this6.email = item;\n                            _this6.email && (_this6.email.data = processEmail(_this6.email.data));\n                        } else {\n                            _this6.wechat = item;\n                        }\n                    });\n                } else {\n                    // 如果没有任何绑定\n                    // 把菜单置空\n                    _this6.$store.dispatch('setIndexNavMenu', { menu: [] });\n                    // 干掉返回按钮\n                    xmview.setContentBack(false);\n                }\n                xmview.setContentLoading(false);\n            }).catch(function (err) {\n                console.info(err);\n            }).then(function () {\n                // 微信配置\n                __WEBPACK_IMPORTED_MODULE_0__services_base_mineService__[\"a\" /* default */].getWechatLoginConfig().then(function (ret) {\n                    _this6.wechatConfig = ret;\n                });\n            });\n        }\n    },\n    components: {}\n});\n\nfunction processEmail(str) {\n    if (!str) return str;\n    var first = str.split('@')[0];\n    return first[0] + '***' + first[first.length - 1] + '@' + str.split('@')[1];\n}\n\nfunction processMobile(mobile) {\n    if (!mobile) return;\n\n    return mobile.slice(0, 3) + '****' + mobile.slice(-4, mobile.length);\n}\n\n/***/ }),\n\n/***/ 984:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(112)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"#user-sefeset-container .el-card__header{background:#f8f8f8;padding:10px}#user-sefeset-container .content-container>section{font-size:13px;color:#333;margin-bottom:25px}#user-sefeset-container .content-container>section:last-of-type{margin-bottom:0}#user-sefeset-container .content-container>section>*{display:inline-block;vertical-align:top}#user-sefeset-container .content-container>section>i{padding-top:5px;width:7em;text-align:right}#user-sefeset-container .content-container>section>div{margin-left:20px}#user-sefeset-container .content-container>section>div>div{margin-top:5px;color:#666}\", \"\", {\"version\":3,\"sources\":[\"/Users/zhaoyicheng/Documents/Code/yxt/PC-old/sys_ui/assets/src/views/base/mine/SafeSet.vue\"],\"names\":[],\"mappings\":\"AACA,yCAAyC,mBAAmB,YAAY,CACvE,AACD,mDAAmD,eAAe,WAAW,kBAAkB,CAC9F,AACD,gEAAgE,eAAe,CAC9E,AACD,qDAAqD,qBAAqB,kBAAkB,CAC3F,AACD,qDAAqD,gBAAgB,UAAU,gBAAgB,CAC9F,AACD,uDAAuD,gBAAgB,CACtE,AACD,2DAA2D,eAAe,UAAU,CACnF\",\"file\":\"SafeSet.vue\",\"sourcesContent\":[\"\\n#user-sefeset-container .el-card__header{background:#f8f8f8;padding:10px\\n}\\n#user-sefeset-container .content-container>section{font-size:13px;color:#333;margin-bottom:25px\\n}\\n#user-sefeset-container .content-container>section:last-of-type{margin-bottom:0\\n}\\n#user-sefeset-container .content-container>section>*{display:inline-block;vertical-align:top\\n}\\n#user-sefeset-container .content-container>section>i{padding-top:5px;width:7em;text-align:right\\n}\\n#user-sefeset-container .content-container>section>div{margin-left:20px\\n}\\n#user-sefeset-container .content-container>section>div>div{margin-top:5px;color:#666\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/92.355243a128f3cb46746b.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/_css-loader@0.27.3@css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@11.1.4@vue-loader/lib/style-rewriter.js?{\\\"id\\\":\\\"data-v-265d8fad\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/_sass-loader@4.1.1@sass-loader/index.js?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@11.1.4@vue-loader/lib/selector.js?type=styles&index=0!./SafeSet.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/_vue-style-loader@2.0.5@vue-style-loader/lib/addStylesClient.js\")(\"587e8b29\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/_vue-style-loader@2.0.5@vue-style-loader!./~/_css-loader@0.27.3@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/_vue-loader@11.1.4@vue-loader/lib/style-rewriter.js?{\"id\":\"data-v-265d8fad\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_sass-loader@4.1.1@sass-loader?{\"sourceMap\":true}!./~/_vue-loader@11.1.4@vue-loader/lib/selector.js?type=styles&index=0!./src/views/base/mine/SafeSet.vue\n// module id = 1093\n// module chunks = 92","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('article', {\n    attrs: {\n      \"id\": \"user-sefeset-container\"\n    }\n  }, [_c('el-card', {\n    staticClass: \"box-card\"\n  }, [_c('div', {\n    staticClass: \"clearfix\",\n    slot: \"header\"\n  }, [_c('span', [_vm._v(\"二次验证\")])]), _vm._v(\" \"), _c('article', {\n    staticClass: \"content-container\"\n  }, [_c('section', [_c('i', [_c('el-tag', {\n    attrs: {\n      \"type\": \"danger\"\n    }\n  }, [_vm._v(\"推荐\")]), _vm._v(\"\\n                    微信:\")], 1), _vm._v(\" \"), _c('div', [(!_vm.wechat || !_vm.wechat.data) ? _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"gray\"\n    }\n  }, [_vm._v(\"未绑定\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.bindWechat\n    }\n  }, [_vm._v(\"绑定\")])], 1) : _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(\"已绑定微信号: \" + _vm._s(_vm.wechat.data))]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.changeWechat\n    }\n  }, [_vm._v(\"更换\")])], 1), _vm._v(\" \"), _c('div', [_vm._v(\"绑定后，登录医线通平台可用绑定微信账号扫码进行安全验证。\")])])]), _vm._v(\" \"), _c('section', [_c('i', [_vm._v(\"手机号码:\")]), _vm._v(\" \"), _c('div', [(!_vm.sms || !_vm.sms.data) ? _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"gray\"\n    }\n  }, [_vm._v(\"未绑定\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.bindSms\n    }\n  }, [_vm._v(\"绑定\")])], 1) : _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(\"已绑定手机号码: \" + _vm._s(_vm.sms.data))]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.changeSms\n    }\n  }, [_vm._v(\"更换\")])], 1), _vm._v(\" \"), _c('div', [_vm._v(\"绑定后，登录医线通平台用该手机号码接收登录验证码。\")])])]), _vm._v(\" \"), _c('section', [_c('i', [_vm._v(\"电子邮件:\")]), _vm._v(\" \"), _c('div', [(!_vm.email || !_vm.email.data) ? _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"gray\"\n    }\n  }, [_vm._v(\"未绑定\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.bindEmail\n    }\n  }, [_vm._v(\"绑定\")])], 1) : _c('span', [_c('el-tag', {\n    attrs: {\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(\"已绑定电子邮箱: \" + _vm._s(_vm.email.data))]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"click\": _vm.changeEmail\n    }\n  }, [_vm._v(\"更换\")])], 1), _vm._v(\" \"), _c('div', [_vm._v(\"绑定后，登录医线通平台可用该邮箱接收登录验证码。\")])])])])]), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"绑定\",\n      \"size\": \"tiny\"\n    },\n    model: {\n      value: (_vm.dialogBind.isShow),\n      callback: function($$v) {\n        _vm.dialogBind.isShow = $$v\n      },\n      expression: \"dialogBind.isShow\"\n    }\n  }, [_c('el-form', {\n    attrs: {\n      \"label-width\": \"80px\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": _vm.fetchParam.type == 'email' ? '电子邮箱' : '手机号码'\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"auto-complete\": \"off\",\n      \"placeholder\": _vm.fetchParam.type == 'email' ? '请输入邮箱地址' : '请输入手机号码'\n    },\n    model: {\n      value: (_vm.fetchParam.receiver),\n      callback: function($$v) {\n        _vm.fetchParam.receiver = $$v\n      },\n      expression: \"fetchParam.receiver\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"验证码\"\n    }\n  }, [_c('div', {\n    staticStyle: {\n      \"display\": \"inline-block\",\n      \"width\": \"56%\",\n      \"vertical-align\": \"top\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"输入验证码\"\n    },\n    model: {\n      value: (_vm.fetchParam.code),\n      callback: function($$v) {\n        _vm.fetchParam.code = $$v\n      },\n      expression: \"fetchParam.code\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\",\n      \"disabled\": _vm.dialogBind.validWait > 0\n    },\n    on: {\n      \"click\": _vm.sendBindValidCode\n    }\n  }, [(_vm.dialogBind.validWait <= 0) ? _c('i', [_vm._v(\"发送验证码\")]) : _c('i', [_vm._v(_vm._s(_vm.dialogBind.validWait) + \" 秒后重发\")])])], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"\"\n    }\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.bindFn\n    }\n  }, [_c('i', [_vm._v(\"确定\")])])], 1)], 1)], 1), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"更换绑定\",\n      \"size\": \"tiny\"\n    },\n    model: {\n      value: (_vm.dialogChange.isShow),\n      callback: function($$v) {\n        _vm.dialogChange.isShow = $$v\n      },\n      expression: \"dialogChange.isShow\"\n    }\n  }, [_c('el-form', {\n    attrs: {\n      \"label-width\": \"80px\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"验证方式\"\n    }\n  }, [_c('i', [_vm._v(_vm._s((_vm.fetchParam.type == 'email' ? '电子邮箱' : '手机号码') + ' (' + _vm.fetchParam.receiver + ')'))])]), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"验证码\"\n    }\n  }, [_c('div', {\n    staticStyle: {\n      \"display\": \"inline-block\",\n      \"width\": \"60%\",\n      \"vertical-align\": \"top\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"输入验证码\"\n    },\n    model: {\n      value: (_vm.fetchParam.code),\n      callback: function($$v) {\n        _vm.fetchParam.code = $$v\n      },\n      expression: \"fetchParam.code\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\",\n      \"disabled\": _vm.dialogBind.validWait > 0\n    },\n    on: {\n      \"click\": _vm.sendBindValidCode\n    }\n  }, [(_vm.dialogBind.validWait <= 0) ? _c('i', [_vm._v(\"发送验证码\")]) : _c('i', [_vm._v(_vm._s(_vm.dialogBind.validWait) + \" 秒后重发\")])])], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"\"\n    }\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.validCode\n    }\n  }, [_c('i', [_vm._v(\"确定\")])])], 1)], 1), _vm._v(\" \"), _c('span', {\n    slot: \"footer\"\n  }, [_vm._v(\"\\n            如果您已绑定\" + _vm._s(_vm.fetchParam.type == 'email' ? '电子邮箱' : '手机号码') + \"无法接收验证码，请联系我们：400-686-5262\\n        \")])], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.1.4@vue-loader/lib/template-compiler.js?{\"id\":\"data-v-265d8fad\"}!./~/_vue-loader@11.1.4@vue-loader/lib/selector.js?type=template&index=0!./src/views/base/mine/SafeSet.vue\n// module id = 1221\n// module chunks = 92","\n/* styles */\nrequire(\"!!../../../../node_modules/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@11.1.4@vue-loader/lib/style-rewriter?{\\\"id\\\":\\\"data-v-265d8fad\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@11.1.4@vue-loader/lib/selector?type=styles&index=0!./SafeSet.vue\")\n\nvar Component = require(\"!../../../../node_modules/_vue-loader@11.1.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../node_modules/_vue-loader@11.1.4@vue-loader/lib/selector?type=script&index=0!./SafeSet.vue\"),\n  /* template */\n  require(\"!!../../../../node_modules/_vue-loader@11.1.4@vue-loader/lib/template-compiler?{\\\"id\\\":\\\"data-v-265d8fad\\\"}!../../../../node_modules/_vue-loader@11.1.4@vue-loader/lib/selector?type=template&index=0!./SafeSet.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/base/mine/SafeSet.vue\n// module id = 123\n// module chunks = 92","import * as api from '../api'\nimport config from '../../utils/config'\n\nconst urlPre = config.apiHost + '/mine'\nclass MineService {\n    // 修改个人信息\n    // updateProfile({ name, address, sex }) {\n    //     let url = `${urlPre}/profile`\n    //     return api.post(url, { name, address, sex })\n    // }\n    updateProfile({ id, name,sex, avatar, address, email}) {\n        let url = `${config.apiHost}/admin/update/${id}`\n        return api.post(url, { name, sex, avatar, address, email})\n    }\n\n    // 上传头像\n    uploadAvatar({ avatar, alias }) {\n        let url = `${urlPre}/profile/avatar`\n        return api.post(url, { avatar, alias }).then((ret) => {\n            if (ret.code) {\n                return Promise.reject(ret)\n            } else {\n                return ret\n            }\n        })\n    }\n\n    // 获取公司信息接口\n    getCompanyInfo() {\n        let url = `${urlPre}/company`\n        return api.get(url).then((ret) => {\n            return ret.data.data\n        })\n    }\n\n    // 修改公司信息\n    modifyCompany({ name, concact, mobile, email, tel, fax, province, city, area, address, zip, url, description }) {\n        let finalUrl = `${urlPre}/company`\n        return api.post(finalUrl, {\n            name,\n            concact,\n            mobile,\n            email,\n            tel,\n            fax,\n            province,\n            city,\n            area,\n            address,\n            zip,\n            url,\n            description\n        }).then((ret) => {\n            if (ret.code) {\n                return Promise.reject(ret)\n            }\n        })\n    }\n\n    // // 修改密码\n    // modifyPassword({ origin_password, new_password, re_password }) {\n    //     let url = `${urlPre}/password`\n    //     return api.post(url, { origin_password, new_password, re_password }).then((ret) => {\n    //         if (ret.code) {\n    //             return Promise.reject(ret)\n    //         }\n    //     })\n    // }\n    // 更新 id, role_id, avatar, password, area_id, gov_id, name, nickname, mobile, email, sex, address\n    modifyPassword({ id, password }) {\n        let url = `${config.apiHost}/admin/update/${id}`\n        return api.post(url, { password }).then(ret => {\n            if (ret.code) {\n                return Promise.reject(ret)\n            }\n        })\n    }\n\n\n    // =========================二次登陆部分============\n    getSafeSetInfo() {\n        let url = `${urlPre}/two-step/`\n        return api.get(url).then(ret => {\n            return ret.data\n        })\n    }\n\n    // 二次登陆绑定的微信登录参数\n    getWechatLoginConfig() {\n        let url = `${urlPre}/two-step/wechat`\n        return api.get(url).then(ret => {\n            return ret.data.wechatConfig\n        })\n    }\n\n    // 绑定邮箱或者手机\n    bindOrChangeTwo({ type, code, receiver }) {\n        let url = `${urlPre}/two-step/code/bind`\n        return api.post(url, { type, code, receiver }).then((ret) => {\n            return ret.data.userTwoStepAuthToken\n        })\n    }\n\n    // 短信和邮箱验证码\n    sendTwoValidCode({ type, receiver }) {\n        let url = `${urlPre}/two-step/code/send`\n        return api.post(url, { type, receiver })\n    }\n\n    // 校验验证码\n    validTwoVliadCode({ code, type }) {\n        let url = `${urlPre}/two-step/code/verify`\n        return api.post(url, { code, type }).then((ret) => {\n            return ret.data.userTwoStepAuthToken\n        })\n    }\n}\n\nexport default new MineService()\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/base/mineService.js","/**\n * Created by huanghuixin on 2017/4/13.\n */\n\nimport config from '../utils/config'\nlet currMsgListener = void 0\nlet wechatSdk = {\n    // 初始化二维码\n    initLogin (wechatConfig) {\n        return new Promise((resolve, reject) => {\n            if (window.WxLogin) {\n                resolve(true)\n                return\n            }\n\n            let script = document.createElement('script')\n            script.src = '//res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js'\n            document.head.appendChild(script)\n            script.onload = function () {\n                resolve(true)\n            }\n        }).then(() => {\n            // mine/two-step/wechat/callback?verify=\n            wechatConfig = Object.assign({}, wechatConfig, {\n                style: 'white',\n                href: ''\n            })\n\n            wechatConfig.redirect_uri = encodeURIComponent(wechatConfig.redirect_uri)\n            return new window.WxLogin(wechatConfig)\n        }).catch(err => {\n            console.info('微信二维码初始化失败', err)\n        })\n    },\n\n    buildUrl ({appid, scope, redirect_uri, state}) {\n        // config.debug && (redirect_uri = 'http://sys.yst.vodjk.com/mine/two-step/wechat/callback?verify=1')\n        return `https://open.weixin.qq.com/connect/qrconnect?state=${state}&appid=${appid}&scope=${scope}&redirect_uri=${encodeURIComponent(redirect_uri)}&login_type=jssdk&style=white`\n    },\n\n    openWechatLogin ({appid, scope, redirect_uri, state, verify}, callback) {\n        // 先移除事件\n        currMsgListener && window.removeEventListener('message', currMsgListener)\n\n        if (verify)\n            redirect_uri = redirect_uri.replace('verify=', 'verify=' + verify)\n\n        // 打开登录tab\n        let tab = window.open(wechatSdk.buildUrl({appid, scope, redirect_uri, state}))\n        // 回调事件\n        currMsgListener = (e) => {\n            callback(e.data)\n            tab.close()\n            window.removeEventListener('message', currMsgListener)\n            tab = null\n            currMsgListener = null\n        }\n        window.addEventListener('message', currMsgListener, false)\n    }\n}\n\nexport default wechatSdk\n\n\n// WEBPACK FOOTER //\n// ./src/vendor/wechatSdk.js","<!--安全设置-->\n<style lang='scss' rel='stylesheet/scss'>\n    #user-sefeset-container {\n        .el-card__header {\n            background: #f8f8f8;\n            padding: 10px;\n        }\n\n        .content-container {\n            > section {\n                font-size: 13px;\n                color: #333;\n                margin-bottom: 25px;\n                &:last-of-type {\n                    margin-bottom: 0;\n                }\n\n                > * {\n                    display: inline-block;\n                    vertical-align: top;\n                }\n\n                > i {\n                    padding-top: 5px;\n                    width: 7em;\n                    text-align: right;\n                }\n                > div {\n                    margin-left: 20px;\n                    > div {\n                        margin-top: 5px;\n                        color: #666;\n                    }\n                }\n            }\n        }\n    }\n</style>\n\n<template>\n    <article id=\"user-sefeset-container\">\n        <el-card class=\"box-card\">\n            <div slot=\"header\" class=\"clearfix\">\n                <span>二次验证</span>\n            </div>\n            <article class=\"content-container\">\n                <section>\n                    <i>\n                        <el-tag type=\"danger\">推荐</el-tag>\n                        微信:</i>\n                    <div>\n                        <span v-if=\"!wechat || !wechat.data\">\n                            <el-tag type=\"gray\">未绑定</el-tag>\n                            <el-button type=\"text\" @click=\"bindWechat\">绑定</el-button>\n                        </span>\n                        <span v-else>\n                            <el-tag type=\"primary\">已绑定微信号: {{wechat.data}}</el-tag>\n                            <el-button type=\"text\" @click=\"changeWechat\">更换</el-button>\n                        </span>\n                        <div>绑定后，登录医线通平台可用绑定微信账号扫码进行安全验证。</div>\n                    </div>\n                </section>\n                <section>\n                    <i>手机号码:</i>\n                    <div>\n                        <span v-if=\"!sms || !sms.data\">\n                            <el-tag type=\"gray\">未绑定</el-tag>\n                            <el-button type=\"text\" @click=\"bindSms\">绑定</el-button>\n                        </span>\n                        <span v-else>\n                            <el-tag type=\"primary\">已绑定手机号码: {{sms.data}}</el-tag>\n                            <el-button type=\"text\" @click=\"changeSms\">更换</el-button>\n                        </span>\n                        <div>绑定后，登录医线通平台用该手机号码接收登录验证码。</div>\n                    </div>\n                </section>\n                <section>\n                    <i>电子邮件:</i>\n                    <div>\n                        <span v-if=\"!email || !email.data\">\n                            <el-tag type=\"gray\">未绑定</el-tag>\n                            <el-button type=\"text\" @click=\"bindEmail\">绑定</el-button>\n                        </span>\n                        <span v-else>\n                            <el-tag type=\"primary\">已绑定电子邮箱: {{email.data}}</el-tag>\n                            <el-button type=\"text\" @click=\"changeEmail\">更换</el-button>\n                        </span>\n                        <div>绑定后，登录医线通平台可用该邮箱接收登录验证码。</div>\n                    </div>\n                </section>\n            </article>\n        </el-card>\n\n        <el-dialog title=\"绑定\" v-model=\"dialogBind.isShow\" size=\"tiny\">\n            <el-form label-width=\"80px\">\n                <el-form-item :label=\"fetchParam.type == 'email' ? '电子邮箱' : '手机号码'\">\n                    <el-input v-model=\"fetchParam.receiver\" auto-complete=\"off\"\n                              :placeholder=\"fetchParam.type == 'email' ? '请输入邮箱地址' : '请输入手机号码'\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"验证码\">\n                    <div style=\"display: inline-block;width: 56%;vertical-align: top\">\n                        <el-input v-model=\"fetchParam.code\" placeholder=\"输入验证码\"></el-input>\n                    </div>\n                    <el-button type=\"primary\" @click=\"sendBindValidCode\" :disabled=\"dialogBind.validWait > 0\">\n                        <i v-if=\"dialogBind.validWait <= 0\">发送验证码</i>\n                        <i v-else>{{dialogBind.validWait}} 秒后重发</i>\n                    </el-button>\n                </el-form-item>\n                <el-form-item label=\"\">\n                    <el-button @click=\"bindFn\" type=\"primary\">\n                        <i>确定</i>\n                    </el-button>\n                </el-form-item>\n            </el-form>\n        </el-dialog>\n\n        <el-dialog title=\"更换绑定\" v-model=\"dialogChange.isShow\" size=\"tiny\">\n            <el-form label-width=\"80px\">\n                <el-form-item label=\"验证方式\">\n                    <i>{{(fetchParam.type == 'email' ? '电子邮箱' : '手机号码') + ' (' + fetchParam.receiver + ')'}}</i>\n                </el-form-item>\n                <el-form-item label=\"验证码\">\n                    <div style=\"display: inline-block;width: 60%;vertical-align: top\">\n                        <el-input v-model=\"fetchParam.code\" placeholder=\"输入验证码\"></el-input>\n                    </div>\n                    <el-button type=\"primary\" @click=\"sendBindValidCode\" :disabled=\"dialogBind.validWait > 0\">\n                        <i v-if=\"dialogBind.validWait <= 0\">发送验证码</i>\n                        <i v-else>{{dialogBind.validWait}} 秒后重发</i>\n                    </el-button>\n                </el-form-item>\n                <el-form-item label=\"\">\n                    <el-button @click=\"validCode\" type=\"primary\">\n                        <i>确定</i>\n                    </el-button>\n                </el-form-item>\n            </el-form>\n            <span slot=\"footer\">\n                如果您已绑定{{fetchParam.type == 'email' ? '电子邮箱' : '手机号码'}}无法接收验证码，请联系我们：400-686-5262\n            </span>\n        </el-dialog>\n    </article>\n</template>\n\n<script>\n    //    import twoStepService from '../../services/twoStepService'\n    import mineService from '../../../services/base/mineService'\n    import wechatSdk from '../../../vendor/wechatSdk'\n    import authUtils from '../../../utils/authUtils'\n\n    function getFetchParam () {\n        return {\n            type: 'email',\n            code: '',\n            receiver: ''\n        }\n    }\n    export default {\n        data () {\n            return {\n                email: {},\n                sms: {},\n                wechat: {},\n                wechatConfig: void 0,\n                fetchParam: getFetchParam(),\n                // 绑定的dialog\n                dialogBind: {\n                    isShow: false,\n                    validWait: 0, // 验证码等待\n                },\n                // 更换的dialog\n                dialogChange: {\n                    isShow: false,\n                }\n            }\n        },\n        created () {\n            this.initData()\n            // 进入页面去掉自动刷新token 避免在初次设置的时候 跳转到登录\n            authUtils.clearAuthRefreshToken()\n        },\n        destroyed () {\n            // 离开页面时打\n            authUtils.authRefreshtoken()\n        },\n        methods: {\n            // 更换邮箱\n            changeEmail () {\n                this.fetchParam.type = 'email'\n                this.fetchParam.code = ''\n                this.fetchParam.receiver = this.email.data\n                this.dialogChange.isShow = true\n            },\n            // 更换手机号\n            changeSms () {\n                this.fetchParam.type = 'sms'\n                this.fetchParam.code = ''\n                this.fetchParam.receiver = this.sms.data\n                this.dialogChange.isShow = true\n            },\n            // 绑定邮箱\n            bindEmail () {\n                this.fetchParam = getFetchParam()\n                this.fetchParam.type = 'email'\n                this.dialogBind.isShow = true\n            },\n            // 绑定手机号\n            bindSms () {\n                this.fetchParam = getFetchParam()\n                this.fetchParam.type = 'sms'\n                this.dialogBind.isShow = true\n            },\n            // 绑定微信\n            bindWechat () {\n                wechatSdk.openWechatLogin(this.wechatConfig, (data) => {\n                    data = JSON.parse(data)\n                    if (data.code == 0) {\n                        // 保存二次验证的token\n                        authUtils.setTwiceToken(data.data.adminTwoStepAuthToken)\n                        this.initData()\n                        this.$store.dispatch('setIndexNavMenu', {menu: authUtils.getNavMenu()}) // 获取菜单\n                        xmview.showTip('success', '操作成功', 5000)\n                    } else {\n                        xmview.showTip('error', data.message)\n                    }\n                })\n            },\n            // 更换微信绑定\n            changeWechat () {\n                let wechatConfig = Object.assign({}, this.wechatConfig, {verify: 'xm'})\n                wechatSdk.openWechatLogin(wechatConfig, (data) => {\n                    data = JSON.parse(data)\n                    if (data.code == 0) {\n                        // 重新刷新绑定数据 如果message为空 则验证成功\n                        mineService.getSafeSetInfo().then((ret) => {\n                            if (!ret.message) {\n                                this.wechat = {}\n                                xmview.showTip('success', '操作成功!请重新绑定新的微信', 5000)\n                            } else {\n                                xmview.showTip('error', ret.message, 5000)\n                            }\n                        }).then(() => {\n                            mineService.getWechatLoginConfig().then((ret) => {\n                                this.wechatConfig = ret\n                            })\n                        })\n                    } else {\n                        xmview.showTip('error', data.message, 5000)\n                    }\n                })\n            },\n            // 发送绑定的验证码\n            sendBindValidCode () {\n                let fetchParam = {\n                    type: this.fetchParam.type,\n                    receiver: this.fetchParam.receiver.indexOf('***') > -1 ? '' : this.fetchParam.receiver\n                }\n                mineService.sendTwoValidCode(fetchParam).then(() => {\n                    xmview.showTip('success', '验证码发送成功,请注意查收')\n                    this.dialogBind.validWait = 60\n                    let intervalId = setInterval(() => {\n                        --this.dialogBind.validWait <= 0 && clearInterval(intervalId)\n                    }, 1000)\n                })\n            },\n            // 设置绑定 或者更换绑定\n            bindFn () {\n                mineService.bindOrChangeTwo(this.fetchParam).then((ret) => {\n                    authUtils.setTwiceToken(ret)\n                    this[this.fetchParam.type] = {data: this.fetchParam.receiver}\n                    this.dialogBind.isShow = false\n                    this.dialogChange.isShow = false\n                    this.$store.dispatch('setIndexNavMenu', {menu: authUtils.getNavMenu()}) // 获取菜单\n                    xmview.showTip('success', '操作成功')\n                }).catch((err) => {\n                    console.info(err)\n                })\n            },\n            // 确认验证码\n            validCode () {\n                mineService.validTwoVliadCode(this.fetchParam).then((ret) => {\n                    this.dialogBind.validWait = 0\n                    // 关掉解绑框  打开绑定框\n                    this.dialogChange.isShow = false\n                    setTimeout(() => {\n                        this.dialogBind.isShow = true\n                    }, 500)\n                    // 刷新绑定\n                    this.fetchParam.code = ''\n                    this.fetchParam.receiver = ''\n\n                    authUtils.setTwiceToken(ret)\n                })\n            },\n            initData () {\n                mineService.getSafeSetInfo().then((ret) => {\n                    // 如果已经绑定\n                    if (ret && ret.stepTypes) {\n                        ret.stepTypes.forEach((item) => {\n                            if (item.type === 'sms') {\n                                this.sms = item\n                                this.sms && (this.sms.data = processMobile(this.sms.data))\n                            } else if (item.type === 'email') {\n                                this.email = item\n                                this.email && (this.email.data = processEmail(this.email.data))\n                            } else {\n                                this.wechat = item\n                            }\n                        })\n                    } else { // 如果没有任何绑定\n                        // 把菜单置空\n                        this.$store.dispatch('setIndexNavMenu', {menu: []})\n                        // 干掉返回按钮\n                        xmview.setContentBack(false)\n                    }\n                    xmview.setContentLoading(false)\n                }).catch((err) => {\n                    console.info(err)\n                }).then(() => {\n                    // 微信配置\n                    mineService.getWechatLoginConfig().then((ret) => {\n                        this.wechatConfig = ret\n                    })\n                })\n            }\n        },\n        components: {}\n    }\n\n    function processEmail (str) {\n        if (!str) return str\n        let first = str.split('@')[0]\n        return `${first[0]}***${first[first.length - 1]}@${str.split('@')[1]}`\n    }\n\n    function processMobile (mobile) {\n        if (!mobile) return\n\n        return `${mobile.slice(0, 3)}****${mobile.slice(-4, mobile.length)}`\n    }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// SafeSet.vue?7eab6368","exports = module.exports = require(\"../../../../node_modules/_css-loader@0.27.3@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"#user-sefeset-container .el-card__header{background:#f8f8f8;padding:10px}#user-sefeset-container .content-container>section{font-size:13px;color:#333;margin-bottom:25px}#user-sefeset-container .content-container>section:last-of-type{margin-bottom:0}#user-sefeset-container .content-container>section>*{display:inline-block;vertical-align:top}#user-sefeset-container .content-container>section>i{padding-top:5px;width:7em;text-align:right}#user-sefeset-container .content-container>section>div{margin-left:20px}#user-sefeset-container .content-container>section>div>div{margin-top:5px;color:#666}\", \"\", {\"version\":3,\"sources\":[\"/Users/zhaoyicheng/Documents/Code/yxt/PC-old/sys_ui/assets/src/views/base/mine/SafeSet.vue\"],\"names\":[],\"mappings\":\"AACA,yCAAyC,mBAAmB,YAAY,CACvE,AACD,mDAAmD,eAAe,WAAW,kBAAkB,CAC9F,AACD,gEAAgE,eAAe,CAC9E,AACD,qDAAqD,qBAAqB,kBAAkB,CAC3F,AACD,qDAAqD,gBAAgB,UAAU,gBAAgB,CAC9F,AACD,uDAAuD,gBAAgB,CACtE,AACD,2DAA2D,eAAe,UAAU,CACnF\",\"file\":\"SafeSet.vue\",\"sourcesContent\":[\"\\n#user-sefeset-container .el-card__header{background:#f8f8f8;padding:10px\\n}\\n#user-sefeset-container .content-container>section{font-size:13px;color:#333;margin-bottom:25px\\n}\\n#user-sefeset-container .content-container>section:last-of-type{margin-bottom:0\\n}\\n#user-sefeset-container .content-container>section>*{display:inline-block;vertical-align:top\\n}\\n#user-sefeset-container .content-container>section>i{padding-top:5px;width:7em;text-align:right\\n}\\n#user-sefeset-container .content-container>section>div{margin-left:20px\\n}\\n#user-sefeset-container .content-container>section>div>div{margin-top:5px;color:#666\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.27.3@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/_vue-loader@11.1.4@vue-loader/lib/style-rewriter.js?{\"id\":\"data-v-265d8fad\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_sass-loader@4.1.1@sass-loader?{\"sourceMap\":true}!./~/_vue-loader@11.1.4@vue-loader/lib/selector.js?type=styles&index=0!./src/views/base/mine/SafeSet.vue\n// module id = 984\n// module chunks = 92"],"sourceRoot":""}