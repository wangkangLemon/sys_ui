webpackJsonp([9],{1039:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{attrs:{id:"sys-form"}},[a("section",{staticClass:"upload-avatar"},[a("div",{staticClass:"img-container"},[a("img",{attrs:{src:e.imgUrl}})])]),e._v(" "),a("section",{staticClass:"submit-form"},[a("el-form",{ref:"form",attrs:{"label-width":"120px",model:e.fetchParam,rules:e.rules}},[a("el-form-item",{attrs:{label:"菜单名称",prop:"menu_name"}},[a("el-input",{model:{value:e.fetchParam.menu_name,callback:function(t){e.fetchParam.menu_name=t},expression:"fetchParam.menu_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单标识",prop:"menu_node"}},[a("el-input",{model:{value:e.fetchParam.menu_node,callback:function(t){e.fetchParam.menu_node=t},expression:"fetchParam.menu_node"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"父级名称",prop:"pid","fetch-suggestions":e.querySearch}},[a("el-select",{attrs:{placeholder:"请输入父级名称"},model:{value:e.fetchParam.pid,callback:function(t){e.fetchParam.pid=t},expression:"fetchParam.pid"}},e._l(e.drop_list,function(e){return a("el-option",{key:e.id,attrs:{label:e.id+e.menu_name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"所属栏目",prop:"pid"}},[a("MultTreeCategory",{attrs:{placeholder:e.fetchParam.parent_name,autoClear:!0,showNotCat:!1,reqFun:e.reqFun},model:{value:e.fetchParam.pid,callback:function(t){e.fetchParam.pid=t},expression:"fetchParam.pid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序字段",prop:"sort"}},[a("el-input",{model:{value:e.fetchParam.sort,callback:function(t){e.fetchParam.sort=t},expression:"fetchParam.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{model:{value:e.fetchParam.remark,callback:function(t){e.fetchParam.remark=t},expression:"fetchParam.remark"}})],1),e._v(" "),this.$route.params.sys_type?a("el-form-item",{attrs:{label:""}},[a("el-button",{on:{click:function(t){e.$router.push({name:"sys-index"})}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.btnNextClick}},[e._v("确认")])],1):e._e()],1)],1)])},staticRenderFns:[]}},166:function(e,t,a){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=a(6),o=a(3),i=a(1),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=i.a.apiHost+"/course",c=function(){function t(){r(this,t)}return s(t,[{key:"getCategoryTree",value:function(e){var t=e.id,a=void 0===t?"tree":t,r=e.type,o=e.filter,i=void 0===o||o,s=e.pid,c=void 0===s?-1:s,l=e.level,d=void 0===l?-1:l,m=e.pagesize,p=void 0===m?-1:m,f=u+"/category/lists";return n.b(f,{id:a,filter:i,type:r,pid:c,level:d,pagesize:p}).then(function(e){return e})}},{key:"search_cate",value:function(t){var a=t.id,r=t.name,o=t.category_type,i=t.pid,s=t.level,c=t.ended,l=t.disabled,d=t.page,m=t.pagesize,p=u+"/category/lists";return n.b(p,{id:a,name:r,category_type:o,pid:i,level:s,ended:c,disabled:l,page:d,pagesize:m},!1).then(function(t){return 0==t.code?t:e.reject(t)})}},{key:"create_cate",value:function(t){var a=t.name,r=t.sort,o=t.sort_type,i=t.category_type,s=t.pid,c=t.ended,l=t.image,d=t.category_subject_num,m=t.course_sort,p={name:a,sort:r,sort_type:o,category_type:i,pid:s,ended:c,image:l,category_subject_num:d,course_sort:m};0===s&&delete p.pid;var f=u+"/category/create";return n.a(f,p).then(function(t){return 0==t.code?(xmview.showTip("success",t.message),t.data):(xmview.showTip("error",t.message),e.reject(t))})}},{key:"update_cate",value:function(t){var a=t.id,r=t.name,o=t.image,i=t.category_type,s=t.sort,c=t.sort_type,l=t.ended,d=t.disabled,m=t.pid,p=t.category_subject_num,f=t.course_sort,v=u+"/category/edit/"+a;return n.a(v,{name:r,image:o,category_type:i,sort:s,sort_type:c,ended:l,disabled:d,pid:m,category_subject_num:p,course_sort:f}).then(function(t){if(t.code)return e.reject(t)})}},{key:"updateCategory",value:function(e){var t=e.govid,a=e.type,r=e.name,s=e.image,u=e.sort,c=e.id;t=t||o.a.getUserInfo().company_id;var l=i.a.apiHost+"/com/"+t+"/course/category/"+c;return n.a(l,{type:a,name:r,image:s,sort:u})}},{key:"moveCategory",value:function(e){var t=e.id,a=e.to,r=i.a.apiHost+"/course/category/"+t+"/move";return n.a(r,{to:a})}},{key:"moveCategoryContent",value:function(e){var t=e.id,a=e.to,r=i.a.apiHost+"/course/category/"+t+"/move/content";return n.a(r,{to:a})}},{key:"getUploadCategoryImgUrl",value:function(){return i.a.apiHost+"/common/upload/file"}},{key:"delete_cate",value:function(t){var a=u+"/category/delete/"+t;return n.a(a,{}).then(function(t){return 0==t.code?(xmview.showTip("success",t.message),t.data):(xmview.showTip("error",t.message),e.reject(t))})}},{key:"courseList",value:function(e,t,a){var r=u+"/search/name";return n.b(r,{keyword:e,page:t,pagesize:a}).then(function(e){return e.data})}},{key:"getPublicCourselist",value:function(t){var a=t.course_name,r=void 0===a?"":a,o=t.status,i=t.category_id,s=t.need_testing,c=t.create_start,l=t.create_end,d=t.page,m=t.pagesize,p=u+"/lists";return n.b(p,{course_name:r,status:o,category_id:i,need_testing:s,create_start:c,create_end:l,page:d,pagesize:m},!1).then(function(t){return 0==t.code?t:e.reject(t)})}},{key:"addCourse",value:function(t){var a=t.category_id,r=t.experts_id,o=t.course_name,i=t.image,s=t.description,c=t.tags,l=t.type,d=t.material_type,m=t.material_id,p=t.need_testing,f=(t.status,t.sort),v=t.share,g=u+"/create";return n.a(g,{category_id:a,experts_id:r,course_name:o,image:i,description:s,tags:c,type:l,material_type:d,material_id:m,need_testing:p,sort:f,share:v}).then(function(t){return 0==t.code?t.data:e.reject(t)})}},{key:"getCourseInfo",value:function(e){var t=e.course_id,a=(o.a.getUserInfo().company_id,i.a.apiHost+"/course/get/"+t);return n.b(a).then(function(e){return e.data})}},{key:"editCourse",value:function(e){var t=e.govid,a=e.contentid,r=e.category_id,s=e.experts_id,u=e.course_name,c=e.image,l=e.tags,d=e.type,m=e.material_type,p=e.material_id,f=e.description,v=e.need_testing,g=e.status,y=e.limit_time,h=e.limit_repeat,_=e.score_pass,A=e.sort,b=e.share;t=t||o.a.getUserInfo().company_id;var C=i.a.apiHost+"/course/edit/"+a;return n.a(C,{category_id:r,experts_id:s,course_name:u,image:c,tags:l,type:d,material_type:m,material_id:p,description:f,need_testing:v,limit_time:y,status:g,limit_repeat:h,score_pass:_,sort:A,share:b}).then(function(e){return e.data})}},{key:"offlineCourse",value:function(e){var t=e.govid,a=e.course_id,r=e.status;t=t||o.a.getUserInfo().company_id;var s=i.a.apiHost+"/course/edit/"+a;return n.a(s,{status:r})}},{key:"commonUploadImage",value:function(){return i.a.apiHost+"/common/upload/file"}},{key:"commonUploadImageBase",value:function(e){var t=e.image,a=e.alias,r=void 0===a?Date.now()+".jpg":a,o=e.biz,s=void 0===o?"course":o,u=e.extpath,c=i.a.apiHost+"/common/upload/base64";return n.a(c,{image:t,alias:r,biz:s,extpath:u}).then(function(e){return xmview.showTip("success",e.message),e.data})}},{key:"commonUploadImageBaseSection",value:function(e){var t=e.image,a=e.alias,r=void 0===a?Date.now()+".jpg":a,o=e.biz,s=void 0===o?"section":o,u=e.extpath,c=i.a.apiHost+"/common/upload/base64";return n.a(c,{image:t,alias:r,biz:s,extpath:u}).then(function(e){return xmview.showTip("success",e.message),e.data})}},{key:"uploadCover4addCourse",value:function(e){var t=e.image,a=e.alias,r=void 0===a?Date.now()+".jpg":a,o=i.a.apiHost+"/course/subject/image";return n.a(o,{image:t,alias:r}).then(function(e){return e.data})}},{key:"deleteCourse",value:function(e){var t=e.govid,a=e.course_id;t=t||o.a.getUserInfo().company_id;var r=i.a.apiHost+"/course/delete/"+a;return n.a(r,{})}},{key:"deleteCourseMulty",value:function(e){var t=e.govid,a=e.id;t=t||o.a.getUserInfo().company_id;var r=i.a.apiHost+"/com/"+t+"/course/batchdel";return n.a(r,{id:a})}},{key:"deleteVideoMulty",value:function(e){var t=e.id,a=u+"/video/batchdel";return n.a(a,{id:t})}},{key:"moveCourseToCategoryMulty",value:function(e){var t=e.govid,a=e.id,r=e.catid;t=t||o.a.getUserInfo().company_id;var s=i.a.apiHost+"/com/"+t+"/course/batchmove";return n.a(s,{id:a,catid:r})}},{key:"getCourseDocUploadUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.govid;return t=t||o.a.getUserInfo().company_id,i.a.apiHost+"/course/doc/upload"}},{key:"getTestingInfo",value:function(e){var t=e.course_id,a=i.a.apiHost+"/course/subject/listoptions";return n.b(a,{course_id:t}).then(function(e){return e.data})}},{key:"addOrEditTesting",value:function(t){var a=t.govid,r=t.course_id,s=t.subjects;a=a||o.a.getUserInfo().company_id;var u=i.a.apiHost+"/course/subject/updates/"+r;return n.a(u,s).then(function(t){return 0==t.code?(xmview.showTip("success",t.message),t.data):(xmview.showTip("error",t.message),e.reject(t))})}},{key:"delCourse",value:function(e){var t=e.course_id,a=e.id,r=i.a.apiHost+"/course/subject/delete/"+t+"/"+a;return n.a(r,{}).then(function(e){return e.data})}},{key:"getAlbumList",value:function(e){var t=e.govid,a=e.page,r=e.pagesize,s=e.keyword,u=e.create_start,c=e.create_end;t=t||o.a.getUserInfo().company_id;var l=i.a.apiHost+"/com/"+t+"/course/album/search";return n.b(l,{page:a,pagesize:r,keyword:s,create_start:u,create_end:c}).then(function(e){return e.data})}},{key:"deleteAlbum",value:function(e){var t=e.govid,a=e.id;t=t||o.a.getUserInfo().company_id;var r=i.a.apiHost+"/com/"+t+"/course/album/"+a;return n.a(r,{})}},{key:"deleteAlbumMulty",value:function(e){var t=e.govid,a=e.ids;t=t||o.a.getUserInfo().company_id;var r=i.a.apiHost+"/com/"+t+"/course/album/batchdel";return n.a(r,{id:a.join(",")})}},{key:"addAlbum",value:function(e){var t=e.govid,a=e.course_id,r=e.name;t=t||o.a.getUserInfo().company_id;var s=i.a.apiHost+"/com/"+t+"/course/album/add";return n.a(s,{course_id:a.join(","),name:r})}},{key:"editAlbum",value:function(e){var t=e.govid,a=e.course_id,r=e.name;t=t||o.a.getUserInfo().company_id;var s=i.a.apiHost+"/com/"+t+"/course/album/edit";return n.a(s,{course_id:a.join(","),name:r})}},{key:"getCourseSubject",value:function(e){var t=e.id,a=u+"/"+t+"/subject/stat";return n.b(a).then(function(e){return e.data})}},{key:"getSubjectAnswer",value:function(e){var t=e.c_id,a=e.s_id,r=u+"/"+t+"/subject/"+a+"/stat";return n.b(r).then(function(e){return e.data.stat})}}]),t}();t.a=new c}).call(t,a(2))},281:function(e,t,a){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=a(6),o=a(1),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=o.a.apiHost+"/menu",u=function(){function t(){r(this,t)}return i(t,[{key:"fetchData",value:function(t,a,r,o,i){var u=s+"/lists";return n.b(u,t,a,r,o,i).then(function(t){return 0==t.code?t:e.reject(t)})}},{key:"getAdminInfo",value:function(t){var a=s+"/view/"+t;return n.b(a,{},!1).then(function(t){return 0==t.code?t.data:e.reject(t)})}},{key:"create",value:function(t){var a=t.menu_name,r=t.menu_node,o=t.remark,i=t.sort,u=t.pid,c=t.level,l=s+"/create";return n.a(l,{menu_name:a,menu_node:r,remark:o,sort:i,pid:u,level:c}).then(function(t){if(0!=t.code)return xmview.showTip("error",t.message),e.reject(t);xmview.showTip("success",t.message)})}},{key:"update",value:function(t){var a=t.id,r=t.menu_name,o=t.menu_node,i=t.remark,u=t.sort,c=t.pid,l=t.level,d=t.disabled,m=s+"/update/"+a;return n.a(m,{menu_name:r,menu_node:o,remark:i,sort:u,pid:c,level:l,disabled:d}).then(function(t){return 0==t.code?t.data:(xmview.showTip("error",t.message),e.reject(t))})}},{key:"delete",value:function(t){var a=s+"/delete/"+t;return n.a(a,{}).then(function(t){if(t.code)return e.reject(t)})}},{key:"deleteMulty",value:function(e){var t=s+"/batchdel";return n.c(t,{ids:e})}},{key:"moveToCategoryMulty",value:function(e){var t=e.ids,a=e.category_id,r=s+"/batchmove";return n.c(r,{ids:t,category_id:a})}},{key:"setLesson",value:function(t){var a=t.id,r=t.data,o=s+"/"+a+"/setlesson";return n.c(o,r).then(function(t){if(t.code)return e.reject(t)})}},{key:"offline",value:function(e,t,a,r,o,i,u,c){var l=s+"/update/"+e;return n.a(l,{menu_name:t,menu_node:a,remark:r,sort:o,pid:i,level:u,disabled:c})}},{key:"online",value:function(e,t,a,r,o,i,u,c){var l=s+"/update/"+e;return n.a(l,{menu_name:t,menu_node:a,remark:r,sort:o,pid:i,level:u,disabled:c})}},{key:"getUploadUrl",value:function(e){var t=e.image,a=e.alias,r=s+"/upload";return n.a(r,{image:t,alias:a}).then(function(e){return e.data})}}]),t}();t.a=new u}).call(t,a(2))},43:function(e,t,a){a(942);var r=a(5)(a(809),a(1039),null,null);e.exports=r.exports},749:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(15);a(166);t.default={props:{value:[String,Number,Array],autoClear:{type:Boolean,default:!1},onchange:Function,placeholder:{type:String,default:"请选择"},showNotCat:{type:Boolean,default:!0},type:{type:String,default:""},reqFun:Function},data:function(){return{loading:!1,options:[],currVal:this.value,govid:void 0,lastData:void 0}},watch:{value:function(e){this.setCurrVal(e)},currVal:function(e,t){this.$emit("input",e.length>0?parseInt(e[e.length-1]):e),this.onchange&&this.onchange(e)}},mounted:function(){var e=this;this.$refs.container.$el.addEventListener("click",function(){e.loading||e.options.length>0||(e.lastData?e.options=e.lastData:(e.loading=!0,e.reqFun({pid:0,level:-1,pagesize:-1}).then(function(t){t.data.forEach(function(t){e.options.push({data:t,label:t.menu_name,value:t.id,children:t.ended?null:[]})}),e.loading=!1,xmview.setContentLoading(!1)})))})},deactivated:function(){this.autoClear&&this.options.length>0&&(this.lastData=this.options,this.options=[])},activated:function(){},methods:{setCurrVal:function(e){e||this.$refs.container.clearValue(new window.Event("click")),this.currVal!=e&&e&&(this.currVal=e)},handleItemChange:function(e){var t=this;if(!(e.length<1)){var a=r.a.dataToTree(this.options,e,"value");this.reqFun({pid:e[e.length-1],level:-1,pagesize:-1}).then(function(e){var r=e.data.map(function(e){return e.label=e.menu_name,e.value=e.id,e.children=e.ended?null:[],e});a.children=r,t.loading=!1,xmview.setContentLoading(!1)})}},clearData:function(){this.lastData=this.options,this.options=[]}},components:{}}},809:function(e,t,a){"use strict";function r(){return{id:0,menu_name:"",menu_node:"",remark:"",sort:void 0,pid:void 0,level:0,parent_name:""}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(281),o=(a(1),a(965)),i=a.n(o);t.default={name:"sys-form",components:{MultTreeCategory:i.a},data:function(){return{imgUrl:"",loadingData:!1,currentData:{data:{},pindex:-1,index:-1},fetchParam:r(),resultData:[],drop_list:[],rules:{menu_name:[{required:!0,message:"必须输入",trigger:"blur"}],menu_node:[{required:!0,message:"必须输入",trigger:"blur"}],sort:[{required:!0,message:"必须输入",trigger:"blur"}],level:[{required:!0,message:"必须输入",trigger:"blur"}]}}},created:function(){var e=this;xmview.setContentLoading(!1),void 0!=this.$route.params.sys_id&&n.a.getAdminInfo(this.$route.params.sys_id).then(function(t){e.fetchParam=t}),this.loadingData=!1,this.getDropval()},methods:{reqFun:function(e){return n.a.fetchData({pagesize:-1,pid:0,level:-1})},getDropval:function(){var e=this;n.a.fetchData({pagesize:-1}).then(function(t){e.drop_list=t.data})},btnNextClick:function(){var e=this;this.$refs.form.validate(function(t){if(t){var a=n.a.create;e.$route.params.sys_id&&(a=n.a.update),a(e.fetchParam).then(function(t){xmview.showTip("success","数据提交成功"),e.$router.push({name:"menu-index"}),e.$refs.form.resetFields(),e.currentData={data:[],pindex:-1,index:-1},e.fetchParam.id||(e.fetchParam.id=t.id)})}})},querySearch:function(e,t){var a=this.restaurants;t(e?a.filter(this.createFilter(e)):a)}}}},831:function(e,t,a){t=e.exports=a(98)(!0),t.push([e.i,".course-select-container .el-icon-caret-bottom{text-align:center;text-align-last:center}","",{version:3,sources:["/Users/zhaoyicheng/Documents/Code/yxt/PC-old/sys_ui/assets/src/views/component/select/MultCategory.vue"],names:[],mappings:"AACA,+CAA+C,kBAAkB,sBAAsB,CACtF",file:"MultCategory.vue",sourcesContent:["\n.course-select-container .el-icon-caret-bottom{text-align:center;text-align-last:center\n}\n"],sourceRoot:""}])},873:function(e,t,a){t=e.exports=a(98)(!0),t.push([e.i,'#sys-form{padding:15px;position:relative;border:1px solid #ededed;border-radius:5px;background:#fff}#sys-form:after{content:"";clear:both;display:block}#sys-form .pagin{float:right;margin-top:15px}#sys-form .bottom-manage{margin-top:15px}.text-blue{color:#20a0ff}.text-light-blue{color:#58b7ff}.text-dark-blue{color:#1d8ce0}.text-success{color:#13ce66}.text-warning{color:#f7ba2a}.text-danger{color:#ff4949}#sys-form .el-form{max-width:700px}#sys-form .submit-form{width:40%;padding:20px}#sys-form .submit-form .subButton{text-align:center}',"",{version:3,sources:["/Users/zhaoyicheng/Documents/Code/yxt/PC-old/sys_ui/assets/src/views/sys/menu/Form.vue"],names:[],mappings:"AACA,UAAU,aAAa,kBAAkB,yBAAyB,kBAAkB,eAAe,CAClG,AACD,gBAAgB,WAAW,WAAW,aAAa,CAClD,AACD,iBAAiB,YAAY,eAAe,CAC3C,AACD,yBAAyB,eAAe,CACvC,AACD,WAAW,aAAa,CACvB,AACD,iBAAiB,aAAa,CAC7B,AACD,gBAAgB,aAAa,CAC5B,AACD,cAAc,aAAa,CAC1B,AACD,cAAc,aAAa,CAC1B,AACD,aAAa,aAAa,CACzB,AACD,mBAAmB,eAAe,CACjC,AACD,uBAAuB,UAAU,YAAY,CAC5C,AACD,kCAAkC,iBAAiB,CAClD",file:"Form.vue",sourcesContent:["\n#sys-form{padding:15px;position:relative;border:1px solid #ededed;border-radius:5px;background:#fff\n}\n#sys-form:after{content:'';clear:both;display:block\n}\n#sys-form .pagin{float:right;margin-top:15px\n}\n#sys-form .bottom-manage{margin-top:15px\n}\n.text-blue{color:#20A0FF\n}\n.text-light-blue{color:#58B7FF\n}\n.text-dark-blue{color:#1D8CE0\n}\n.text-success{color:#13CE66\n}\n.text-warning{color:#F7BA2A\n}\n.text-danger{color:#FF4949\n}\n#sys-form .el-form{max-width:700px\n}\n#sys-form .submit-form{width:40%;padding:20px\n}\n#sys-form .submit-form .subButton{text-align:center\n}\n"],sourceRoot:""}])},900:function(e,t,a){var r=a(831);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(99)("414f67b0",r,!0)},942:function(e,t,a){var r=a(873);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(99)("86376eea",r,!0)},965:function(e,t,a){a(900);var r=a(5)(a(749),a(986),null,null);e.exports=r.exports},986:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-cascader",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"container",staticClass:"course-select-container",attrs:{options:e.options,"show-all-levels":!1,placeholder:e.placeholder,clearable:!0},on:{"active-item-change":e.handleItemChange,change:e.setCurrVal}})},staticRenderFns:[]}}});
//# sourceMappingURL=9.05210e2125c5ea2514ad.js.map