webpackJsonp([49],{102:function(e,t,a){a(968);var n=a(5)(a(736),a(1071),null,null);e.exports=n.exports},1071:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{attrs:{id:"feedback-add"}},[a("div",{staticClass:"manage-container"},[a("el-button",{attrs:{type:"info"},on:{click:function(t){e.$router.push({name:"feedback-index"})}}},[e._v("返回列表")])],1),e._v(" "),a("main",{staticClass:"feedback-form"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":e.formLabelWidth}},[a("el-form-item",{attrs:{prop:"category_id",label:"问题分类"}},[a("el-select",{attrs:{placeholder:"未选择"},model:{value:e.form.category_id,callback:function(t){e.form.category_id=t},expression:"form.category_id"}},e._l(e.categories,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{prop:"content",label:"问题描述"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请详细描述您所遇到的问题或优化建议"},model:{value:e.form.content,callback:function(t){e.form.content=t},expression:"form.content"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"images",label:"上传截图(选填)"}},[a("UploadImages",{ref:"uploadImg",staticClass:"upload-btn",attrs:{url:e.uploadImgUrl,name:e.uploadName,fileNum:e.fileNum,onSuccess:e.handleImgUploaded,onRemove:e.handleImgRemoved}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"contact",label:"联系方式"}},[a("el-input",{staticClass:"input",attrs:{type:"input",placeholder:"请留下联系方式用于问题跟进"},model:{value:e.form.contact,callback:function(t){e.form.contact=t},expression:"form.contact"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("提交")])],1)],1)],1)])},staticRenderFns:[]}},321:function(e,t,a){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=a(6),i=a(1),r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=i.a.apiHost+"/feedback",l=function(){function t(){n(this,t)}return r(t,[{key:"search",value:function(e){var t=e.page,a=e.pagesize,n=e.status,i=void 0===n?-1:n,r=e.category_id,l=e.time_start,s=e.time_end,d=c+"/search";return""==i&&(i=-1),o.b(d,{page:t,pagesize:a,status:i,category_id:r,time_start:l,time_end:s}).then(function(e){return e.data})}},{key:"category",value:function(){var e=c+"/category";return o.b(e,{}).then(function(e){return e.data})}},{key:"view",value:function(e){var t=c+"/"+e;return o.b(t,{}).then(function(e){return e.data})}},{key:"create",value:function(t){var a=t.category_id,n=void 0===a?1:a,i=t.content,r=t.images,l=void 0===r?[]:r,s=t.contact,d=c+"/";return l&&(l=JSON.stringify(l)),o.a(d,{category_id:n,content:i,images:l,contact:s}).then(function(t){if(t.code)return e.reject(t)})}},{key:"reply",value:function(t){var a=t.id,n=t.status,i=t.content,r=t.images,l=t.confirm,s=c+"/"+a+"/reply";return r&&(r=JSON.stringify(r)),l=l?1:0,o.c(s,{status:n,content:i,images:r,confirm:l}).then(function(t){return t.code?e.reject(t):t.data})}},{key:"confirm",value:function(t){var a=c+"/"+t+"/confirm";return o.c(a,{}).then(function(t){if(t.code)return e.reject(t)})}},{key:"remove",value:function(t){var a=c+"/"+t;return o.d(a,{}).then(function(t){if(t.code)return e.reject(t)})}},{key:"uploadImageUrl",value:function(){return c+"/image"}}]),t}();t.a=new l}).call(t,a(2))},414:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(3),o=a(1);t.default={props:{url:String,name:{type:String,default:"image"},onSuccess:Function,onRemove:Function,fileNum:{type:Number,default:1}},data:function(){return{dialogImageUrl:"",dialogVisible:!1,showUploadBtn:!0,headers:void 0,host:o.a.apiHost,uploadBtn:null,multiple:!1,imgList:[]}},watch:{imgList:function(e){e.length>=this.fileNum&&e[0].url?this.uploadBtn.style.display="none":this.uploadBtn.style.display="inline-block"}},created:function(){this.headers={Authorization:"Bearer "+n.a.getAuthToken(),TwoStep:"Bearer "+n.a.getTwiceToken()}},activated:function(){this.uploadBtn&&(this.uploadBtn=this.$refs.container.querySelector(".el-upload--picture-card"))},mounted:function(){this.uploadBtn=this.$refs.container.querySelector(".el-upload--picture-card")},methods:{handlePreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleRemove:function(e,t){this.onRemove&&this.onRemove(e,t),this.imgList=t,this.$refs.container.querySelector(".el-upload__input").value=null},handleSuccess:function(e,t,a){0==e.code?(this.onSuccess&&this.onSuccess(e,t,a),this.imgList=a):xmview.showTip("error",e.message)},clearFiles:function(){this.imgList=[]}}}},421:function(e,t,a){t=e.exports=a(99)(!0),t.push([e.i,".component-upload-uploadimages{height:100px}.component-upload-uploadimages .el-upload--picture-card,.component-upload-uploadimages .el-upload-list__item{width:100px;height:100px}.component-upload-uploadimages .el-upload--picture-card{line-height:100px}","",{version:3,sources:["/Users/zhaoyicheng/Documents/Code/yxt/PC-old/sys_ui/assets/src/views/component/upload/UploadImages.vue"],names:[],mappings:"AACA,+BAA+B,YAAY,CAC1C,AACD,6GAA6G,YAAY,YAAY,CACpI,AACD,wDAAwD,iBAAiB,CACxE",file:"UploadImages.vue",sourcesContent:["\n.component-upload-uploadimages{height:100px\n}\n.component-upload-uploadimages .el-upload-list__item,.component-upload-uploadimages .el-upload--picture-card{width:100px;height:100px\n}\n.component-upload-uploadimages .el-upload--picture-card{line-height:100px\n}\n"],sourceRoot:""}])},677:function(e,t,a){var n=a(421);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(100)("0e24c647",n,!0)},686:function(e,t,a){a(677);var n=a(5)(a(414),a(688),null,null);e.exports=n.exports},688:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"container",staticClass:"component-upload-uploadimages"},[a("el-upload",{attrs:{headers:e.headers,action:e.url,name:e.name,"list-type":"picture-card",multiple:e.multiple,"on-success":e.handleSuccess,"on-error":e.handleRemove,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.imgList,accept:"image/jpg,image/jpeg,image/png,image/gif"}},[e.showUploadBtn?a("i",{staticClass:"el-icon-plus"}):e._e()]),e._v(" "),a("el-dialog",{attrs:{size:"tiny"},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]}},736:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(321),o=a(28),i=a(3),r=a(686),c=a.n(r);t.default={name:"feedback-add",filters:{fillImgPath:o.fillImgPath},components:{UploadImages:c.a},data:function(){return{form:{category_id:"",content:"",contact:"",images:[]},rules:{category_id:{type:"number",required:!0,message:"请选择栏目",trigger:"blur"},content:{type:"string",required:!0,message:"请描述您遇到的问题",trigger:"change"},contact:{type:"string",required:!0,message:"请填写联系方式",trigger:"change"}},formLabelWidth:"120px",categories:[],uploadImgUrl:"",uploadName:"file",fileNum:3}},watch:{"form.images":function(e){}},created:function(){var e=this;this.uploadImgUrl=n.a.uploadImageUrl(),n.a.category().then(function(t){e.categories=t.categories}).catch(function(e){xmview.showTip("error",e.message)});var t=i.a.getUserInfo();t&&(this.form.contact=t.mobile?t.mobile:t.email),xmview.setContentLoading(!1)},methods:{handleImgUploaded:function(e,t,a){-1==this.form.images.indexOf(e.data.url)&&this.form.images.push(e.data.url)},handleImgRemoved:function(e,t){var a=this.form.images.indexOf(e.response.data.url);a>-1&&this.form.images.splice(a,1)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;n.a.create(t.form).then(function(){xmview.showTip("success","提交成功"),t.$router.push({name:"feedback-index",params:{reload:!0}})}).catch(function(e){xmview.showTip("error",e.message)})})},resetForm:function(e){this.$refs[e].resetFields()}}}},896:function(e,t,a){t=e.exports=a(99)(!0),t.push([e.i,'#feedback-add{padding:15px;position:relative;border:1px solid #ededed;border-radius:5px;background:#fff}#feedback-add:after{content:"";clear:both;display:block}#feedback-add .pagin{float:right;margin-top:15px}#feedback-add .bottom-manage{margin-top:15px}#feedback-add .manage-container{position:absolute;right:0;top:-50px}#feedback-add .header-button.manage-container>.el-button i{margin-right:5px}#feedback-add .header-button.manage-container>.el-button i:before{position:relative;top:-1px}.text-blue{color:#20a0ff}.text-light-blue{color:#58b7ff}.text-dark-blue{color:#1d8ce0}.text-success{color:#13ce66}.text-warning{color:#f7ba2a}.text-danger{color:#ff4949}.keyword-container{width:90%;margin-left:5%;margin-bottom:5px}#feedback-add .feedback-form{width:90%}#feedback-add .feedback-form .input{max-width:300px}#feedback-add .el-dialog__wrapper{padding-top:15px;background:rgba(0,0,0,.5);z-index:1000}',"",{version:3,sources:["/Users/zhaoyicheng/Documents/Code/yxt/PC-old/sys_ui/assets/src/views/base/feedback/Add.vue"],names:[],mappings:"AACA,cAAc,aAAa,kBAAkB,yBAAyB,kBAAkB,eAAe,CACtG,AACD,oBAAoB,WAAW,WAAW,aAAa,CACtD,AACD,qBAAqB,YAAY,eAAe,CAC/C,AACD,6BAA6B,eAAe,CAC3C,AACD,gCAAgC,kBAAkB,QAAQ,SAAS,CAClE,AACD,2DAA2D,gBAAgB,CAC1E,AACD,kEAAkE,kBAAkB,QAAQ,CAC3F,AACD,WAAW,aAAa,CACvB,AACD,iBAAiB,aAAa,CAC7B,AACD,gBAAgB,aAAa,CAC5B,AACD,cAAc,aAAa,CAC1B,AACD,cAAc,aAAa,CAC1B,AACD,aAAa,aAAa,CACzB,AACD,mBAAmB,UAAU,eAAe,iBAAiB,CAC5D,AACD,6BAA6B,SAAS,CACrC,AACD,oCAAoC,eAAe,CAClD,AACD,kCAAkC,iBAAiB,0BAA2B,YAAY,CACzF",file:"Add.vue",sourcesContent:["\n#feedback-add{padding:15px;position:relative;border:1px solid #ededed;border-radius:5px;background:#fff\n}\n#feedback-add:after{content:'';clear:both;display:block\n}\n#feedback-add .pagin{float:right;margin-top:15px\n}\n#feedback-add .bottom-manage{margin-top:15px\n}\n#feedback-add .manage-container{position:absolute;right:0;top:-50px\n}\n#feedback-add .header-button.manage-container>.el-button i{margin-right:5px\n}\n#feedback-add .header-button.manage-container>.el-button i:before{position:relative;top:-1px\n}\n.text-blue{color:#20A0FF\n}\n.text-light-blue{color:#58B7FF\n}\n.text-dark-blue{color:#1D8CE0\n}\n.text-success{color:#13CE66\n}\n.text-warning{color:#F7BA2A\n}\n.text-danger{color:#FF4949\n}\n.keyword-container{width:90%;margin-left:5%;margin-bottom:5px\n}\n#feedback-add .feedback-form{width:90%\n}\n#feedback-add .feedback-form .input{max-width:300px\n}\n#feedback-add .el-dialog__wrapper{padding-top:15px;background:rgba(0,0,0,0.5);z-index:1000\n}\n"],sourceRoot:""}])},968:function(e,t,a){var n=a(896);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(100)("0236ff84",n,!0)}});
//# sourceMappingURL=49.cd4612928be589bfb83c.js.map