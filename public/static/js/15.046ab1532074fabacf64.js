webpackJsonp([15],{1051:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{attrs:{id:"course-manage-video-container"}},[a("section",{staticClass:"manage-container"},[a("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.$router.push({name:"course-video-add"})}}},[a("i",[e._v("上传视频")])])],1),e._v(" "),a("article",{staticClass:"search"},[a("section",[a("i",[e._v("视频")]),e._v(" "),a("el-input",{nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.fetchData(t)}},model:{value:e.fetchParam.file_name,callback:function(t){e.fetchParam.file_name=t},expression:"fetchParam.file_name"}})],1),e._v(" "),a("section",[a("i",[e._v("状态")]),e._v(" "),a("el-select",{attrs:{clearable:!0,placeholder:"请选择"},on:{change:e.fetchData},model:{value:e.fetchParam.status,callback:function(t){e.fetchParam.status=t},expression:"fetchParam.status"}},[a("el-option",{attrs:{label:"全部",value:-1}}),e._v(" "),a("el-option",{attrs:{label:"转码中",value:1}}),e._v(" "),a("el-option",{attrs:{label:"转码失败",value:2}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:0}})],1)],1),e._v(" "),a("section",[a("i",[e._v("是否关联")]),e._v(" "),a("el-select",{attrs:{clearable:!0,placeholder:"请选择"},on:{change:e.fetchData},model:{value:e.fetchParam.used,callback:function(t){e.fetchParam.used=t},expression:"fetchParam.used"}},[a("el-option",{attrs:{label:"已关联",value:1}}),e._v(" "),a("el-option",{attrs:{label:"未关联",value:0}})],1)],1),e._v(" "),a("DateRange",{attrs:{title:"创建时间",start:e.fetchParam.create_start,end:e.fetchParam.create_end,change:e.fetchData},on:{changeStart:function(t){return e.fetchParam.create_start=t},changeEnd:function(t){return e.fetchParam.create_end=t}}})],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingData,expression:"loadingData"}],staticClass:"data-table",attrs:{data:e.data,fit:!0,border:""},on:{select:e.selectRow,"select-all":e.selectRow}},[a("el-table-column",{attrs:{"min-width":"140",prop:"file_name",label:"视频名称"}}),e._v(" "),a("el-table-column",{attrs:{width:"130",prop:"duration",label:"时长"}}),e._v(" "),a("el-table-column",{attrs:{width:"130",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("el-tag",{attrs:{type:"success"}},[e._v("正常")]):1==t.row.status?a("el-tag",{attrs:{type:"primary"}},[e._v("转码中")]):2==t.row.status?a("el-tag",{attrs:{type:"primary"}},[e._v("转码失败")]):a("el-tag",[e._v("正常")]),e._v(" "),1==t.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.refreshStatus(t.$index,t.row)}}},[e._v("刷新")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"130",label:"是否关联"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.used?a("el-tag",{attrs:{type:"primary"}},[e._v("未关联")]):1==t.row.used?a("el-tag",{attrs:{type:"success"}},[e._v("已关联")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"160",prop:"addate",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"180",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1!=t.row.status&&2!=t.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.preview(t.$index,t.row)}}},[e._v("查看\n                ")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.edit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.del(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"pagin",attrs:{"current-page":e.fetchParam.page,"page-size":e.fetchParam.pagesize,"page-sizes":[15,30,60,100],layout:"sizes,total, prev, pager, next",total:e.total},on:{"size-change":function(t){return e.fetchParam.pagesize=t},"current-change":function(t){return e.fetchParam.page=t}}}),e._v(" "),a("el-dialog",{attrs:{title:e.dialogAdd.title},model:{value:e.dialogAdd.isShow,callback:function(t){e.dialogAdd.isShow=t},expression:"dialogAdd.isShow"}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px",model:e.videoModel}},[a("el-form-item",{attrs:{label:"视频名称"}},[a("el-input",{model:{value:e.videoModel.file_name,callback:function(t){e.videoModel.file_name=t},expression:"videoModel.file_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"视频封面"}},[a("UploadImg",{attrs:{defaultImg:e.videoModel.cover,url:e.uploadImgUrl,onSuccess:e.handleOnUploaded}})],1),e._v(" "),a("el-form-item",{attrs:{label:"视频时长"}},[a("el-input",{model:{value:e.videoModel.duration,callback:function(t){e.videoModel.duration=t},expression:"videoModel.duration"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否关联"}},[a("el-input",{model:{value:e.videoModel.used,callback:function(t){e.videoModel.used=t},expression:"videoModel.used"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否关联"}},[[e._v("\n                        "+e._s(1==e.videoModel.used?"已关联":"未关联")+"\n                    ")]],2),e._v(" "),a("el-form-item",{attrs:{label:"视频标签"}},[a("vTags",{model:{value:e.videoModel.tags,callback:function(t){e.videoModel.tags=t},expression:"videoModel.tags"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogAdd.isShow=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.dialogAdd.confirmFn}},[e._v("确 定")])],1)],1),e._v(" "),a("VideoPreview",{ref:"videoPreview",attrs:{url:e.videoUrl,row:e.row,onchange:e.fetchData}})],1)},staticRenderFns:[]}},170:function(e,t,a){a(960);var n=a(10)(a(793),a(1051),null,null);e.exports=n.exports},214:function(e,t,a){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=a(24),o=a(5),r=a(4),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=r.a.apiHost+"/course",c=function(){function t(){n(this,t)}return s(t,[{key:"getCategoryTree",value:function(e){var t=e.id,a=void 0===t?"tree":t,n=e.type,o=e.filter,r=void 0===o||o,s=e.pid,c=void 0===s?-1:s,u=e.level,d=void 0===u?-1:u,p=e.pagesize,m=void 0===p?-1:p,g=l+"/category/lists";return i.b(g,{id:a,filter:r,type:n,pid:c,level:d,pagesize:m}).then(function(e){return e})}},{key:"search_cate",value:function(t){var a=t.id,n=t.name,o=t.category_type,r=t.pid,s=t.level,c=t.ended,u=t.disabled,d=t.page,p=t.pagesize,m=l+"/category/lists";return i.b(m,{id:a,name:n,category_type:o,pid:r,level:s,ended:c,disabled:u,page:d,pagesize:p},!1).then(function(t){return 0==t.code?t:e.reject(t)})}},{key:"create_cate",value:function(t){var a=t.name,n=t.sort,o=t.category_type,r=t.pid,s=t.ended,c=t.image,u={name:a,sort:n,category_type:o,pid:r,ended:s,image:c};0===r&&delete u.pid;var d=l+"/category/create";return i.a(d,u).then(function(t){return 0==t.code?(xmview.showTip("success",t.message),t.data):(xmview.showTip("error",t.message),e.reject(t))})}},{key:"update_cate",value:function(t){var a=t.id,n=t.name,o=t.image,r=t.category_type,s=t.sort,c=t.ended,u=t.disabled,d=t.pid,p=l+"/category/edit/"+a;return i.a(p,{name:n,image:o,category_type:r,sort:s,ended:c,disabled:u,pid:d}).then(function(t){if(t.code)return e.reject(t)})}},{key:"updateCategory",value:function(e){var t=e.govid,a=e.type,n=e.name,s=e.image,l=e.sort,c=e.id;t=t||o.a.getUserInfo().company_id;var u=r.a.apiHost+"/com/"+t+"/course/category/"+c;return i.a(u,{type:a,name:n,image:s,sort:l})}},{key:"moveCategory",value:function(e){var t=e.id,a=e.to,n=r.a.apiHost+"/course/category/"+t+"/move";return i.a(n,{to:a})}},{key:"moveCategoryContent",value:function(e){var t=e.id,a=e.to,n=r.a.apiHost+"/course/category/"+t+"/move/content";return i.a(n,{to:a})}},{key:"getUploadCategoryImgUrl",value:function(){return r.a.apiHost+"/common/upload/file"}},{key:"delete_cate",value:function(t){var a=l+"/category/delete/"+t;return i.b(a,{}).then(function(t){return 0==t.code?(xmview.showTip("success",t.message),t.data):(xmview.showTip("error",t.message),e.reject(t))})}},{key:"courseList",value:function(e,t,a){var n=l+"/search/name";return i.b(n,{keyword:e,page:t,pagesize:a}).then(function(e){return e.data})}},{key:"getPublicCourselist",value:function(t){var a=t.course_name,n=void 0===a?"":a,o=t.status,r=t.category_id,s=t.need_testing,c=t.create_start,u=t.create_end,d=t.page,p=t.pagesize,m=l+"/lists";return i.b(m,{course_name:n,status:o,category_id:r,need_testing:s,create_start:c,create_end:u,page:d,pagesize:p},!1).then(function(t){return 0==t.code?t:e.reject(t)})}},{key:"addCourse",value:function(t){var a=t.category_id,n=t.experts_id,o=t.course_name,r=t.image,s=t.description,c=t.tags,u=t.type,d=t.material_type,p=t.material_id,m=t.need_testing,g=t.status,v=t.sort,f=t.share,h=l+"/create";return i.a(h,{category_id:a,experts_id:n,course_name:o,image:r,description:s,tags:c,type:u,material_type:d,material_id:p,need_testing:m,status:g,sort:v,share:f}).then(function(t){return 0==t.code?t.data:e.reject(t)})}},{key:"getCourseInfo",value:function(e){var t=e.course_id,a=(o.a.getUserInfo().company_id,r.a.apiHost+"/course/get/"+t);return i.b(a).then(function(e){return e.data})}},{key:"editCourse",value:function(e){var t=e.govid,a=e.contentid,n=e.category_id,s=e.experts_id,l=e.course_name,c=e.image,u=e.tags,d=e.type,p=e.material_type,m=e.material_id,g=e.description,v=e.need_testing,f=e.status,h=e.limit_time,A=e.limit_repeat,_=e.score_pass,y=e.sort,b=e.share;t=t||o.a.getUserInfo().company_id;var C=r.a.apiHost+"/course/edit/"+a;return i.a(C,{category_id:n,experts_id:s,course_name:l,image:c,tags:u,type:d,material_type:p,material_id:m,description:g,need_testing:v,limit_time:h,status:f,limit_repeat:A,score_pass:_,sort:y,share:b}).then(function(e){return e.data})}},{key:"offlineCourse",value:function(e){var t=e.govid,a=e.course_id,n=e.status;t=t||o.a.getUserInfo().company_id;var s=r.a.apiHost+"/course/edit/"+a;return i.a(s,{status:n})}},{key:"commonUploadImage",value:function(){return r.a.apiHost+"/common/upload/file"}},{key:"commonUploadImageBase",value:function(e){var t=e.image,a=e.alias,n=void 0===a?Date.now()+".jpg":a,o=e.biz,s=void 0===o?"course":o,l=e.extpath,c=r.a.apiHost+"/common/upload/base64";return i.a(c,{image:t,alias:n,biz:s,extpath:l}).then(function(e){return xmview.showTip("success",e.message),e.data})}},{key:"commonUploadImageBaseSection",value:function(e){var t=e.image,a=e.alias,n=void 0===a?Date.now()+".jpg":a,o=e.biz,s=void 0===o?"section":o,l=e.extpath,c=r.a.apiHost+"/common/upload/base64";return i.a(c,{image:t,alias:n,biz:s,extpath:l}).then(function(e){return xmview.showTip("success",e.message),e.data})}},{key:"uploadCover4addCourse",value:function(e){var t=e.image,a=e.alias,n=void 0===a?Date.now()+".jpg":a,o=r.a.apiHost+"/course/subject/image";return i.a(o,{image:t,alias:n}).then(function(e){return e.data})}},{key:"deleteCourse",value:function(e){var t=e.govid,a=e.course_id;t=t||o.a.getUserInfo().company_id;var n=r.a.apiHost+"/course/delete/"+a;return i.d(n,{})}},{key:"deleteCourseMulty",value:function(e){var t=e.govid,a=e.id;t=t||o.a.getUserInfo().company_id;var n=r.a.apiHost+"/com/"+t+"/course/batchdel";return i.a(n,{id:a})}},{key:"deleteVideoMulty",value:function(e){var t=e.id,a=l+"/video/batchdel";return i.a(a,{id:t})}},{key:"moveCourseToCategoryMulty",value:function(e){var t=e.govid,a=e.id,n=e.catid;t=t||o.a.getUserInfo().company_id;var s=r.a.apiHost+"/com/"+t+"/course/batchmove";return i.a(s,{id:a,catid:n})}},{key:"getCourseDocUploadUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.govid;return t=t||o.a.getUserInfo().company_id,r.a.apiHost+"/course/doc/upload"}},{key:"getTestingInfo",value:function(e){var t=e.course_id,a=r.a.apiHost+"/course/subject/listoptions";return i.b(a,{course_id:t}).then(function(e){return e.data})}},{key:"addOrEditTesting",value:function(t){var a=t.govid,n=t.course_id,s=t.subjects;a=a||o.a.getUserInfo().company_id;var l=r.a.apiHost+"/course/subject/updates/"+n;return i.a(l,s).then(function(t){return 0==t.code?(xmview.showTip("success",t.message),t.data):(xmview.showTip("error",t.message),e.reject(t))})}},{key:"delCourse",value:function(e){var t=e.course_id,a=e.id,n=r.a.apiHost+"/course/subject/delete/"+t+"/"+a;return i.b(n,{}).then(function(e){return e.data})}},{key:"getAlbumList",value:function(e){var t=e.govid,a=e.page,n=e.pagesize,s=e.keyword,l=e.create_start,c=e.create_end;t=t||o.a.getUserInfo().company_id;var u=r.a.apiHost+"/com/"+t+"/course/album/search";return i.b(u,{page:a,pagesize:n,keyword:s,create_start:l,create_end:c}).then(function(e){return e.data})}},{key:"deleteAlbum",value:function(e){var t=e.govid,a=e.id;t=t||o.a.getUserInfo().company_id;var n=r.a.apiHost+"/com/"+t+"/course/album/"+a;return i.d(n,{})}},{key:"deleteAlbumMulty",value:function(e){var t=e.govid,a=e.ids;t=t||o.a.getUserInfo().company_id;var n=r.a.apiHost+"/com/"+t+"/course/album/batchdel";return i.a(n,{id:a.join(",")})}},{key:"addAlbum",value:function(e){var t=e.govid,a=e.course_id,n=e.name;t=t||o.a.getUserInfo().company_id;var s=r.a.apiHost+"/com/"+t+"/course/album/add";return i.a(s,{course_id:a.join(","),name:n})}},{key:"editAlbum",value:function(e){var t=e.govid,a=e.course_id,n=e.name;t=t||o.a.getUserInfo().company_id;var s=r.a.apiHost+"/com/"+t+"/course/album/edit";return i.a(s,{course_id:a.join(","),name:n})}},{key:"getCourseSubject",value:function(e){var t=e.id,a=l+"/"+t+"/subject/stat";return i.b(a).then(function(e){return e.data})}},{key:"getSubjectAnswer",value:function(e){var t=e.c_id,a=e.s_id,n=l+"/"+t+"/subject/"+a+"/stat";return i.b(n).then(function(e){return e.data.stat})}}]),t}();t.a=new c}).call(t,a(7))},215:function(e,t,a){"use strict";function n(e){return e?i.b(new Date(e)):e}Object.defineProperty(t,"__esModule",{value:!0});var i=a(43),o=void 0;t.default={props:{title:String,start:{},end:{},change:Function},data:function(){return{timespan:[this.start,this.end],pickerOptionsStart:{disabledDate:function(e){return o.timespan[1]?e.getTime()-144e5>=new Date(o.timespan[1]).getTime()&&0!==i.c(e,new Date(o.timespan[0])):null}},pickerOptionsEnd:{disabledDate:function(e){return o.timespan[0]?e.getTime()<=new Date(o.timespan[0]).getTime()&&0!==i.c(e,new Date(o.timespan[0])):null}}}},watch:{start:function(e){n(this.timespan[0])!=e&&(this.timespan[0]=e,e||(this.$refs.start.$el.querySelector("input").value=""))},end:function(e){n(this.timespan[1])!=e&&(this.timespan[1]=e,e||(this.$refs.end.$el.querySelector("input").value=""))}},beforeCreate:function(){o=this},methods:{setCurrVal:function(e){var t=["changeStart","changeEnd"],a=n(this.timespan[e]);this.$emit(t[e],n(a)),this.change&&this.change()}}}},217:function(e,t,a){var n=a(10)(a(215),a(218),null,null);e.exports=n.exports},218:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("i",[e._v(e._s(e.title))]),e._v(" "),a("el-date-picker",{ref:"start",attrs:{editable:!1,clearable:"",align:"right",type:"date","picker-options":e.pickerOptionsStart,placeholder:"开始日期"},on:{change:function(t){e.setCurrVal(0)}},model:{value:e.timespan[0],callback:function(t){var a=e.timespan;Array.isArray(a)?a.splice(0,1,t):e.timespan[0]=t},expression:"timespan[0]"}}),e._v(" "),a("el-date-picker",{ref:"end",attrs:{clearable:"",editable:!1,align:"right",type:"date","picker-options":e.pickerOptionsEnd,placeholder:"结束日期"},on:{change:function(t){e.setCurrVal(1)}},model:{value:e.timespan[1],callback:function(t){var a=e.timespan;Array.isArray(a)?a.splice(1,1,t):e.timespan[1]=t},expression:"timespan[1]"}})],1)},staticRenderFns:[]}},219:function(e,t,a){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=a(24),o=a(4),r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=o.a.apiHost+"/gov",l=function(){function t(){n(this,t)}return r(t,[{key:"getSelectList",value:function(e){var t=e.id,a=void 0===t?"":t,n=e.name,o=void 0===n?"":n,r=e.category,l=void 0===r?"":r,c=e.pagesize,u=void 0===c?"":c,d=e.page,p=void 0===d?"":d,m=e.pid,g=void 0===m?"":m,v=e.province_id,f=void 0===v?"":v,h=e.city_id,A=void 0===h?"":h,_=e.area_id,y=void 0===_?"":_,b=e.town_id,C=void 0===b?"":b,w=e.village_id,k=void 0===w?"":w,x=e.deleted,B=void 0===x?"":x,D=s+"/lists";return i.b(D,{id:a,name:o,category:l,page:p,pagesize:u,pid:g,province_id:f,city_id:A,area_id:y,town_id:C,village_id:k,deleted:B},!1).then(function(e){return e})}},{key:"postSelectList",value:function(e){var t=e.id,a=void 0===t?"":t,n=e.name,o=void 0===n?"":n,r=e.category,l=void 0===r?"":r,c=e.pagesize,u=void 0===c?"":c,d=e.page,p=void 0===d?"":d,m=e.pid,g=void 0===m?"":m,v=e.province_id,f=void 0===v?"":v,h=e.city_id,A=void 0===h?"":h,_=e.area_id,y=void 0===_?"":_,b=e.town_id,C=void 0===b?"":b,w=e.village_id,k=void 0===w?"":w,x=e.deleted,B=void 0===x?"":x,D=s+"/lists";return i.a(D,{id:a,name:o,category:l,page:p,pagesize:u,pid:g,province_id:f,city_id:A,area_id:y,town_id:C,village_id:k,deleted:B},!1).then(function(e){return e.data})}},{key:"getGovInfo",value:function(e){var t=s+"/get/"+e;return i.b(t).then(function(e){return e.data})}},{key:"addGov",value:function(t){var a=t.category,n=t.pid,o=t.province_id,r=t.city_id,l=t.area_id,c=t.town_id,u=t.village_id,d=t.name,p=t.concact,m=t.mobile,g=t.email,v=t.mobile_title,f=t.tel,h=t.zip,A=t.fax,_=t.url,y=t.address,b=t.description,C=s+"/create";return i.a(C,{category:a,pid:n,province_id:o,city_id:r,area_id:l,town_id:c,village_id:u,name:d,concact:p,mobile:m,email:g,mobile_title:v,tel:f,zip:h,fax:A,url:_,address:y,description:b}).then(function(t){if(t.code)return e.reject(t)})}},{key:"editGov",value:function(e){var t=s+"/edit/"+e;return i.b(t).then(function(e){return e.data})}},{key:"updateGov",value:function(t){var a=t.gov_id,n=t.category,o=t.pid,r=t.province_id,l=t.city_id,c=t.area_id,u=t.town_id,d=t.village_id,p=t.name,m=t.concact,g=t.mobile,v=t.email,f=t.mobile_title,h=t.tel,A=t.zip,_=t.fax,y=t.url,b=t.address,C=t.description,w=s+"/edit/"+a;return i.a(w,{category:n,pid:o,province_id:r,city_id:l,area_id:c,town_id:u,village_id:d,name:p,concact:m,mobile:g,email:v,mobile_title:f,tel:h,zip:A,fax:_,url:y,address:b,description:C}).then(function(t){if(t.code)return e.reject(t)})}},{key:"govAdminList",value:function(e){var t=e.name,a=e.gov_id,n=e.page,r=e.pagesize,s=e.role_id,l=e.mobile,c=e.active,u=o.a.apiHost+"/user/lists";return i.b(u,{name:t,gov_id:a,page:n,pagesize:r,role_id:s,mobile:l,active:c}).then(function(e){return e.data})}},{key:"govAdmin",value:function(e){var t=e.name,a=e.gov_id,n=e.page,r=e.pagesize,s=o.a.apiHost+"/user/get/"+a;return i.b(s,{name:t,page:n,pagesize:r}).then(function(e){return e.data})}},{key:"addGovAdmin",value:function(t){var a=t.name,n=t.mobile,r=t.passwd,s=t.gov_id,l=t.role_id,c=t.nickname,u=o.a.apiHost+"/user/create";return i.a(u,{name:a,mobile:n,passwd:r,gov_id:s,role_id:l,nickname:c}).then(function(t){if(t.code)return e.reject(t)})}},{key:"delAdmin",value:function(e){var t=e.id,a=o.a.apiHost+"/user/delete/"+t;return i.b(a)}},{key:"a",value:function(t){var a=t.pagesize,n=t.page,o=s+"/lists";return i.b(o,{pagesize:a,page:n}).then(function(t){return 0==t.code?t:e.reject(t)})}},{key:"getAdminInfo",value:function(t){var a=s+"/view/"+t;return i.b(a,{},!1).then(function(t){return 0==t.code?t.data:e.reject(t)})}},{key:"create",value:function(t){var a=t.role_id,n=t.name,o=t.mobile,r=t.email,l=t.password,c=s+"/create";return i.a(c,{role_id:a,name:n,mobile:o,email:r,password:l}).then(function(t){return 0==t.code?t.data:(xmview.showTip("error",t.message),e.reject(t))})}},{key:"update",value:function(t){var a=t.id,n=t.role_id,o=t.name,r=t.mobile,l=t.email,c=t.password,u=t.sex,d=t.avatar,p=t.address,m=s+"/update/"+a;return i.a(m,{role_id:n,name:o,mobile:r,email:l,password:c,sex:u,avatar:d,address:p}).then(function(t){if(t.code)return e.reject(t)})}},{key:"deleteGov",value:function(t){var a=s+"/delete/"+t;return i.b(a,{}).then(function(t){return 0==t.code?(xmview.showTip("success",t.message),t.data):(xmview.showTip("error",t.message),e.reject(t))})}},{key:"delete",value:function(t){var a=s+"/delete/"+t;return i.b(a,{}).then(function(t){if(t.code)return e.reject(t)})}},{key:"deleteMulty",value:function(e){var t=s+"/batchdel";return i.c(t,{ids:e})}},{key:"moveToCategoryMulty",value:function(e){var t=e.ids,a=e.category_id,n=s+"/batchmove";return i.c(n,{ids:t,category_id:a})}},{key:"setLesson",value:function(t){var a=t.id,n=t.data,o=s+"/"+a+"/setlesson";return i.c(o,n).then(function(t){if(t.code)return e.reject(t)})}},{key:"offline",value:function(e){var t=e.id,a=e.role_id,n=e.name,o=e.mobile,r=e.email,l=e.password,c=e.sex,u=e.avatar,d=e.address,p=e.disabled,m=s+"/update/"+t;return i.a(m,{id:t,role_id:a,name:n,mobile:o,email:r,password:l,sex:c,avatar:u,address:d,disabled:p})}},{key:"online",value:function(e){var t=s+"/update/"+e;return i.a(t,{disabled:0})}},{key:"getUploadUrl",value:function(e){var t=e.image,a=e.alias,n=s+"/upload";return i.a(n,{image:t,alias:a}).then(function(e){return e.data})}},{key:"getCompanyManageStat",value:function(){var e=s+"/user/loginlog/lists";return i.b(e).then(function(e){return e.data})}},{key:"getUserLoginlog",value:function(e){var t=e.page,a=e.pagesize,n=e.name,r=void 0===n?"":n,s=e.user_name,l=void 0===s?"":s,c=e.gov_id,u=e.role_id,d=void 0===u?"":u,p=e.date_start,m=void 0===p?"":p,g=e.date_end,v=void 0===g?"":g,f=o.a.apiHost+"/user/loginlog/lists";return i.b(f,{page:t,pagesize:a,name:r,user_name:l,gov_id:c,role_id:d,date_start:m,date_end:v}).then(function(e){return e})}},{key:"getReportUserlogin",value:function(e){var t=e.page,a=e.pagesize,n=e.name,r=void 0===n?"":n,s=e.user_name,l=void 0===s?"":s,c=e.gov_id,u=e.role_id,d=void 0===u?"":u,p=e.date_start,m=void 0===p?"":p,g=e.date_end,v=void 0===g?"":g,f=e.level,h=o.a.apiHost+"/report/userlogin/lists";return i.b(h,{page:t,pagesize:a,name:r,user_name:l,gov_id:c,role_id:d,date_start:m,date_end:v,level:f}).then(function(e){return e})}},{key:"getCourseHistory",value:function(e){var t=e.page,a=e.pagesize,n=e.user_id,o=e.gov_id,r=e.category_id,l=e.course_id,c=e.date_start,u=e.date_end,d=s+"/course/history/lists";return i.b(d,{page:t,pagesize:a,user_id:n,gov_id:o,category_id:r,course_id:l,date_start:c,date_end:u}).then(function(e){return e})}},{key:"getCompanyStatChart",value:function(e){var t=e.gov_id,a=e.date_start,n=e.date_end,o=s+"/stat/chart";return i.b(o,{gov_id:t,date_start:a,date_end:n}).then(function(e){return e.data})}}]),t}();t.a=new l}).call(t,a(7))},225:function(e,t,a){a(235);var n=a(10)(a(232),a(236),null,null);e.exports=n.exports},232:function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{requestCb:Function,changeCb:Function,value:[String,Number],placeholder:{default:"请选择"},disabled:{type:Boolean,default:!1},list:Object},data:function(){return{keyword:void 0,selectVal:this.value,data:null==this.list?[]:this.list.data,loading:!1,currPlaceholder:this.placeholder,input:null,isSearching:!1,isShowGetMore:!0}},watch:{data:function(e){e.length<1&&(this.currPlaceholder=this.placeholder),this.initGetMore(),this.loading=!1},placeholder:function(e){this.currPlaceholder=e},value:function(e){this.selectVal!=e&&(this.selectVal=e),null!=this.value&&this.currPlaceholder&&this.data.length<1&&this.data.push({id:this.value,name:this.placeholder})},list:function(){this.data=this.list.data.slice(0,15),this.value&&this.currPlaceholder&&this.data.length<1&&this.data.push({id:this.value,name:this.placeholder})}},created:function(){},mounted:function(){this.input=this.$refs.container.$el.querySelector("input")},methods:{filter:function(e){var t=this;this.loading=!0,this.keyword=e,this.requestCb(e,0).then(function(e){t.isShowGetMore=!0,t.processRequestRet(e,1)})},initGetMore:function(){var e=this,t=this;this.$nextTick(function(){var a=e.$refs.domLoading.parentNode;a.loaded||(a.loaded=!0,a.addEventListener("click",function(e){t.input.focus(),t.loading=!0,e=e||window.event,e.preventDefault(),e.stopPropagation(),t.requestCb(t.keyword,t.data.length).then(function(e){t.processRequestRet(e)}),a.loaded=!1},!0))})},handleChange:function(e){this.changeCb&&this.changeCb(e),this.$emit("input",e)},handleVisibleChange:function(e){var t=this;if(0==e)return void(this.currPlaceholder=this.placeholder);this.initGetMore(),(!this.data||this.data.length<1)&&(this.loading=!0,this.requestCb(this.keyword,0).then(function(e){t.processRequestRet(e)}))},processRequestRet:function(e){var t=this;if(0===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)){var a;e.data=e.data.filter(function(e){return e.id!=t.value}),(a=this.data).push.apply(a,n(e.data))}else this.data=e.data;this.isShowGetMore=this.data.length<e._exts.total}}}},233:function(e,t,a){t=e.exports=a(150)(!0),t.push([e.i,".component-form-selectscroll-more{color:#50bfff;cursor:pointer}","",{version:3,sources:["/home/zhaoyicheng/devspace/sys_ui/assets/src/views/component/form/SelectScroll.vue"],names:[],mappings:"AACA,kCAAkC,cAAc,cAAc,CAC7D",file:"SelectScroll.vue",sourcesContent:["\n.component-form-selectscroll-more{color:#50bfff;cursor:pointer\n}\n"],sourceRoot:""}])},235:function(e,t,a){var n=a(233);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(151)("0411b7de",n,!0)},236:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{ref:"container",attrs:{filterable:"",placeholder:e.currPlaceholder,clearable:!0,"no-data-text":"暂无数据",disabled:e.disabled,"no-match-text":"没有数据"},on:{"visible-change":e.handleVisibleChange,change:e.handleChange},model:{value:e.selectVal,callback:function(t){e.selectVal=t},expression:"selectVal"}},[a("el-option",{staticStyle:{height:"50px"},attrs:{disabled:!0,value:"xmystinputval"}},[a("el-input",{attrs:{placeholder:"搜索内容"},on:{change:e.filter}})],1),e._v(" "),e._l(e.data,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),e._v(" "),a("el-option",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"show",rawName:"v-show",value:!this.data||this.data.length<1,expression:"!this.data || this.data.length < 1"}],attrs:{value:"xmyst2",disabled:!0}},[a("span",[e._v("暂无数据")])]),e._v(" "),a("el-option",{directives:[{name:"show",rawName:"v-show",value:e.isShowGetMore&&this.data&&this.data.length>0,expression:"isShowGetMore && this.data && this.data.length > 0"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{value:"xmyst1",disabled:!0}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],ref:"domLoading",staticClass:"component-form-selectscroll-more"},[e._v("点击加载更多")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]},[e._v("加载中...")])])],2)},staticRenderFns:[]}},239:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(5),i=a(4);t.default={props:{url:{type:String,default:""},name:{type:String,default:"image"},onSuccess:Function,defaultImg:String,disabled:{type:Boolean,default:!1}},data:function(){return{uploadBtn:null,dialogVisible:!1,headers:void 0,forceShowUpload:!1,host:i.a.apiHost,currImg:[]}},watch:{currImg:function(e){e.length>0&&e[0].url?this.uploadBtn&&(this.uploadBtn.style.display="none"):this.uploadBtn.style.display="block"},defaultImg:function(e){this.currImg=e?[{name:e,url:e}]:[]},disabled:function(e){this.isShowDelAndPreview(!e),this.setDisabled(e)}},created:function(){this.currImg=this.defaultImg?[{name:this.defaultImg,url:this.defaultImg}]:[],this.headers={Authorization:"Bearer "+n.a.getAuthToken(),TwoStep:"Bearer "+n.a.getTwiceToken()}},activated:function(){this.uploadBtn&&(this.uploadBtn=this.$refs.container.querySelector(".el-upload--picture-card")),this.isShowDelAndPreview(!this.disabled),this.setDisabled(this.disabled)},mounted:function(){this.setDisabled(this.disabled),this.uploadBtn=this.$refs.container.querySelector(".el-upload--picture-card")},methods:{beforeUpload:function(){this.uploadBtn.style.display="none"},handleRemove:function(){var e=this;setTimeout(function(){e.clearFiles()},500)},removeImg:function(e,t){},handlePictureCardPreview:function(e){this.dialogVisible=!0},handleSuccess:function(e,t,a){0==e.code?this.onSuccess&&this.onSuccess(e):(xmview.showTip("error",e.message),this.handleRemove()),this.$refs.container.querySelector(".el-upload__input").value=null},clearFiles:function(){this.uploadBtn.style.display="block",this.isShowDefault=!0,this.currImg=[]},isShowDelAndPreview:function(e){var t=this.$refs.container.querySelector(".el-upload-list__item-actions");t&&(t.style.display=e?"block":"none")},setDisabled:function(e){e?this.$refs.container.querySelector("input").setAttribute("disabled","disabled"):this.$refs.container.querySelector("input").removeAttribute("disabled")}}}},242:function(e,t,a){t=e.exports=a(150)(!0),t.push([e.i,".component-upload-uploadimg .el-upload--picture-card i{left:50%;top:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%)}.component-upload-uploadimg{width:100px;height:100px;display:inline-block}.component-upload-uploadimg.uploaddisabled *{color:#ededed;border-color:#ededed!important;cursor:auto}.component-upload-uploadimg.uploaddisabled .el-upload-list__item-delete{display:none!important}.component-upload-uploadimg .el-progress,.component-upload-uploadimg .el-progress--circle,.component-upload-uploadimg .el-progress--circle .el-progress-circle,.component-upload-uploadimg .el-progress--circle>*,.component-upload-uploadimg .el-progress .el-progress-circle,.component-upload-uploadimg .el-progress>*,.component-upload-uploadimg .el-upload--picture-card,.component-upload-uploadimg .el-upload-list__item,.component-upload-uploadimg .el-upload-list__item-actions{width:100%!important;height:100%!important}.component-upload-uploadimg>*{height:100%}.component-upload-uploadimg .defaultImg{position:relative;border-radius:5px}.component-upload-uploadimg .defaultImg:hover span{opacity:1}.component-upload-uploadimg .defaultImg img{width:100%;height:100%}.component-upload-uploadimg .defaultImg span{border-radius:5px;opacity:0;position:absolute;width:100%;height:100%;top:0;left:0;background:rgba(0,0,0,.4);text-align:center;transition:all .3s ease}.component-upload-uploadimg .defaultImg span i{font-size:30px;color:#fff;display:block;-webkit-transform:translateY(-50%);transform:translateY(-50%);top:50%;position:absolute;width:100%;cursor:pointer}.component-upload-uploadimg .el-upload--picture-card{position:relative}.component-upload-uploadimg .el-upload--picture-card i{position:absolute}","",{version:3,sources:["/home/zhaoyicheng/devspace/sys_ui/assets/src/views/component/upload/UploadImg.vue"],names:[],mappings:"AACA,uDAAuD,SAAS,QAAQ,oDAAoD,2CAA2C,CACtK,AACD,4BAA4B,YAAY,aAAa,oBAAoB,CACxE,AACD,6CAA6C,cAAc,+BAAgC,WAAW,CACrG,AACD,wEAAwE,sBAAuB,CAC9F,AACD,2dAA2d,qBAAsB,qBAAsB,CACtgB,AACD,8BAA8B,WAAW,CACxC,AACD,wCAAwC,kBAAkB,iBAAiB,CAC1E,AACD,mDAAmD,SAAS,CAC3D,AACD,4CAA4C,WAAW,WAAW,CACjE,AACD,6CAA6C,kBAAkB,UAAU,kBAAkB,WAAW,YAAY,MAAM,OAAO,0BAA2B,kBAAkB,uBAAyB,CACpM,AACD,+CAA+C,eAAe,WAAW,cAAc,mCAAmC,2BAA2B,QAAQ,kBAAkB,WAAW,cAAc,CACvM,AACD,qDAAqD,iBAAiB,CACrE,AACD,uDAAuD,iBAAiB,CACvE",file:"UploadImg.vue",sourcesContent:["\n.component-upload-uploadimg .el-upload--picture-card i{left:50%;top:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%)\n}\n.component-upload-uploadimg{width:100px;height:100px;display:inline-block\n}\n.component-upload-uploadimg.uploaddisabled *{color:#ededed;border-color:#ededed !important;cursor:auto\n}\n.component-upload-uploadimg.uploaddisabled .el-upload-list__item-delete{display:none !important\n}\n.component-upload-uploadimg .el-upload--picture-card,.component-upload-uploadimg .el-upload-list__item-actions,.component-upload-uploadimg .el-upload-list__item,.component-upload-uploadimg .el-progress,.component-upload-uploadimg .el-progress--circle,.component-upload-uploadimg .el-progress .el-progress-circle,.component-upload-uploadimg .el-progress--circle .el-progress-circle,.component-upload-uploadimg .el-progress>*,.component-upload-uploadimg .el-progress--circle>*{width:100% !important;height:100% !important\n}\n.component-upload-uploadimg>*{height:100%\n}\n.component-upload-uploadimg .defaultImg{position:relative;border-radius:5px\n}\n.component-upload-uploadimg .defaultImg:hover span{opacity:1\n}\n.component-upload-uploadimg .defaultImg img{width:100%;height:100%\n}\n.component-upload-uploadimg .defaultImg span{border-radius:5px;opacity:0;position:absolute;width:100%;height:100%;top:0;left:0;background:rgba(0,0,0,0.4);text-align:center;transition:all 300ms ease\n}\n.component-upload-uploadimg .defaultImg span i{font-size:30px;color:#fff;display:block;-webkit-transform:translateY(-50%);transform:translateY(-50%);top:50%;position:absolute;width:100%;cursor:pointer\n}\n.component-upload-uploadimg .el-upload--picture-card{position:relative\n}\n.component-upload-uploadimg .el-upload--picture-card i{position:absolute\n}\n"],sourceRoot:""}])},248:function(e,t,a){var n=a(242);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(151)("1199aee1",n,!0)},249:function(e,t,a){a(248);var n=a(10)(a(239),a(250),null,null);e.exports=n.exports},250:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"container",staticClass:"component-upload-uploadimg",class:{uploaddisabled:e.disabled}},[a("el-upload",{attrs:{headers:e.headers,disabled:e.disabled,action:e.url,name:e.name,"list-type":"picture-card",multiple:!1,"before-upload":e.beforeUpload,"on-success":e.handleSuccess,"on-error":e.handleRemove,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"before-remove":e.removeImg,accept:"image/jpg,image/jpeg,image/png,image/gif","file-list":e.currImg}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{size:"tiny"},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[a("img",{attrs:{width:"100%",src:e.currImg.length>0&&e.currImg[0].url,alt:""}})])],1)},staticRenderFns:[]}},259:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{value:Array,closable:{type:Boolean,default:!0}},data:function(){return{currVal:this.value||[],inputVisible:!1,inputValue:void 0}},created:function(){},activated:function(){},watch:{value:function(e){(e!=this.currVal||e&&e.length!=this.currVal.length)&&(this.currVal=e)},currVal:function(e){e.length==this.currVal&&e==this.currVal||this.$emit("input",e)}},methods:{handleClose:function(e){this.currVal.splice(this.currVal.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var e=this.inputValue;e&&this.currVal.push(e),this.inputVisible=!1,this.inputValue=""}},components:{}}},261:function(e,t,a){t=e.exports=a(150)(!0),t.push([e.i,"#component-form-tags{display:inline-block}#component-form-tags .el-tag{margin-right:5px}#component-form-tags .input-new-tag{display:inline-block;width:80px!important}","",{version:3,sources:["/home/zhaoyicheng/devspace/sys_ui/assets/src/views/component/form/Tags.vue"],names:[],mappings:"AACA,qBAAqB,oBAAoB,CACxC,AACD,6BAA6B,gBAAgB,CAC5C,AACD,oCAAoC,qBAAqB,oBAAqB,CAC7E",file:"Tags.vue",sourcesContent:["\n#component-form-tags{display:inline-block\n}\n#component-form-tags .el-tag{margin-right:5px\n}\n#component-form-tags .input-new-tag{display:inline-block;width:80px !important\n}\n"],sourceRoot:""}])},266:function(e,t,a){var n=a(261);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(151)("0f7a44a6",n,!0)},267:function(e,t,a){a(266);var n=a(10)(a(259),a(268),null,null);e.exports=n.exports},268:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{attrs:{id:"component-form-tags"}},[e._l(e.currVal,function(t){return a("el-tag",{key:t,attrs:{closable:e.closable,"close-transition":!1},on:{close:function(a){e.handleClose(t)}}},[a("i",[e._v(e._s(t))])])}),e._v(" "),e.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{placeholder:"输入标签",size:"mini"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{attrs:{size:"small"},on:{click:e.showInput}},[e._v("添加标签")])],2)},staticRenderFns:[]}},271:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(225),i=a.n(n),o=a(219);t.default={props:{value:[String,Number],change:Function,placeholder:String,list:Array,disabled:{type:Boolean,default:!1},type:[String,Number]},data:function(){return{currVal:this.value,pageSize:15}},watch:{value:function(e,t){this.currVal!==e&&(this.currVal=e)}},methods:{fetchData:function(e,t){var a=this;return o.a.getSelectList({keyword:e,category:this.type,pagesize:this.pageSize,page:parseInt(t/this.pageSize)+1}).then(function(e){return a.$emit("changelist",e.data),e.data})},handleChange:function(e){this.currVal=e,this.$emit("input",e),this.$emit("change",e),this.change&&this.change()}},components:{SelectScroll:i.a}}},289:function(e,t,a){var n=a(10)(a(271),a(293),null,null);e.exports=n.exports},293:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("SelectScroll",{attrs:{changeCb:e.handleChange,requestCb:e.fetchData,placeholder:e.placeholder,list:e.list,disabled:e.disabled},model:{value:e.currVal,callback:function(t){e.currVal=t},expression:"currVal"}})},staticRenderFns:[]}},344:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=a(24),o=a(4),r=a(5),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=o.a.apiHost+"/video",c=function(){function e(){n(this,e)}return s(e,[{key:"search",value:function(e){var t=e.status,a=e.file_name,n=e.time_start,o=e.time_end,r=l+"/lists";return null!=t&&""!==t||(t=-1),i.b(r,{status:t,file_name:a,time_start:n,time_end:o}).then(function(e){return e})}},{key:"update",value:function(e){var t=e.id,a=e.name,n=e.tags,o=e.cover,r=e.duration,s=l+"/"+t+"/";return i.a(s,{name:a,tags:n,cover:o,duration:r})}},{key:"delete",value:function(e){var t=e.id,a=l+"/"+t;return i.d(a)}},{key:"deleteMulty",value:function(e){var t=e.id,a=l+"/batchdel";return i.a(a,{id:t})}},{key:"getOssToken",value:function(){var e=l+"/video/upload";return i.b(e,{}).then(function(e){return e.data})}},{key:"refreshStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=l+"/refresh/aliyun/status";return i.a(a,{id:t})}},{key:"getPreviewInfo",value:function(e){var t=l+"/"+e+"/preview";return i.b(t).then(function(e){return e.data})}},{key:"getVideo",value:function(e,t,a,n,o,r,s,c,u){var d=l+"/lists";return i.b(d,e,t,a,n,o,r,s,c,u).then(function(e){return e})}},{key:"create",value:function(e){var t=e.file_name,a=e.size,n=e.gov_id,o=e.tags,r=e.source_type,s=e.source_url,c=l+"/create";return i.a(c,{file_name:t,size:a,gov_id:n,tags:o,source_type:r,source_url:s})}},{key:"updateVideo",value:function(e){var t=e.file_name,a=e.gov_id,n=e.tags,o=e.cover,s=e.duration,c=e.material_id;a=a||r.a.getUserInfo().gov_id;var u=l+"/edit/"+c;return i.a(u,{file_name:t,gov_id:a,tags:n,cover:o,duration:s})}},{key:"getOssToken",value:function(){var e=o.a.apiHost+"/video/upload";return i.b(e).then(function(e){return e.data})}},{key:"refreshVideoStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.companyid,a=e.id;t=t||r.a.getUserInfo().company_id;var n=l+"/refresh/"+a;return i.a(n,{id:a}).then(function(e){return e})}},{key:"getUploadCoverUrl",value:function(){return l+"/cover"}},{key:"deleteVideo",value:function(e){var t=e.id,a=l+"/delete/"+t;return i.b(a)}},{key:"getVideoPreviewUrl",value:function(e){var t=l+"/get/"+e;return i.b(t).then(function(e){return e.data})}},{key:"auditVideo",value:function(e){var t=l+"/video/"+e.id+"/audit";return i.a(t,e)}}]),e}();t.a=new c},346:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(44),i=a(214);t.default={props:{value:[String,Number,Array],autoClear:{type:Boolean,default:!1},onchange:Function,placeholder:{type:String,default:"请选择"},showNotCat:{type:Boolean,default:!0},type:{type:String,default:""}},data:function(){return{loading:!1,options:[],currVal:this.value,govid:void 0,lastData:void 0}},watch:{value:function(e){this.setCurrVal(e)},currVal:function(e,t){this.$emit("input",e.length>0?parseInt(e[e.length-1]):e),this.onchange&&this.onchange(e)}},mounted:function(){var e=this;this.$refs.container.$el.addEventListener("click",function(){e.loading||e.options.length>0||(e.lastData?e.options=e.lastData:(e.loading=!0,i.a.search_cate({pid:0,level:-1,pagesize:-1}).then(function(t){t.data.forEach(function(t){e.options.push({data:t,label:t.name,value:t.id,children:t.ended?null:[]})}),e.loading=!1,xmview.setContentLoading(!1)})))})},deactivated:function(){this.autoClear&&this.options.length>0&&(this.lastData=this.options,this.options=[])},activated:function(){},methods:{setCurrVal:function(e){e||this.$refs.container.clearValue(new window.Event("click")),this.currVal!=e&&e&&(this.currVal=e)},handleItemChange:function(e){var t=this;if(!(e.length<1)){var a=n.a.findItem(this.options,e,"value");i.a.search_cate({pid:e[e.length-1],level:-1,pagesize:-1}).then(function(e){var n=e.data.map(function(e){return e.label=e.name,e.value=e.id,e.children=e.ended?null:[],e});a.children=n,t.loading=!1,xmview.setContentLoading(!1)})}},clearData:function(){this.lastData=this.options,this.options=[]}},components:{}}},349:function(e,t,a){t=e.exports=a(150)(!0),t.push([e.i,".course-select-container .el-icon-caret-bottom{text-align:center;text-align-last:center}","",{version:3,sources:["/home/zhaoyicheng/devspace/sys_ui/assets/src/views/component/select/CourseCategory.vue"],names:[],mappings:"AACA,+CAA+C,kBAAkB,sBAAsB,CACtF",file:"CourseCategory.vue",sourcesContent:["\n.course-select-container .el-icon-caret-bottom{text-align:center;text-align-last:center\n}\n"],sourceRoot:""}])},403:function(e,t,a){var n=a(349);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(151)("82049230",n,!0)},405:function(e,t,a){a(403);var n=a(10)(a(346),a(408),null,null);e.exports=n.exports},408:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-cascader",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"container",staticClass:"course-select-container",attrs:{options:e.options,"show-all-levels":!1,placeholder:e.placeholder,clearable:!0},on:{"active-item-change":e.handleItemChange,change:e.setCurrVal}})},staticRenderFns:[]}},428:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{url:String},data:function(){return{isShow:!1,title:""}},beforeCreate:function(){var e=this;if(!window.prismplayer){var t=0,a=document.createElement("script");a.src="//g.alicdn.com/de/prismplayer/1.5.7/prism-flash-min.js",a.onload=function(){++t>=2&&e.initPlayer()};var n=document.createElement("link");n.href="//g.alicdn.com/de/prismplayer/1.5.7/skins/default/index.css",n.rel="stylesheet",n.onload=function(){++t>=2&&e.initPlayer()},document.head.appendChild(a),document.head.appendChild(n)}},created:function(){this.initPlayer()},watch:{isShow:function(e){e&&this.initPlayer()}},methods:{show:function(e){this.title=e,this.isShow=!0},initPlayer:function(){var e=this;window.prismplayer&&this.url&&this.$nextTick(function(){new window.prismplayer({id:"J_prismPlayer",source:e.url,autoplay:!0,width:"100%",height:"360px"})})}},components:{}}},442:function(e,t,a){t=e.exports=a(150)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"VideoPreview.vue",sourceRoot:""}])},700:function(e,t,a){var n=a(442);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(151)("7661ecfb",n,!0)},705:function(e,t,a){a(700);var n=a(10)(a(428),a(712),null,null);e.exports=n.exports},712:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title||"视频预览"},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[a("div",{staticClass:"prism-player",attrs:{id:"J_prismPlayer"}})])},staticRenderFns:[]}},793:function(e,t,a){"use strict";function n(){return{material_id:void 0,file_name:"",gov_id:0,cover:void 0,duration:void 0,tags:[]}}function i(){return{gov_id:0,material_id:null,title:"",page:1,pagesize:15,create_start:"",create_end:"",status:-1,used:""}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(405),r=a.n(o),s=a(217),l=a.n(s),c=a(289),u=a.n(c),d=a(267),p=a.n(d),m=a(705),g=a.n(m),v=a(249),f=a.n(v),h=(a(4),a(344));t.default={data:function(){return{loadingData:!1,total:0,data:[],selectedIds:[],uploadImgUrl:"",fetchParam:i(),dialogAdd:{isShow:!1,title:"添加课程",confirmFn:{}},videoModel:n(),videoUrl:"",row:""}},watch:{"fetchParam.pagesize":function(){this.fetchData()},"fetchParam.page":function(){this.fetchData()}},created:function(){this.uploadImgUrl=h.a.getUploadCoverUrl()},activated:function(){this.fetchData().then(function(){xmview.setContentLoading(!1)})},methods:{initFetchParam:function(){this.fetchParam=i()},fetchData:function(){var e=this;return this.loadingData=!0,this.fetchParam.file_name&&(this.fetchParam.page=1),h.a.getVideo(this.fetchParam).then(function(t){e.data=t.data,e.total=t._exts.total,e.loadingData=!1})},selectRow:function(e){var t=[];e.forEach(function(e){t.push(e.id)}),this.selectedIds=t},add:function(){this.dialogAdd.isShow=!0,this.videoModel=n()},edit:function(e,t){var a=this;this.dialogAdd.isShow=!0,this.videoModel=JSON.parse(JSON.stringify(t)),this.videoModel.tags=this.videoModel.tags?this.videoModel.tags.split(","):[],this.dialogAdd.confirmFn=function(){h.a.updateVideo(a.videoModel).then(function(){xmview.showTip("success","操作成功"),a.fetchData(),a.dialogAdd.isShow=!1})}},del:function(e,t){var a=this;xmview.showDialog('你将要删除视频 <span style="color:red">'+t.file_name+"</span> 操作不可恢复确认吗?",function(){a.loadingData=!0,h.a.deleteVideo({id:t.material_id}).then(function(){xmview.showTip("success","操作成功"),a.data.splice(e,1),a.loadingData=!1}).catch(function(){a.loadingData=!1})})},delMulti:function(){var e=this;xmview.showDialog("你将要删除选中的视频，操作不可恢复确认吗?",function(){e.loadingData=!0,h.a.deleteVideoMulty({id:e.selectedIds.join(",")}).then(function(){xmview.showTip("success","操作成功"),e.fetchData()})})},preview:function(e,t){var a=this;h.a.getVideoPreviewUrl(t.material_id).then(function(e){a.videoUrl=e.video,a.row=t,a.$refs.videoPreview.show(t.file_name)})},handleOnUploaded:function(e){this.videoModel.cover=e.data.url},refreshStatus:function(e,t){h.a.refreshVideoStatus({id:t.material_id}).then(function(e){1===e.code?t.status=1:t.status=0})}},components:{CourseCategorySelect:r.a,DateRange:l.a,IndustryCompanySelect:u.a,vTags:p.a,UploadImg:f.a,VideoPreview:g.a}}},899:function(e,t,a){t=e.exports=a(150)(!0),t.push([e.i,'#course-manage-video-container{padding:15px;position:relative;border:1px solid #ededed;border-radius:5px;background:#fff}#course-manage-video-container:after{content:"";clear:both;display:block}#course-manage-video-container .pagin{float:right;margin-top:15px}.text-blue{color:#20a0ff}.text-light-blue{color:#58b7ff}.text-dark-blue{color:#1d8ce0}.text-success{color:#13ce66}.text-warning{color:#f7ba2a}.text-danger{color:#ff4949}#course-manage-video-container .search>section{margin-left:10px;margin-bottom:14px;display:inline-block;margin-right:10px}#course-manage-video-container .search>section>span,#course-manage-video-container .search>section i{margin-right:2px}#course-manage-video-container .search>section>*{vertical-align:middle;display:inline-block}#course-manage-video-container .search .el-input{width:auto}.keyword-container{width:90%;margin-left:5%;margin-bottom:5px}#course-manage-video-container .manage-container{position:absolute;right:0;top:-50px}#course-manage-video-container .manage-container>*{color:#fff;border-radius:5px}#course-manage-video-container .manage-container .add{background:#0cf}#course-manage-video-container .bottom-manage{margin-top:15px;display:inline-block}',"",{version:3,sources:["/home/zhaoyicheng/devspace/sys_ui/assets/src/views/course/manage/Video.vue"],names:[],mappings:"AACA,+BAA+B,aAAa,kBAAkB,yBAAyB,kBAAkB,eAAe,CACvH,AACD,qCAAqC,WAAW,WAAW,aAAa,CACvE,AACD,sCAAsC,YAAY,eAAe,CAChE,AAGD,WAAW,aAAa,CACvB,AACD,iBAAiB,aAAa,CAC7B,AACD,gBAAgB,aAAa,CAC5B,AACD,cAAc,aAAa,CAC1B,AACD,cAAc,aAAa,CAC1B,AACD,aAAa,aAAa,CACzB,AACD,+CAA+C,iBAAiB,mBAAmB,qBAAqB,iBAAiB,CACxH,AACD,qGAAqG,gBAAgB,CACpH,AACD,iDAAiD,sBAAsB,oBAAoB,CAC1F,AACD,iDAAiD,UAAU,CAC1D,AACD,mBAAmB,UAAU,eAAe,iBAAiB,CAC5D,AACD,iDAAiD,kBAAkB,QAAQ,SAAS,CACnF,AACD,mDAAmD,WAAW,iBAAiB,CAC9E,AACD,sDAAsD,eAAe,CACpE,AACD,8CAA8C,gBAAgB,oBAAoB,CACjF",file:"Video.vue",sourcesContent:["\n#course-manage-video-container{padding:15px;position:relative;border:1px solid #ededed;border-radius:5px;background:#fff\n}\n#course-manage-video-container:after{content:'';clear:both;display:block\n}\n#course-manage-video-container .pagin{float:right;margin-top:15px\n}\n#course-manage-video-container .bottom-manage{margin-top:15px\n}\n.text-blue{color:#20A0FF\n}\n.text-light-blue{color:#58B7FF\n}\n.text-dark-blue{color:#1D8CE0\n}\n.text-success{color:#13CE66\n}\n.text-warning{color:#F7BA2A\n}\n.text-danger{color:#FF4949\n}\n#course-manage-video-container .search>section{margin-left:10px;margin-bottom:14px;display:inline-block;margin-right:10px\n}\n#course-manage-video-container .search>section>span,#course-manage-video-container .search>section i{margin-right:2px\n}\n#course-manage-video-container .search>section>*{vertical-align:middle;display:inline-block\n}\n#course-manage-video-container .search .el-input{width:auto\n}\n.keyword-container{width:90%;margin-left:5%;margin-bottom:5px\n}\n#course-manage-video-container .manage-container{position:absolute;right:0;top:-50px\n}\n#course-manage-video-container .manage-container>*{color:#fff;border-radius:5px\n}\n#course-manage-video-container .manage-container .add{background:#0cf\n}\n#course-manage-video-container .bottom-manage{margin-top:15px;display:inline-block\n}\n"],sourceRoot:""}])},960:function(e,t,a){var n=a(899);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(151)("3333883c",n,!0)}});
//# sourceMappingURL=15.046ab1532074fabacf64.js.map