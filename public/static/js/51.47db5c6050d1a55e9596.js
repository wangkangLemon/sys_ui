webpackJsonp([51],{1036:function(e,t,a){var n=a(936);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(110)("7d46d5f3",n,!0)},1152:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{attrs:{id:"sys-form"}},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"课程简介",name:"first"}},[a("el-form",{ref:"formFirst",attrs:{"label-width":"120px",model:e.fetchParam}},[a("el-form-item",{attrs:{label:"课程介绍"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:e.fetchParam.description,callback:function(t){e.fetchParam.description=t},expression:"fetchParam.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"课程封面图"}},[a("UploadImg",{attrs:{defaultImg:e.fetchParam.image,url:e.uploadImgUrl,onSuccess:function(t){return e.fetchParam.image=t.data.url},data:e.uploadextraData}})],1),e._v(" "),a("el-form-item",{attrs:{label:"课程标签"}},[a("vTags",{model:{value:e.courseTags,callback:function(t){e.courseTags=t},expression:"courseTags"}})],1)],1),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.btnNextClick}},[a("i",[e._v("下一步")])])],1),e._v(" "),a("el-tab-pane",{attrs:{label:"概述",name:"second"}},[e._l(e.fetchParam.summary,function(t,n){return a("el-form",{key:n,ref:"test",refInFor:!0,attrs:{"label-width":"120px",model:t}},[a("el-form-item",{attrs:{label:t.name}},[a("el-input",{attrs:{placeholder:"请填写内容","auto-complete":"off"},model:{value:t.value,callback:function(e){t.value=e},expression:"item.value"}}),e._v(" "),a("i",{staticClass:"m"},[e._v(e._s(t.must?"(必须填写)":""))])],1)],1)}),e._v(" "),a("div",{staticClass:"bottom-btns"},[a("el-button",{on:{click:e.btnPreClick}},[e._v("上一步")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.btnNextClick}},[e._v("下一步")])],1)],2),e._v(" "),a("el-tab-pane",{attrs:{label:"属性",name:"three"}},[e._l(e.fetchParam.attribute,function(t,n){return a("el-form",{key:n,ref:"test",refInFor:!0,attrs:{"label-width":"120px",model:t}},[a("el-form-item",{attrs:{label:t.name}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:6},placeholder:"请填写内容","auto-complete":"off"},model:{value:t.value,callback:function(e){t.value=e},expression:"item.value"}}),e._v(" "),a("i",{staticClass:"m"},[e._v(e._s(t.must?"(必须填写)":""))])],1)],1)}),e._v(" "),a("div",{staticClass:"bottom-btns"},[a("el-button",{on:{click:e.btnPreClick}},[e._v("上一步")]),e._v(" "),a("el-button",{staticClass:"submit",attrs:{type:"primary",disabled:e.isDisable},on:{click:e.handleSubmit}},[e._v("发布")])],1)],2)],1)],1)},staticRenderFns:[]}},126:function(e,t,a){a(1036);var n=a(5)(a(839),a(1152),null,null);e.exports=n.exports},199:function(e,t,a){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=a(6),i=a(1),r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=i.a.apiHost+"/gov",u=function(){function t(){n(this,t)}return r(t,[{key:"getSelectList",value:function(e){var t=e.id,a=void 0===t?"":t,n=e.name,i=void 0===n?"":n,r=e.category,u=void 0===r?"":r,l=e.pagesize,c=void 0===l?"":l,d=e.page,m=void 0===d?"":d,p=e.pid,v=void 0===p?"":p,g=e.province_id,f=void 0===g?"":g,h=e.city_id,y=void 0===h?"":h,A=e.area_id,b=void 0===A?"":A,_=e.town_id,C=void 0===_?"":_,x=e.village_id,w=void 0===x?"":x,k=e.deleted,B=void 0===k?"":k,I=s+"/lists";return o.b(I,{id:a,name:i,category:u,page:m,pagesize:c,pid:v,province_id:f,city_id:y,area_id:b,town_id:C,village_id:w,deleted:B},!1).then(function(e){return e})}},{key:"postSelectList",value:function(e){var t=e.id,a=void 0===t?"":t,n=e.name,i=void 0===n?"":n,r=e.category,u=void 0===r?"":r,l=e.pagesize,c=void 0===l?"":l,d=e.page,m=void 0===d?"":d,p=e.pid,v=void 0===p?"":p,g=e.province_id,f=void 0===g?"":g,h=e.city_id,y=void 0===h?"":h,A=e.area_id,b=void 0===A?"":A,_=e.town_id,C=void 0===_?"":_,x=e.village_id,w=void 0===x?"":x,k=e.deleted,B=void 0===k?"":k,I=s+"/lists";return o.a(I,{id:a,name:i,category:u,page:m,pagesize:c,pid:v,province_id:f,city_id:y,area_id:b,town_id:C,village_id:w,deleted:B},!1).then(function(e){return e.data})}},{key:"getGovInfo",value:function(e){var t=s+"/get/"+e;return o.b(t).then(function(e){return e.data})}},{key:"addGov",value:function(t){var a=t.category,n=t.pid,i=t.province_id,r=t.city_id,u=t.area_id,l=t.town_id,c=t.village_id,d=t.name,m=t.concact,p=t.mobile,v=t.email,g=t.mobile_title,f=t.tel,h=t.zip,y=t.fax,A=t.url,b=t.address,_=t.description,C=s+"/create";return o.a(C,{category:a,pid:n,province_id:i,city_id:r,area_id:u,town_id:l,village_id:c,name:d,concact:m,mobile:p,email:v,mobile_title:g,tel:f,zip:h,fax:y,url:A,address:b,description:_}).then(function(t){if(t.code)return e.reject(t)})}},{key:"editGov",value:function(e){var t=s+"/edit/"+e;return o.b(t).then(function(e){return e.data})}},{key:"updateGov",value:function(t){var a=t.gov_id,n=t.category,i=t.pid,r=t.province_id,u=t.city_id,l=t.area_id,c=t.town_id,d=t.village_id,m=t.name,p=t.concact,v=t.mobile,g=t.email,f=t.mobile_title,h=t.tel,y=t.zip,A=t.fax,b=t.url,_=t.address,C=t.description,x=s+"/edit/"+a;return o.a(x,{category:n,pid:i,province_id:r,city_id:u,area_id:l,town_id:c,village_id:d,name:m,concact:p,mobile:v,email:g,mobile_title:f,tel:h,zip:y,fax:A,url:b,address:_,description:C}).then(function(t){if(t.code)return e.reject(t)})}},{key:"govAdminList",value:function(e){var t=e.name,a=e.gov_id,n=e.page,r=e.pagesize,s=e.role_id,u=e.mobile,l=e.active,c=i.a.apiHost+"/user/lists";return o.b(c,{name:t,gov_id:a,page:n,pagesize:r,role_id:s,mobile:u,active:l}).then(function(e){return e})}},{key:"govAdmin",value:function(e){var t=e.name,a=e.gov_id,n=e.page,r=e.pagesize,s=i.a.apiHost+"/user/get/"+a;return o.b(s,{name:t,page:n,pagesize:r}).then(function(e){return e.data})}},{key:"addGovAdmin",value:function(t){var a=i.a.apiHost+"/user/create";return o.a(a,t).then(function(t){if(t.code)return e.reject(t)})}},{key:"delAdmin",value:function(e){var t=e.id,a=i.a.apiHost+"/user/delete/"+t;return o.a(a)}},{key:"a",value:function(t){var a=t.pagesize,n=t.page,i=s+"/lists";return o.b(i,{pagesize:a,page:n}).then(function(t){return 0==t.code?t:e.reject(t)})}},{key:"getAdminInfo",value:function(t){var a=s+"/view/"+t;return o.b(a,{},!1).then(function(t){return 0==t.code?t.data:e.reject(t)})}},{key:"create",value:function(t){var a=t.role_id,n=t.name,i=t.mobile,r=t.email,u=t.password,l=s+"/create";return o.a(l,{role_id:a,name:n,mobile:i,email:r,password:u}).then(function(t){return 0==t.code?t.data:(xmview.showTip("error",t.message),e.reject(t))})}},{key:"update",value:function(t){var a=t.id,n=t.role_id,i=t.name,r=t.mobile,u=t.email,l=t.password,c=t.sex,d=t.avatar,m=t.address,p=s+"/update/"+a;return o.a(p,{role_id:n,name:i,mobile:r,email:u,password:l,sex:c,avatar:d,address:m}).then(function(t){if(t.code)return e.reject(t)})}},{key:"deleteGov",value:function(t){var a=s+"/delete/"+t;return o.a(a,{}).then(function(t){return 0==t.code?(xmview.showTip("success",t.message),t.data):(xmview.showTip("error",t.message),e.reject(t))})}},{key:"delete",value:function(t){var a=s+"/delete/"+t;return o.a(a,{}).then(function(t){if(t.code)return e.reject(t)})}},{key:"deleteMulty",value:function(e){var t=s+"/batchdel";return o.c(t,{ids:e})}},{key:"moveToCategoryMulty",value:function(e){var t=e.ids,a=e.category_id,n=s+"/batchmove";return o.c(n,{ids:t,category_id:a})}},{key:"setLesson",value:function(t){var a=t.id,n=t.data,i=s+"/"+a+"/setlesson";return o.c(i,n).then(function(t){if(t.code)return e.reject(t)})}},{key:"offline",value:function(e){var t=e.id,a=e.role_id,n=e.name,i=e.mobile,r=e.email,u=e.password,l=e.sex,c=e.avatar,d=e.address,m=e.disabled,p=s+"/update/"+t;return o.a(p,{id:t,role_id:a,name:n,mobile:i,email:r,password:u,sex:l,avatar:c,address:d,disabled:m})}},{key:"online",value:function(e){var t=s+"/update/"+e;return o.a(t,{disabled:0})}},{key:"getUploadUrl",value:function(e){var t=e.image,a=e.alias,n=s+"/upload";return o.a(n,{image:t,alias:a}).then(function(e){return e.data})}},{key:"getCompanyManageStat",value:function(){var e=s+"/user/loginlog/lists";return o.b(e).then(function(e){return e.data})}},{key:"getUserLoginlog",value:function(e){var t=e.page,a=e.pagesize,n=e.name,r=void 0===n?"":n,s=e.user_name,u=void 0===s?"":s,l=e.gov_id,c=e.role_id,d=void 0===c?"":c,m=e.date_start,p=void 0===m?"":m,v=e.date_end,g=void 0===v?"":v,f=i.a.apiHost+"/user/loginlog/lists";return o.b(f,{page:t,pagesize:a,name:r,user_name:u,gov_id:l,role_id:d,date_start:p,date_end:g}).then(function(e){return e})}},{key:"getReportUserlogin",value:function(e){var t=e.page,a=e.pagesize,n=e.name,r=void 0===n?"":n,s=e.user_name,u=void 0===s?"":s,l=e.gov_id,c=e.role_id,d=void 0===c?"":c,m=e.date_start,p=void 0===m?"":m,v=e.date_end,g=void 0===v?"":v,f=e.level,h=i.a.apiHost+"/report/userlogin/lists";return o.b(h,{page:t,pagesize:a,name:r,user_name:u,gov_id:l,role_id:d,date_start:p,date_end:g,level:f}).then(function(e){return e})}},{key:"getCourseHistory",value:function(e){var t=e.page,a=e.pagesize,n=e.user_id,i=e.gov_id,r=e.category_id,u=e.course_id,l=e.date_start,c=e.date_end,d=s+"/course/history/lists";return o.b(d,{page:t,pagesize:a,user_id:n,gov_id:i,category_id:r,course_id:u,date_start:l,date_end:c}).then(function(e){return e})}},{key:"getCompanyStatChart",value:function(e){var t=e.gov_id,a=e.date_start,n=e.date_end,i=s+"/stat/chart";return o.b(i,{gov_id:t,date_start:a,date_end:n}).then(function(e){return e.data})}}]),t}();t.a=new u}).call(t,a(2))},203:function(e,t,a){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=a(6),i=a(3),r=a(1),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=r.a.apiHost+"/course",l=function(){function t(){n(this,t)}return s(t,[{key:"getCategoryTree",value:function(e){var t=e.id,a=void 0===t?"tree":t,n=e.type,i=e.filter,r=void 0===i||i,s=e.pid,l=void 0===s?-1:s,c=e.level,d=void 0===c?-1:c,m=e.pagesize,p=void 0===m?-1:m,v=e.category_type,g=u+"/category/lists";return o.b(g,{id:a,filter:r,type:n,pid:l,level:d,pagesize:p,category_type:v}).then(function(e){return e})}},{key:"search_cate",value:function(t){var a=t.id,n=t.name,i=t.category_type,r=t.pid,s=t.level,l=t.ended,c=t.disabled,d=t.page,m=t.pagesize,p=u+"/category/lists";return o.b(p,{id:a,name:n,category_type:i,pid:r,level:s,ended:l,disabled:c,page:d,pagesize:m},!1).then(function(t){return 0==t.code?t:e.reject(t)})}},{key:"create_cate",value:function(t){var a=t.name,n=t.sort,i=t.sort_type,r=t.category_type,s=t.pid,l=t.ended,c=t.image,d=t.category_subject_num,m=t.course_sort,p={name:a,sort:n,sort_type:i,category_type:r,pid:s,ended:l,image:c,category_subject_num:d,course_sort:m};0===s&&delete p.pid;var v=u+"/category/create";return o.a(v,p).then(function(t){return 0==t.code?(xmview.showTip("success",t.message),t.data):(xmview.showTip("error",t.message),e.reject(t))})}},{key:"update_cate",value:function(t){var a=t.id,n=t.name,i=t.image,r=t.category_type,s=t.sort,l=t.sort_type,c=t.ended,d=t.disabled,m=t.pid,p=t.category_subject_num,v=t.course_sort,g=u+"/category/edit/"+a;return o.a(g,{name:n,image:i,category_type:r,sort:s,sort_type:l,ended:c,disabled:d,pid:m,category_subject_num:p,course_sort:v}).then(function(t){if(t.code)return e.reject(t)})}},{key:"updateCategory",value:function(e){var t=e.govid,a=e.type,n=e.name,s=e.image,u=e.sort,l=e.id;t=t||i.a.getUserInfo().company_id;var c=r.a.apiHost+"/com/"+t+"/course/category/"+l;return o.a(c,{type:a,name:n,image:s,sort:u})}},{key:"moveCategory",value:function(e){var t=e.id,a=e.to,n=r.a.apiHost+"/course/category/"+t+"/move";return o.a(n,{to:a})}},{key:"moveCategoryContent",value:function(e){var t=e.id,a=e.to,n=r.a.apiHost+"/course/category/"+t+"/move/content";return o.a(n,{to:a})}},{key:"getUploadCategoryImgUrl",value:function(){return r.a.apiHost+"/common/upload/file"}},{key:"delete_cate",value:function(t){var a=u+"/category/delete/"+t;return o.a(a,{}).then(function(t){return 0==t.code?(xmview.showTip("success",t.message),t.data):(xmview.showTip("error",t.message),e.reject(t))})}},{key:"courseList",value:function(e,t,a){var n=u+"/search/name";return o.b(n,{keyword:e,page:t,pagesize:a}).then(function(e){return e.data})}},{key:"getPublicCourselist",value:function(t){var a=t.course_name,n=void 0===a?"":a,i=t.status,r=t.category_id,s=t.need_testing,l=t.create_start,c=t.create_end,d=t.page,m=t.pagesize,p=u+"/lists";return o.b(p,{course_name:n,status:i,category_id:r,need_testing:s,create_start:l,create_end:c,page:d,pagesize:m},!1).then(function(t){return 0==t.code?t:e.reject(t)})}},{key:"addCourse",value:function(t){var a=t.category_id,n=t.experts_id,i=t.course_name,r=t.image,s=t.description,l=t.tags,c=t.type,d=t.material_type,m=t.material_id,p=t.need_testing,v=(t.status,t.sort),g=t.share,f=t.noaccess,h=u+"/create";return o.a(h,{category_id:a,experts_id:n,course_name:i,image:r,description:s,tags:l,type:c,material_type:d,material_id:m,need_testing:p,sort:v,share:g,noaccess:f}).then(function(t){return 0==t.code?t.data:e.reject(t)})}},{key:"getCourseInfo",value:function(e){var t=e.course_id,a=(i.a.getUserInfo().company_id,r.a.apiHost+"/course/get/"+t);return o.b(a).then(function(e){return e.data})}},{key:"editCourse",value:function(e){var t=e.govid,a=e.contentid,n=e.category_id,s=e.experts_id,u=e.course_name,l=e.image,c=e.tags,d=e.type,m=e.material_type,p=e.material_id,v=e.description,g=e.need_testing,f=e.status,h=e.limit_time,y=e.limit_repeat,A=e.score_pass,b=e.sort,_=e.share,C=e.noaccess;t=t||i.a.getUserInfo().company_id;var x=r.a.apiHost+"/course/edit/"+a;return o.a(x,{category_id:n,experts_id:s,course_name:u,image:l,tags:c,type:d,material_type:m,material_id:p,description:v,need_testing:g,limit_time:h,status:f,limit_repeat:y,score_pass:A,sort:b,share:_,noaccess:C}).then(function(e){return e.data})}},{key:"offlineCourse",value:function(e){var t=e.id,a=e.status,n=r.a.apiHost+"/course/edit/"+t;return o.a(n,{status:a})}},{key:"commonUploadImage",value:function(){return r.a.apiHost+"/common/upload/file"}},{key:"commonUploadImageBase",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"section",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"category",n=r.a.apiHost+"/common/upload/file";return o.a(n,e,t,a).then(function(e){return xmview.showTip("success",e.message),e.data})}},{key:"commonUploadImageBase",value:function(e){var t=e.image,a=e.alias,n=void 0===a?Date.now()+".jpg":a,i=e.biz,s=void 0===i?"course":i,u=e.extpath,l=r.a.apiHost+"/common/upload/base64";return o.a(l,{image:t,alias:n,biz:s,extpath:u}).then(function(e){return xmview.showTip("success",e.message),e.data})}},{key:"commonUploadImageBaseSection",value:function(e){var t=e.image,a=e.alias,n=void 0===a?Date.now()+".jpg":a,i=e.biz,s=void 0===i?"section":i,u=e.extpath,l=r.a.apiHost+"/common/upload/base64";return o.a(l,{image:t,alias:n,biz:s,extpath:u}).then(function(e){return xmview.showTip("success",e.message),e.data})}},{key:"uploadCover4addCourse",value:function(e){var t=e.image,a=e.alias,n=void 0===a?Date.now()+".jpg":a,i=r.a.apiHost+"/course/subject/image";return o.a(i,{image:t,alias:n}).then(function(e){return e.data})}},{key:"deleteCourse",value:function(e){var t=e.govid,a=e.course_id;t=t||i.a.getUserInfo().company_id;var n=r.a.apiHost+"/course/delete/"+a;return o.a(n,{})}},{key:"deleteCourseMulty",value:function(e){var t=e.govid,a=e.id;t=t||i.a.getUserInfo().company_id;var n=r.a.apiHost+"/com/"+t+"/course/batchdel";return o.a(n,{id:a})}},{key:"deleteVideoMulty",value:function(e){var t=e.id,a=u+"/video/batchdel";return o.a(a,{id:t})}},{key:"moveCourseToCategoryMulty",value:function(e){var t=e.govid,a=e.id,n=e.catid;t=t||i.a.getUserInfo().company_id;var s=r.a.apiHost+"/com/"+t+"/course/batchmove";return o.a(s,{id:a,catid:n})}},{key:"getCourseDocUploadUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.govid;return t=t||i.a.getUserInfo().company_id,r.a.apiHost+"/course/doc/upload"}},{key:"getTestingInfo",value:function(e){var t=e.course_id,a=r.a.apiHost+"/course/subject/listoptions";return o.b(a,{course_id:t}).then(function(e){return e.data})}},{key:"addOrEditTesting",value:function(t){var a=t.govid,n=t.course_id,s=t.subjects;a=a||i.a.getUserInfo().company_id;var u=r.a.apiHost+"/course/subject/updates/"+n;return o.a(u,s).then(function(t){return 0==t.code?(xmview.showTip("success",t.message),t.data):(xmview.showTip("error",t.message),e.reject(t))})}},{key:"delCourse",value:function(e){var t=e.course_id,a=e.id,n=r.a.apiHost+"/course/subject/delete/"+t+"/"+a;return o.a(n,{}).then(function(e){return e.data})}},{key:"getAlbumList",value:function(e){var t=e.govid,a=e.page,n=e.pagesize,s=e.keyword,u=e.create_start,l=e.create_end;t=t||i.a.getUserInfo().company_id;var c=r.a.apiHost+"/com/"+t+"/course/album/search";return o.b(c,{page:a,pagesize:n,keyword:s,create_start:u,create_end:l}).then(function(e){return e.data})}},{key:"deleteAlbum",value:function(e){var t=e.govid,a=e.id;t=t||i.a.getUserInfo().company_id;var n=r.a.apiHost+"/com/"+t+"/course/album/"+a;return o.a(n,{})}},{key:"deleteAlbumMulty",value:function(e){var t=e.govid,a=e.ids;t=t||i.a.getUserInfo().company_id;var n=r.a.apiHost+"/com/"+t+"/course/album/batchdel";return o.a(n,{id:a.join(",")})}},{key:"addAlbum",value:function(e){var t=e.govid,a=e.course_id,n=e.name;t=t||i.a.getUserInfo().company_id;var s=r.a.apiHost+"/com/"+t+"/course/album/add";return o.a(s,{course_id:a.join(","),name:n})}},{key:"editAlbum",value:function(e){var t=e.govid,a=e.course_id,n=e.name;t=t||i.a.getUserInfo().company_id;var s=r.a.apiHost+"/com/"+t+"/course/album/edit";return o.a(s,{course_id:a.join(","),name:n})}},{key:"getCourseSubject",value:function(e){var t=e.contentid,a=u+"/"+t+"/subject/stat";return o.b(a).then(function(e){return e.data})}},{key:"getSubjectAnswer",value:function(e){var t=e.c_id,a=e.s_id,n=u+"/"+t+"/subject/"+a+"/stat";return o.b(n).then(function(e){return e.data.stat})}},{key:"addHerbal",value:function(t){var a=t.category_id,n=t.data,i=t.noJson,s=r.a.apiHost+"/course/herbal/create/"+a;return o.a(s,n,i).then(function(t){return 0==t.code?(xmview.showTip("success",t.message),t.data):(xmview.showTip("error",t.message),e.reject(t))})}},{key:"getHerbal",value:function(e){var t=e.contentid,a=r.a.apiHost+"/course/herbal/get/"+t;return o.b(a).then(function(e){return e.data})}},{key:"editHerbal",value:function(t){var a=t.category_id,n=t.id,i=t.data,s=t.noJson,u=r.a.apiHost+"/course/herbal/edit/"+a+"/"+n;return o.a(u,i,s).then(function(t){return 0==t.code?(xmview.showTip("success",t.message),t.data):(xmview.showTip("error",t.message),e.reject(t))})}},{key:"getImgTxt",value:function(e){var t=e.contentid,a=r.a.apiHost+"/course/article/get/"+t;return o.b(a).then(function(e){return e.data})}},{key:"createImgTxt",value:function(t){var a=t.category_id,n=t.data,i=t.noJson,s=r.a.apiHost+"/course/article/create/"+a;return o.a(s,n,i).then(function(t){return 0==t.code?(xmview.showTip("success",t.message),t.data):(xmview.showTip("error",t.message),e.reject(t))})}},{key:"editImgTxt",value:function(t){var a=t.category_id,n=t.id,i=t.data,s=t.noJson,u=r.a.apiHost+"/course/article/edit/"+a+"/"+n;return o.a(u,i,s).then(function(t){return 0==t.code?(xmview.showTip("success",t.message),t.data):(xmview.showTip("error",t.message),e.reject(t))})}}]),t}();t.a=new l}).call(t,a(2))},220:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(3),o=a(1);t.default={props:{url:{type:String,default:""},name:{type:String,default:"image"},onSuccess:Function,defaultImg:String,disabled:{type:Boolean,default:!1},data:{type:Object,default:function(){return{biz:"",extpath:""}}}},data:function(){return{uploadBtn:null,dialogVisible:!1,headers:void 0,forceShowUpload:!1,host:o.a.apiHost,currImg:[]}},watch:{currImg:function(e){e.length>0&&e[0].url?this.uploadBtn&&(this.uploadBtn.style.display="none"):this.uploadBtn.style.display="block"},defaultImg:function(e){this.currImg=e?[{name:e,url:e}]:[]},disabled:function(e){this.isShowDelAndPreview(!e),this.setDisabled(e)}},created:function(){this.currImg=this.defaultImg?[{name:this.defaultImg,url:this.defaultImg}]:[],this.headers={Authorization:"Bearer "+n.a.getAuthToken(),TwoStep:"Bearer "+n.a.getTwiceToken()}},activated:function(){this.uploadBtn&&(this.uploadBtn=this.$refs.container.querySelector(".el-upload--picture-card")),this.isShowDelAndPreview(!this.disabled),this.setDisabled(this.disabled)},mounted:function(){this.setDisabled(this.disabled),this.uploadBtn=this.$refs.container.querySelector(".el-upload--picture-card")},methods:{beforeUpload:function(){this.uploadBtn.style.display="none"},handleRemove:function(){var e=this;setTimeout(function(){e.clearFiles()},500)},removeImg:function(e,t){},handlePictureCardPreview:function(e){this.dialogVisible=!0},handleSuccess:function(e,t,a){0==e.code?this.onSuccess&&this.onSuccess(e):(xmview.showTip("error",e.message),this.handleRemove()),this.$refs.container.querySelector(".el-upload__input").value=null},clearFiles:function(){this.uploadBtn.style.display="block",this.isShowDefault=!0,this.currImg=[]},isShowDelAndPreview:function(e){var t=this.$refs.container.querySelector(".el-upload-list__item-actions");t&&(t.style.display=e?"block":"none")},setDisabled:function(e){e?this.$refs.container.querySelector("input").setAttribute("disabled","disabled"):this.$refs.container.querySelector("input").removeAttribute("disabled")}}}},221:function(e,t,a){t=e.exports=a(109)(!0),t.push([e.i,".component-upload-uploadimg .el-upload--picture-card i{left:50%;top:50%;transform:translateX(-50%) translateY(-50%)}.component-upload-uploadimg{width:100px;height:100px;display:inline-block}.component-upload-uploadimg.uploaddisabled *{color:#ededed;border-color:#ededed!important;cursor:auto}.component-upload-uploadimg.uploaddisabled .el-upload-list__item-delete{display:none!important}.component-upload-uploadimg .el-progress,.component-upload-uploadimg .el-progress--circle,.component-upload-uploadimg .el-progress--circle .el-progress-circle,.component-upload-uploadimg .el-progress--circle>*,.component-upload-uploadimg .el-progress .el-progress-circle,.component-upload-uploadimg .el-progress>*,.component-upload-uploadimg .el-upload--picture-card,.component-upload-uploadimg .el-upload-list__item,.component-upload-uploadimg .el-upload-list__item-actions{width:100%!important;height:100%!important}.component-upload-uploadimg>*{height:100%}.component-upload-uploadimg .defaultImg{position:relative;border-radius:5px}.component-upload-uploadimg .defaultImg:hover span{opacity:1}.component-upload-uploadimg .defaultImg img{width:100%;height:100%}.component-upload-uploadimg .defaultImg span{border-radius:5px;opacity:0;position:absolute;width:100%;height:100%;top:0;left:0;background:rgba(0,0,0,.4);text-align:center;transition:all .3s ease}.component-upload-uploadimg .defaultImg span i{font-size:30px;color:#fff;display:block;transform:translateY(-50%);top:50%;position:absolute;width:100%;cursor:pointer}.component-upload-uploadimg .el-upload--picture-card{position:relative}.component-upload-uploadimg .el-upload--picture-card i{position:absolute}","",{version:3,sources:["/Users/zhaoyicheng/Documents/Code/yxt/PC-old/sys_ui/assets/src/views/component/upload/UploadImg.vue"],names:[],mappings:"AACA,uDAAuD,SAAS,QAAQ,2CAA2C,CAClH,AACD,4BAA4B,YAAY,aAAa,oBAAoB,CACxE,AACD,6CAA6C,cAAc,+BAAgC,WAAW,CACrG,AACD,wEAAwE,sBAAuB,CAC9F,AACD,2dAA2d,qBAAsB,qBAAsB,CACtgB,AACD,8BAA8B,WAAW,CACxC,AACD,wCAAwC,kBAAkB,iBAAiB,CAC1E,AACD,mDAAmD,SAAS,CAC3D,AACD,4CAA4C,WAAW,WAAW,CACjE,AACD,6CAA6C,kBAAkB,UAAU,kBAAkB,WAAW,YAAY,MAAM,OAAO,0BAA2B,kBAAkB,uBAAyB,CACpM,AACD,+CAA+C,eAAe,WAAW,cAAc,2BAA2B,QAAQ,kBAAkB,WAAW,cAAc,CACpK,AACD,qDAAqD,iBAAiB,CACrE,AACD,uDAAuD,iBAAiB,CACvE",file:"UploadImg.vue",sourcesContent:["\n.component-upload-uploadimg .el-upload--picture-card i{left:50%;top:50%;transform:translateX(-50%) translateY(-50%)\n}\n.component-upload-uploadimg{width:100px;height:100px;display:inline-block\n}\n.component-upload-uploadimg.uploaddisabled *{color:#ededed;border-color:#ededed !important;cursor:auto\n}\n.component-upload-uploadimg.uploaddisabled .el-upload-list__item-delete{display:none !important\n}\n.component-upload-uploadimg .el-upload--picture-card,.component-upload-uploadimg .el-upload-list__item-actions,.component-upload-uploadimg .el-upload-list__item,.component-upload-uploadimg .el-progress,.component-upload-uploadimg .el-progress--circle,.component-upload-uploadimg .el-progress .el-progress-circle,.component-upload-uploadimg .el-progress--circle .el-progress-circle,.component-upload-uploadimg .el-progress>*,.component-upload-uploadimg .el-progress--circle>*{width:100% !important;height:100% !important\n}\n.component-upload-uploadimg>*{height:100%\n}\n.component-upload-uploadimg .defaultImg{position:relative;border-radius:5px\n}\n.component-upload-uploadimg .defaultImg:hover span{opacity:1\n}\n.component-upload-uploadimg .defaultImg img{width:100%;height:100%\n}\n.component-upload-uploadimg .defaultImg span{border-radius:5px;opacity:0;position:absolute;width:100%;height:100%;top:0;left:0;background:rgba(0,0,0,0.4);text-align:center;transition:all 300ms ease\n}\n.component-upload-uploadimg .defaultImg span i{font-size:30px;color:#fff;display:block;transform:translateY(-50%);top:50%;position:absolute;width:100%;cursor:pointer\n}\n.component-upload-uploadimg .el-upload--picture-card{position:relative\n}\n.component-upload-uploadimg .el-upload--picture-card i{position:absolute\n}\n"],sourceRoot:""}])},222:function(e,t,a){var n=a(221);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(110)("1199aee1",n,!0)},223:function(e,t,a){a(222);var n=a(5)(a(220),a(224),null,null);e.exports=n.exports},224:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"container",staticClass:"component-upload-uploadimg",class:{uploaddisabled:e.disabled}},[a("el-upload",{attrs:{headers:e.headers,disabled:e.disabled,action:e.url,name:e.name,data:e.data,"list-type":"picture-card",multiple:!1,"before-upload":e.beforeUpload,"on-success":e.handleSuccess,"on-error":e.handleRemove,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"before-remove":e.removeImg,accept:"image/jpg,image/jpeg,image/png,image/gif","file-list":e.currImg}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{size:"tiny"},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[a("img",{attrs:{width:"100%",src:e.currImg.length>0&&e.currImg[0].url,alt:""}})])],1)},staticRenderFns:[]}},243:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{value:Array,closable:{type:Boolean,default:!0}},data:function(){return{currVal:this.value||[],inputVisible:!1,inputValue:void 0}},created:function(){},activated:function(){},watch:{value:function(e){(e!=this.currVal||e&&e.length!=this.currVal.length)&&(this.currVal=e)},currVal:function(e){e.length==this.currVal&&e==this.currVal||this.$emit("input",e)}},methods:{handleClose:function(e){this.currVal.splice(this.currVal.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var e=this.inputValue;e&&this.currVal.push(e),this.inputVisible=!1,this.inputValue=""}},components:{}}},247:function(e,t,a){t=e.exports=a(109)(!0),t.push([e.i,"#component-form-tags{display:inline-block}#component-form-tags .el-tag{margin-right:5px}#component-form-tags .input-new-tag{display:inline-block;width:80px!important}","",{version:3,sources:["/Users/zhaoyicheng/Documents/Code/yxt/PC-old/sys_ui/assets/src/views/component/form/Tags.vue"],names:[],mappings:"AACA,qBAAqB,oBAAoB,CACxC,AACD,6BAA6B,gBAAgB,CAC5C,AACD,oCAAoC,qBAAqB,oBAAqB,CAC7E",file:"Tags.vue",sourcesContent:["\n#component-form-tags{display:inline-block\n}\n#component-form-tags .el-tag{margin-right:5px\n}\n#component-form-tags .input-new-tag{display:inline-block;width:80px !important\n}\n"],sourceRoot:""}])},250:function(e,t,a){var n=a(247);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(110)("0f7a44a6",n,!0)},251:function(e,t,a){a(250);var n=a(5)(a(243),a(254),null,null);e.exports=n.exports},254:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{attrs:{id:"component-form-tags"}},[e._l(e.currVal,function(t){return a("el-tag",{key:t,attrs:{closable:e.closable,"close-transition":!1},on:{close:function(a){e.handleClose(t)}}},[a("i",[e._v(e._s(t))])])}),e._v(" "),e.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{placeholder:"输入标签",size:"mini"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{attrs:{size:"small"},on:{click:e.showInput}},[e._v("添加标签")])],2)},staticRenderFns:[]}},839:function(e,t,a){"use strict";function n(){return{course_name:"",pinyin:"",thumb:"",image:"",tags:"",description:"",type:"public",material_type:"text",summary:[],attribute:[]}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(199),a(203)),i=a(251),r=a.n(i),s=a(223),u=a.n(s);t.default={name:"gov-authority",components:{vTags:r.a,UploadImg:u.a},data:function(){return{loadingData:!1,activeTab:"first",fetchParam:n(),courseTags:[],onValue:1,offValue:2,summary:[],attribute:[],zy:{},sx:{},fj:{},category_name:"",rules:{},isDisable:!1,uploadextraData:{biz:"course",extpath:"cover"}}},watch:{},created:function(){var e=this;if(xmview.setContentLoading(!1),this.zy={summary:[{name:"中文名",value:"",must:1},{name:"拼音名",value:"",must:1},{name:"别名",value:""},{name:"拉丁学名",value:""},{name:"学名",value:""},{name:"界",value:""},{name:"门",value:""},{name:"纲",value:""},{name:"目",value:""},{name:"科",value:""},{name:"属",value:""},{name:"种",value:""},{name:"制法",value:""},{name:"主要分子式",value:""},{name:"药材性状",value:""},{name:"鉴别",value:""},{name:"分布区域",value:""},{name:"产地",value:""},{name:"采收时间",value:""},{name:"入药部位",value:""},{name:"三品",value:""},{name:"用量",value:""},{name:"毒性",value:""},{name:"贮藏",value:""},{name:"禁忌",value:""},{name:"来源",value:""},{name:"植物形态",value:""},{name:"加工炮制",value:""},{name:"性状鉴别",value:""},{name:"化学成分",value:""},{name:"药理作用",value:""}],attribute:[{name:"性味归经",value:"",must:1},{name:"功效",value:"",must:1},{name:"临床应用",value:"",must:1},{name:"主治",value:""},{name:"用法用量",value:""},{name:"使用注意",value:""},{name:"文献论述",value:""},{name:"处方举例",value:""},{name:"不良反应",value:""}]},this.sx={summary:[{name:"中文名",value:"",must:1},{name:"拼音名",value:"",must:1},{name:"别名",value:""},{name:"国际编号",value:""},{name:"出处",value:""},{name:"穴名释疑",value:""},{name:"隶属经络",value:""},{name:"类型",value:""},{name:"部位",value:""},{name:"特异性",value:""}],attribute:[{name:"定位",value:"",must:1},{name:"取穴",value:"",must:1},{name:"操作",value:"",must:1},{name:"局部解剖",value:""},{name:"功效",value:""},{name:"主治",value:""},{name:"注意事项",value:""},{name:"常用配伍",value:""},{name:"文献摘要",value:""},{name:"现代研究",value:""}]},this.fj={summary:[{name:"中文名",value:"",must:1},{name:"拼音名",value:""},{name:"出处",value:""},{name:"分类",value:""}],attribute:[{name:"组成",value:"",must:1},{name:"临床应用",value:"",must:1},{name:"功用",value:""},{name:"主治",value:""},{name:"方解",value:""},{name:"配伍特点",value:""},{name:"辨证要点",value:""},{name:"加减变化",value:""},{name:"使用注意",value:""},{name:"附方",value:""},{name:"文献摘要",value:""},{name:"临床报道",value:""},{name:"实验研究",value:""},{name:"方歌",value:""}]},this.uploadImgUrl=o.a.commonUploadImage(),!this.$route.params.herbalInfo)return xmview.showTip("error","请先选择中药栏目组最终级栏目添加"),void this.$router.push({name:"course-manage-public"});var t=this.$route.params.herbalInfo.category_type,a=this.fetchParam;3==t?(this.category_name="中药",a.summary=this.zy.summary,a.attribute=this.zy.attribute):4==t?(this.category_name="方剂",a.summary=this.fj.summary,a.attribute=this.fj.attribute):(this.category_name="腧穴",a.summary=this.sx.summary,a.attribute=this.sx.attribute),"edit"==this.$route.params.handle?o.a.getHerbal({contentid:this.$route.params.herbalInfo.contentid}).then(function(t){return e.herbalInfo=JSON.parse(t),xmview.setContentTile("编辑课程-中草药 "+e.category_name),e.loadingData=!1,e.fetchParam.description=e.herbalInfo.description,e.fetchParam.image=e.herbalInfo.thumb,e.courseTags=e.herbalInfo.tags?e.herbalInfo.tags.split(","):[],e.handleArr(e.herbalInfo.summary,e.fetchParam.summary),e.handleArr(e.herbalInfo.attribute,e.fetchParam.attribute),!1}):(xmview.setContentTile("添加课程-中草药 "+this.category_name),this.loadingData=!1)},methods:{handleArr:function(e,t){var a={};e.forEach(function(e){a[e.name]=e.value}),t.forEach(function(e){e.value=a[e.name]})},typeChange:function(e){"doc"===e?this.accept=".doc,.docx":"ppt"===e?this.accept=".ppt,pptx":"pdf"===e&&(this.accept=".pdf")},cropperImgSucc:function(e){var t=this;o.a.commonUploadImageBase({image:e,extpath:""}).then(function(e){t.fetchParam.image=e.url})},handleClick:function(e,t){},btnPreClick:function(){return"three"==this.activeTab?void(this.activeTab="second"):"second"==this.activeTab?void(this.activeTab="first"):void 0},btnNextClick:function(){return"first"==this.activeTab?void(this.activeTab="second"):"second"==this.activeTab?void(this.activeTab="three"):void 0},handleSubmit:function(){var e=this,t=Object.assign({},this.fetchParam);t.summary.map(function(e){"中文名"==e.name&&(t.course_name=e.value),"拼音名"==e.name&&(t.pinyin=e.value)}),t.thumb=t.image,t.tags=this.courseTags?this.courseTags.join(","):"";var a=t.attribute;if("中药"==this.category_name){if(a.map(function(t){return"性味归经"==t.name&&(e.rules.xwgz=t.value),"功效"==t.name&&(e.rules.gx=t.value),"临床应用"==t.name&&(e.rules.lcyy=t.value),!0}),""==t.course_name||""==t.pinyin||""==t.image)return xmview.showTip("error","请将必填项 ‘课程简介 - 课程封面图；概述 - 中文名、拼音名’全部填写"),!1;if(""==this.rules.xwgz||""==this.rules.gx||""==this.rules.lcyy)return xmview.showTip("error","请将必填项  ‘ 属性 - 性味归经、功效、临床应用 ‘ 全部填写"),!1}else if("方剂"==this.category_name){if(a.map(function(t){return"组成"==t.name&&(e.rules.zc=t.value),"临床应用"==t.name&&(e.rules.lcyy=t.value),!0}),""==t.course_name)return xmview.showTip("error","请先填写 ‘概述 - 中文名’"),!1;if(""==this.rules.zc||""==this.rules.lcyy)return xmview.showTip("error","请将必填项 ‘ 属性 - 组成、临床应用 ‘ 全部填写"),!1}else if("腧穴"==this.category_name){if(a.map(function(t){return"定位"==t.name&&(e.rules.dw=t.value),"取穴"==t.name&&(e.rules.qx=t.value),"操作"==t.name&&(e.rules.cz=t.value),!0}),""==t.course_name||""==t.pinyin||""==t.image)return xmview.showTip("error","请将必填项 ‘课程简介 - 课程封面图；概述 - 中文名、拼音名’ 全部填写"),!1;if(""==this.rules.dw||""==this.rules.qx||""==this.rules.cz||""==t.image)return xmview.showTip("error","请将必填项 ‘ 属性 - 定位、取穴、操作 ‘ 全部填写"),!1}var n=t.summary.filter(function(e){return"中文名"==e.name||"拼音名"==e.name||e.value});t.summary=n;var i=t.attribute.filter(function(e){return e.value});t.attribute=i;var r=void 0,s=void 0;r=JSON.stringify(t),s=this.$route.params.herbalInfo.category_id,this.isDisable=!0,"edit"==this.$route.params.handle?o.a.editHerbal({category_id:s,id:this.$route.params.herbalInfo.contentid,data:r,noJson:0}).then(function(t){e.isDisable=!1,e.$router.push({name:"course-manage-public"})}):o.a.addHerbal({category_id:s,data:r,noJson:0}).then(function(t){e.isDisable=!1,e.$router.push({name:"course-manage-public"}),e.fetchParam.contentid=t.contentid})}}}},936:function(e,t,a){t=e.exports=a(109)(!0),t.push([e.i,'#sys-form{padding:15px;position:relative;border:1px solid #ededed;border-radius:5px;background:#fff}#sys-form:after{content:"";clear:both;display:block}#sys-form .pagin{float:right;margin-top:15px}#sys-form .bottom-manage{margin-top:15px}.text-blue{color:#20a0ff}.text-light-blue{color:#58b7ff}.text-dark-blue{color:#1d8ce0}.text-success{color:#13ce66}.text-warning{color:#f7ba2a}.text-danger{color:#ff4949}#sys-form .el-form{max-width:700px}#sys-form .el-tab-pane{margin:20px 0;max-width:700px}#sys-form .el-tab-pane .el-form-item .m{font-size:12px;color:red}#sys-form .el-tab-pane .el-form-item__content img{width:112px;height:112px}#sys-form .el-tabs__header{max-width:715px;margin:0}#sys-form .bottom-btns{float:right}',"",{version:3,sources:["/Users/zhaoyicheng/Documents/Code/yxt/PC-old/sys_ui/assets/src/views/course/manage/AddHerbal.vue"],names:[],mappings:"AACA,UAAU,aAAa,kBAAkB,yBAAyB,kBAAkB,eAAe,CAClG,AACD,gBAAgB,WAAW,WAAW,aAAa,CAClD,AACD,iBAAiB,YAAY,eAAe,CAC3C,AACD,yBAAyB,eAAe,CACvC,AACD,WAAW,aAAa,CACvB,AACD,iBAAiB,aAAa,CAC7B,AACD,gBAAgB,aAAa,CAC5B,AACD,cAAc,aAAa,CAC1B,AACD,cAAc,aAAa,CAC1B,AACD,aAAa,aAAa,CACzB,AACD,mBAAmB,eAAe,CACjC,AACD,uBAAuB,cAAc,eAAe,CACnD,AACD,wCAAwC,eAAe,SAAS,CAC/D,AACD,kDAAkD,YAAY,YAAY,CACzE,AACD,2BAA2B,gBAAgB,QAAQ,CAClD,AACD,uBAAuB,WAAW,CACjC",file:"AddHerbal.vue",sourcesContent:["\n#sys-form{padding:15px;position:relative;border:1px solid #ededed;border-radius:5px;background:#fff\n}\n#sys-form:after{content:'';clear:both;display:block\n}\n#sys-form .pagin{float:right;margin-top:15px\n}\n#sys-form .bottom-manage{margin-top:15px\n}\n.text-blue{color:#20A0FF\n}\n.text-light-blue{color:#58B7FF\n}\n.text-dark-blue{color:#1D8CE0\n}\n.text-success{color:#13CE66\n}\n.text-warning{color:#F7BA2A\n}\n.text-danger{color:#FF4949\n}\n#sys-form .el-form{max-width:700px\n}\n#sys-form .el-tab-pane{margin:20px 0;max-width:700px\n}\n#sys-form .el-tab-pane .el-form-item .m{font-size:12px;color:red\n}\n#sys-form .el-tab-pane .el-form-item__content img{width:112px;height:112px\n}\n#sys-form .el-tabs__header{max-width:715px;margin:0\n}\n#sys-form .bottom-btns{float:right\n}\n"],sourceRoot:""}])}});
//# sourceMappingURL=51.47db5c6050d1a55e9596.js.map